import{k as m,m as d,r as x,s as f,n as b,O as p}from"./index-nY7SO6jw.js";function O(n){return m()?(d(n),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function S(n,r){const o=x(r==null?void 0:r.initialValue),u=n.subscribe({next:e=>o.value=e,error:r==null?void 0:r.onError});return O(()=>{u.unsubscribe()}),o}function w(n,r={}){const{initialValue:o,shallow:u=!0,onError:e}=r,t=f(null),s=f(!0);return{data:S(b(n()).pipe(l=>new p(i=>{const v=l.subscribe({next:a=>{t.value=null,s.value=!1,i.next(a)},error:a=>{t.value=a instanceof Error?a:new Error(String(a)),s.value=!1,e==null||e(t.value),i.error(a)},complete:()=>{s.value=!1,i.complete()}});return()=>v.unsubscribe()})),{initialValue:o}),loading:s,error:t}}function g(n,r,o={}){const u=new p(e=>{const t=n(),s=b(t).subscribe({next:c=>{try{const l=r(c);e.next(l)}catch(l){e.error(l)}},error:c=>e.error(c),complete:()=>e.complete()});return()=>s.unsubscribe()});return w(()=>u,o)}export{w as a,g as u};
