import{d as U,c as z,f as B,w as q,$ as L,Y as a,Z as n,S as l,k as o,R as d,_ as V,F as N,W as j,a0 as R,V as _,G as c,B as I,o as W,X,a1 as Y,y as Z}from"./vue-vendor-DPw1dQYc.js";import{u as F}from"./parser.store-BpTTeiQL.js";import{x as A,_ as H,O as J,y as K,T as D,n as E}from"./ui-vendor-IRGmExUJ.js";import{j as G}from"./index-5g_MmUEE.js";const ee={class:"parser-selector-modal"},te={class:"search-section"},se={class:"parser-list"},le={key:0,class:"loading-section"},ae={key:1,class:"empty-section"},oe={key:2,class:"parser-groups"},ne={key:0,class:"parser-group"},re={class:"parser-items"},ie=["onClick"],ue={class:"parser-info"},de={class:"parser-header"},ce={class:"parser-name"},pe={key:0,class:"parser-description"},_e={class:"parser-actions"},fe={key:1,class:"parser-group"},me={class:"parser-items"},ve=["onClick"],ye={class:"parser-info"},he={class:"parser-header"},ge={class:"parser-name"},Ce={key:0,class:"parser-description"},ke={class:"parser-actions"},Pe={class:"modal-footer"},Te=U({__name:"ParserSelectorModal",props:{modelValue:{type:Boolean},filterType:{default:null},filterOutputType:{default:null}},emits:["update:modelValue","select","cancel"],setup($,{emit:M}){const r=$,v=M,g=F(),i=z({get:()=>r.modelValue,set:e=>v("update:modelValue",e)}),u=B(""),p=B(null),y=B(!1),S=z(()=>{let e=g.parsers;if(r.filterType&&(e=e.filter(t=>t.type===r.filterType)),r.filterOutputType&&(e=e.filter(t=>t.outputType===r.filterOutputType)),u.value){const t=u.value.toLowerCase();e=e.filter(f=>f.name.toLowerCase().includes(t)||f.description?.toLowerCase().includes(t)||f.tags.some(m=>m.toLowerCase().includes(t)))}return e}),C=z(()=>{const e=S.value;return{builtIn:e.filter(t=>t.isBuiltIn),user:e.filter(t=>!t.isBuiltIn)}});function b(e){switch(e){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}function k(e){p.value=e}function P(e){e&&(v("select",e),i.value=!1)}function w(){v("cancel"),i.value=!1}return q(i,async e=>{if(e&&g.parsers.length===0){y.value=!0;try{await g.loadParsers()}finally{y.value=!1}}}),q(i,e=>{e||(p.value=null,u.value="")}),(e,t)=>{const f=H,m=J,T=K,h=D,x=E,Q=A;return a(),L(Q,{open:i.value,"onUpdate:open":t[2]||(t[2]=s=>i.value=s),title:"Select Parser",width:"800px",footer:null,"destroy-on-close":!0,onCancel:w},{default:n(()=>[l("div",ee,[l("div",te,[o(f,{value:u.value,"onUpdate:value":t[0]||(t[0]=s=>u.value=s),placeholder:"Search parsers...","allow-clear":"",size:"large"},null,8,["value"])]),l("div",se,[y.value?(a(),d("div",le,[o(m,{size:"large",tip:"Loading parsers..."})])):S.value.length===0?(a(),d("div",ae,[o(T,{description:"No parsers found"})])):(a(),d("div",oe,[C.value.builtIn.length>0?(a(),d("div",ne,[t[4]||(t[4]=l("div",{class:"group-header"},"Built-in Parsers",-1)),l("div",re,[(a(!0),d(N,null,j(C.value.builtIn,s=>(a(),d("div",{key:s.id,class:R(["parser-item",{selected:p.value?.id===s.id}]),onClick:O=>k(s)},[l("div",ue,[l("div",de,[l("span",ce,_(s.name),1),o(h,{color:b(s.type),size:"small"},{default:n(()=>[c(_(s.type),1)]),_:2},1032,["color"]),o(h,{size:"small"},{default:n(()=>[c(_(s.outputType),1)]),_:2},1024)]),s.description?(a(),d("div",pe,_(s.description),1)):V("",!0)]),l("div",_e,[o(x,{type:"primary",size:"small",onClick:I(O=>P(s),["stop"])},{default:n(()=>t[3]||(t[3]=[c(" Select ")])),_:2,__:[3]},1032,["onClick"])])],10,ie))),128))])])):V("",!0),C.value.user.length>0?(a(),d("div",fe,[t[6]||(t[6]=l("div",{class:"group-header"},"Custom Parsers",-1)),l("div",me,[(a(!0),d(N,null,j(C.value.user,s=>(a(),d("div",{key:s.id,class:R(["parser-item",{selected:p.value?.id===s.id}]),onClick:O=>k(s)},[l("div",ye,[l("div",he,[l("span",ge,_(s.name),1),o(h,{color:b(s.type),size:"small"},{default:n(()=>[c(_(s.type),1)]),_:2},1032,["color"]),o(h,{size:"small"},{default:n(()=>[c(_(s.outputType),1)]),_:2},1024)]),s.description?(a(),d("div",Ce,_(s.description),1)):V("",!0)]),l("div",ke,[o(x,{type:"primary",size:"small",onClick:I(O=>P(s),["stop"])},{default:n(()=>t[5]||(t[5]=[c(" Select ")])),_:2,__:[5]},1032,["onClick"])])],10,ve))),128))])])):V("",!0)]))]),l("div",Pe,[o(x,{onClick:w},{default:n(()=>t[7]||(t[7]=[c(" Cancel ")])),_:1,__:[7]}),o(x,{type:"primary",disabled:!p.value,onClick:t[1]||(t[1]=s=>P(p.value))},{default:n(()=>t[8]||(t[8]=[c(" Select Parser ")])),_:1,__:[8]},8,["disabled"])])])]),_:1},8,["open"])}}}),Ve=G(Te,[["__scopeId","data-v-41d0911c"]]),Se={class:"parser-selector"},be={class:"parser-info"},we={class:"parser-name"},xe={class:"parser-actions"},ze=U({__name:"ParserSelector",props:{modelValue:{},placeholder:{default:"Select Parser"},allowClear:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},filterType:{default:null},filterOutputType:{default:null},context:{default:"default"}},emits:["update:modelValue","change"],setup($,{emit:M}){const r=$,v=M,g=X(),i=Y(),u=F(),p=B(!1),y=z(()=>r.modelValue&&u.parsers.find(e=>e.id===r.modelValue)||null);function S(e){switch(e){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}function C(){u.setSelectionContext({returnPath:i.fullPath,context:r.context,currentValue:r.modelValue,filterType:r.filterType,filterOutputType:r.filterOutputType}),g.push("/parsers/select")}function b(){v("update:modelValue",null),v("change",null,null)}function k(){p.value=!0}function P(e){v("update:modelValue",e.id),v("change",e.id,e),p.value=!1}function w(){p.value=!1}return W(async()=>{u.parsers.length===0&&await u.loadParsers()}),q(()=>i.query,async e=>{if(e.selectedParserId&&e.context===r.context){const t=e.selectedParserId;u.parsers.length===0&&await u.loadParsers();const f=u.parsers.find(m=>m.id===t);if(f){v("update:modelValue",t),v("change",t,f),await Z();const{selectedParserId:m,context:T,...h}=i.query;g.replace({...i,query:h})}else{const{selectedParserId:m,context:T,...h}=i.query;g.replace({...i,query:h})}}},{immediate:!0}),(e,t)=>{const f=D,m=E;return a(),d("div",Se,[y.value?(a(),d("div",{key:0,class:"selected-parser",onClick:C},[l("div",be,[l("span",we,_(y.value.name),1),o(f,{color:S(y.value.type),size:"small"},{default:n(()=>[c(_(y.value.type),1)]),_:1},8,["color"]),o(f,{size:"small"},{default:n(()=>[c(_(y.value.outputType),1)]),_:1})]),l("div",xe,[e.allowClear?(a(),L(m,{key:0,size:"small",type:"text",danger:"",onClick:I(b,["stop"])},{default:n(()=>t[1]||(t[1]=[c(" Clear ")])),_:1,__:[1]})):V("",!0),o(m,{size:"small",type:"text",onClick:I(k,["stop"])},{default:n(()=>t[2]||(t[2]=[c(" Change ")])),_:1,__:[2]})])])):(a(),L(m,{key:1,block:"",onClick:k,disabled:e.disabled},{default:n(()=>[c(_(e.placeholder),1)]),_:1},8,["disabled"])),o(Ve,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=T=>p.value=T),"filter-type":e.filterType,"filter-output-type":e.filterOutputType,onSelect:P,onCancel:w},null,8,["modelValue","filter-type","filter-output-type"])])}}}),Oe=G(ze,[["__scopeId","data-v-3c763938"]]);export{Oe as P};
