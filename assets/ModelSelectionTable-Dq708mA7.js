import{d as e,f as a,c as l,o as t,a2 as s,W as o,Y as i,k as n,U as d,X as u,G as r,F as p,a4 as c,a3 as v,S as m,a5 as f,a6 as k,q as C,u as b,A as g,B as h,n as x}from"./vendor-BxfGckcK.js";import{a as y}from"./designs-db-Cu90pWLg.js";import{j as T,I as _,_ as P}from"./index-JX8mTFJZ.js";const w={class:"model-selection-panel full-width"},M={class:"model-filters spacing-bottom-sm"},I={key:0,class:"provider-tree"},F=["onClick"],O={class:"provider-name"},S={class:"model-count"},A={key:0,class:"provider-avg-cost"},$={class:"models-container"},L={class:"model-grid"},N=["onClick"],j={class:"model-name"},z={class:"model-costs"},U={key:0,class:"trial-cost"},W={class:"cost-breakdown"},D={key:0,class:"input-cost"},E={key:1,class:"output-cost"},B={key:1,class:"loading-state"},G={key:0,class:"model-details"},R=P(e({__name:"ModelSelectionTable",props:{models:{},selectedModel:{default:null},isLoading:{type:Boolean,default:!1},totalCalls:{default:0},design:{default:null},modelParams:{default:()=>({})}},emits:["model-selected","model-configured"],setup(e,{emit:P}){const R=e,Y=P,q=a(""),K=a(""),X=a(!1),H=a(null),J=a([]),Q=l(()=>{const e=new Set(R.models.map(e=>e.provider));return Array.from(e).sort()});t(()=>{J.value=[...Q.value]});const V=l(()=>{let e=R.models;if(q.value){const a=q.value.toLowerCase();e=e.filter(e=>e.displayName.toLowerCase().includes(a)||e.modelId.toLowerCase().includes(a)||e.provider.toLowerCase().includes(a))}return K.value&&(e=e.filter(e=>e.provider===K.value)),e}),Z=l(()=>{const e=new Map;return V.value.forEach(a=>{e.has(a.provider)||e.set(a.provider,[]),e.get(a.provider).push(a)}),Array.from(e.entries()).map(([e,a])=>{const l=a.sort((e,a)=>e.displayName.localeCompare(a.displayName)),t=l.map(e=>e.capabilities?.inputCostPerToken).filter(e=>null!=e),s=l.map(e=>e.capabilities?.outputCostPerToken).filter(e=>null!=e),o=t.length>0?t.reduce((e,a)=>e+a,0)/t.length*1e6:null,i=s.length>0?s.reduce((e,a)=>e+a,0)/s.length*1e6:null;return{id:e,name:ee(e),models:l,avgInputCost:o,avgOutputCost:i}})});function ee(e){return{anthropic:"Anthropic","openai-chat":"OpenAI Chat","openai-responses":"OpenAI Responses","ollama-chat":"Ollama Chat","ollama-generate":"Ollama Generate",openrouter:"OpenRouter"}[e]||e}function ae(e){const a=1e6*e;return a<.01?a.toFixed(4):a<1?a.toFixed(3):a<10?a.toFixed(2):a<100?a.toFixed(1):a.toFixed(0)}function le(e){return`${e.avgInputCost?.toFixed(2)||"0"}/${e.avgOutputCost?.toFixed(2)||"0"}/$1M`}function te(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}function se(e){if(!e.capabilities?.inputCostPerToken||0===R.totalCalls)return 0;let a=50;R.design?.tokenEstimate?a=R.design.tokenEstimate.avgTokens:R.design?.promptTemplate&&(a=Math.max(20,Math.ceil(R.design.promptTemplate.length/4)));const l=y.getOutputTokenLimit(e.provider,e.modelId,R.modelParams||{});return a*R.totalCalls*(e.capabilities.inputCostPerToken||0)+l*R.totalCalls*(e.capabilities.outputCostPerToken||0)}return(e,a)=>{const l=d("a-input-search"),t=d("a-select-option"),y=d("a-select"),P=d("a-spin"),R=d("a-descriptions-item"),V=d("a-tag"),oe=d("a-descriptions"),ie=d("a-modal");return o(),s("div",w,[i("div",M,[n(l,{value:q.value,"onUpdate:value":a[0]||(a[0]=e=>q.value=e),placeholder:"Search models (e.g., gpt-4, claude, llama)...",class:"search-input",allowClear:"",size:"small",style:{flex:1}},null,8,["value"]),n(y,{value:K.value,"onUpdate:value":a[1]||(a[1]=e=>K.value=e),placeholder:"All Providers",allowClear:"",size:"small",style:{width:"150px",marginLeft:"8px"}},{default:u(()=>[n(t,{value:""},{default:u(()=>a[3]||(a[3]=[r("All Providers")])),_:1,__:[3]}),(o(!0),s(p,null,c(Q.value,e=>(o(),m(t,{key:e,value:e},{default:u(()=>[r(f(ee(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),e.isLoading?(o(),s("div",B,[n(P,{size:"large"})])):(o(),s("div",I,[(o(!0),s(p,null,c(Z.value,l=>(o(),s("div",{key:l.id,class:k(["provider-row",{expanded:J.value.includes(l.id)}])},[i("div",{class:"provider-header",onClick:e=>function(e){const a=J.value.indexOf(e);a>=0?J.value.splice(a,1):J.value.push(e)}(l.id)},[n(b(T),{class:k(["expand-icon",{expanded:J.value.includes(l.id)}])},null,8,["class"]),i("span",O,f(l.name),1),i("span",S,f(l.models.length)+" models",1),l.avgInputCost?(o(),s("span",A," avg "+f(le(l)),1)):v("",!0)],8,F),C(i("div",$,[i("div",L,[(o(!0),s(p,null,c(l.models,l=>(o(),s("div",{key:l.id,class:k(["model-card",{selected:e.selectedModel?.id===l.id,disabled:!l.enabled}]),onClick:e=>l.enabled&&function(e){Y("model-selected",e),x(()=>{Y("model-configured",e,{})})}(l)},[i("div",j,f(l.displayName),1),i("div",z,[e.totalCalls>0&&l.capabilities?.inputCostPerToken?(o(),s("span",U," $"+f(se(l).toFixed(4)),1)):v("",!0),i("span",W,[l.capabilities?.inputCostPerToken?(o(),s("span",D," in: $"+f(ae(l.capabilities.inputCostPerToken)),1)):v("",!0),l.capabilities?.outputCostPerToken?(o(),s("span",E," out: $"+f(ae(l.capabilities.outputCostPerToken)),1)):v("",!0),a[4]||(a[4]=i("span",{class:"cost-unit"},"/1M",-1))])]),n(b(_),{onClick:h(e=>function(e){H.value=e,X.value=!0}(l),["stop"]),class:"info-icon"},null,8,["onClick"])],10,N))),128))])],512),[[g,J.value.includes(l.id)]])],2))),128))])),n(ie,{open:X.value,"onUpdate:open":a[2]||(a[2]=e=>X.value=e),title:`Model Details: ${H.value?.displayName}`,footer:null,width:"600px"},{default:u(()=>[H.value?(o(),s("div",G,[n(oe,{column:2,size:"small",bordered:""},{default:u(()=>[n(R,{label:"Provider"},{default:u(()=>[r(f(ee(H.value.provider)),1)]),_:1}),n(R,{label:"Model ID"},{default:u(()=>[i("code",null,f(H.value.modelId),1)]),_:1}),n(R,{label:"Status"},{default:u(()=>[n(V,{color:H.value.enabled?"green":"red"},{default:u(()=>[r(f(H.value.enabled?"Available":"Disabled"),1)]),_:1},8,["color"])]),_:1}),H.value.capabilities?.inputCostPerToken?(o(),m(R,{key:0,label:"Input Cost"},{default:u(()=>[r(" $"+f(ae(H.value.capabilities.inputCostPerToken))+"/1M tokens ",1)]),_:1})):v("",!0),H.value.capabilities?.outputCostPerToken?(o(),m(R,{key:1,label:"Output Cost"},{default:u(()=>[r(" $"+f(ae(H.value.capabilities.outputCostPerToken))+"/1M tokens ",1)]),_:1})):v("",!0),H.value.capabilities?.contextWindow?(o(),m(R,{key:2,label:"Context Window"},{default:u(()=>[r(f(te(H.value.capabilities.contextWindow))+" tokens ",1)]),_:1})):v("",!0),H.value.capabilities?.maxTokens?(o(),m(R,{key:3,label:"Max Output"},{default:u(()=>[r(f(te(H.value.capabilities.maxTokens))+" tokens ",1)]),_:1})):v("",!0),void 0!==H.value.capabilities?.supportsStreaming?(o(),m(R,{key:4,label:"Supports Streaming"},{default:u(()=>[r(f(H.value.capabilities.supportsStreaming?"Yes":"No"),1)]),_:1})):v("",!0)]),_:1})])):v("",!0)]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-e72c7461"]]);export{R as M};
