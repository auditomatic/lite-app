import{j as L,u as F,a as U,f as ie,g as X,c as Z,x as de}from"./index-BfkoFMqp.js";import{u as ue}from"./useV4Models-BUT1T-ux.js";import{M as pe,G as ce}from"./GenericModelSelectorModalV3-DuHC6MOQ.js";import{H as me,l as Y,an as ve,W as ge,p as ee,ak as te,aR as _e,aJ as fe,al as se,aj as be,ap as he,a6 as ye,a7 as $e,o as ke,a5 as Ce,n as Se,M as Pe}from"./ui-vendor-CcBzucUW.js";import{d as N,R as u,S as e,G as M,_ as x,k as $,Z as P,Y as s,u as J,V as p,c as j,F as D,W as A,f as w,w as G,a0 as oe,n as q,q as xe,a2 as Ie,y as ne,a7 as we,a3 as H,$ as I,A as Te,r as Ve,o as Me}from"./vue-vendor-DPw1dQYc.js";import{c as W,i as K,g as Re}from"./useHeatmapStylingV3-CCIdVOn4.js";import{u as Ee}from"./useV4ProviderParameters-C_8sjLXf.js";import"./utils-vendor--V4UhsOV.js";import"./useV4LiveQuery-CFmqtcF9.js";import"./useCostEstimation-1-vjpHDm.js";const Oe={class:"page-header"},Le={class:"header-actions"},Ne={key:0,class:"cost-estimate"},De={class:"cost-tooltip"},je=N({__name:"PlaygroundHeaderV3",props:{selectedModel:{},estimatedTokens:{},outputTokenLimit:{},disabled:{type:Boolean},loading:{type:Boolean}},emits:["execute"],setup(R){return(a,n)=>{const i=me,c=Y;return s(),u("div",Oe,[n[4]||(n[4]=e("div",{class:"header-content"},[e("h1",null,[M("LLM Playground "),e("span",{class:"description"},"Test one-off prompts and responses")])],-1)),e("div",Le,[a.selectedModel?(s(),u("div",Ne,[$(i,{placement:"bottom"},{title:P(()=>[e("div",De,[n[1]||(n[1]=e("div",null,"Cost estimate based on:",-1)),e("div",null,"• Input: "+p(a.estimatedTokens)+" tokens",1),e("div",null,"• Output: 10 - "+p(a.outputTokenLimit)+" tokens",1),n[2]||(n[2]=e("div",null,"• Min assumes 10 token response",-1)),n[3]||(n[3]=e("div",null,"• Max assumes full response limit",-1))])]),default:P(()=>[$(J(ve),{class:"info-icon"})]),_:1}),$(pe,{model:a.selectedModel,mode:"range","input-tokens":a.estimatedTokens,"min-output-tokens":10,"max-output-tokens":a.outputTokenLimit,layout:"inline",size:"medium"},null,8,["model","input-tokens","max-output-tokens"])])):x("",!0),$(c,{type:"primary",onClick:n[0]||(n[0]=d=>a.$emit("execute")),disabled:a.disabled,loading:a.loading},{default:P(()=>[M(p(a.loading?"Running...":"Run"),1)]),_:1},8,["disabled","loading"])])])}}}),ze=L(je,[["__scopeId","data-v-26164535"]]),Be={key:0,class:"model-info"},Ae={class:"info-header"},Ue={class:"model-name"},Fe={class:"provider-badge"},Je={key:0,class:"info-details"},qe={class:"detail-item"},He={class:"value"},We={class:"detail-item"},Ge={class:"value"},Ye={class:"dollar-amount"},Qe={class:"detail-item"},Xe={class:"value"},Ze={class:"dollar-amount"},Ke={class:"detail-item"},et={class:"value"},tt={class:"detail-item"},st={class:"value"},ot={class:"detail-item"},nt={class:"value"},lt=N({__name:"ModelInfoCardV3",props:{model:{}},setup(R){const a=R,n=F(),i=j(()=>n.settings.core.preferences.value);function c(m){return m<.01?m.toFixed(4):m<1?m.toFixed(3):m.toFixed(2)}function d(){if(!a.model?.capabilities?.inputCostPerToken)return"N/A";const m=a.model.capabilities.inputCostPerToken*1e3;return`$${c(m)}`}function S(){if(!a.model?.capabilities?.outputCostPerToken)return"N/A";const m=a.model.capabilities.outputCostPerToken*1e3;return`$${c(m)}`}function o(m){return m?m>=1e6?(m/1e6).toFixed(1)+"M":m>=1e3?(m/1e3).toFixed(0)+"k":m.toString():"N/A"}function C(m){return!a.model||!i.value?.enableEnvironmentalCosts,"??"}return(m,k)=>m.model?(s(),u("div",Be,[e("div",Ae,[e("span",Ue,p(m.model.displayName),1),e("span",Fe,p(m.model.provider),1)]),m.model.capabilities?(s(),u("div",Je,[e("div",qe,[k[0]||(k[0]=e("span",{class:"label"},"Context:",-1)),e("span",He,p(o(m.model.capabilities.contextWindow))+" tokens",1)]),e("div",We,[k[2]||(k[2]=e("span",{class:"label"},"Input:",-1)),e("span",Ge,[e("span",Ye,p(d()),1),k[1]||(k[1]=M("/1k "))])]),e("div",Qe,[k[4]||(k[4]=e("span",{class:"label"},"Output:",-1)),e("span",Xe,[e("span",Ze,p(S()),1),k[3]||(k[3]=M("/1k "))])]),e("div",Ke,[k[5]||(k[5]=e("span",{class:"label"},"CO₂: 🏭",-1)),e("span",et,p(C()),1)]),e("div",tt,[k[6]||(k[6]=e("span",{class:"label"},"Water: 💧",-1)),e("span",st,p(C()),1)]),e("div",ot,[k[7]||(k[7]=e("span",{class:"label"},"Energy: ⚡",-1)),e("span",nt,p(C()),1)])])):x("",!0)])):x("",!0)}}),at=L(lt,[["__scopeId","data-v-7120cb46"]]),rt={class:"left-panel"},it={class:"panel-section"},dt={class:"panel-section"},ut={class:"action-buttons"},pt={key:0,class:"panel-section"},ct={class:"template-buttons"},mt=N({__name:"PlaygroundLeftPanelV3",props:{selectedModel:{},promptText:{}},emits:["open-model-selector","load-from-design","clear-prompt","load-template"],setup(R){const a=F(),n=j(()=>{const c=a.templates.templates.value||[],d=a.spreadsheet.prompts.prompts.value||[];return c.length>0||d.length>0}),i=[{name:"Creative",prompt:"Write a creative short story about:"},{name:"Analysis",prompt:"Analyze the following text and provide insights:"},{name:"Explain",prompt:"Explain this concept in simple terms:"},{name:"Summarize",prompt:"Summarize the following content:"}];return(c,d)=>{const S=Y;return s(),u("div",rt,[e("div",it,[d[4]||(d[4]=e("h3",null,"Select Model",-1)),$(S,{type:"primary",size:"large",style:{width:"100%"},onClick:d[0]||(d[0]=o=>c.$emit("open-model-selector"))},{default:P(()=>d[3]||(d[3]=[M(" Select Model ")])),_:1,__:[3]}),$(at,{model:c.selectedModel},null,8,["model"])]),e("div",dt,[d[7]||(d[7]=e("h3",null,"Actions",-1)),e("div",ut,[$(S,{type:"default",onClick:d[1]||(d[1]=o=>c.$emit("load-from-design")),disabled:!n.value,block:""},{default:P(()=>d[5]||(d[5]=[M(" Load from Design ")])),_:1,__:[5]},8,["disabled"]),$(S,{type:"default",onClick:d[2]||(d[2]=o=>c.$emit("clear-prompt")),disabled:!c.promptText,block:""},{default:P(()=>d[6]||(d[6]=[M(" Clear Prompt ")])),_:1,__:[6]},8,["disabled"])])]),c.selectedModel?(s(),u("div",pt,[d[8]||(d[8]=e("h3",null,"Quick Templates",-1)),e("div",ct,[(s(),u(D,null,A(i,o=>$(S,{key:o.name,size:"small",onClick:C=>c.$emit("load-template",o.prompt)},{default:P(()=>[M(p(o.name),1)]),_:2},1032,["onClick"])),64))])])):x("",!0)])}}}),vt=L(mt,[["__scopeId","data-v-c9dee8ad"]]),gt={class:"template-editor"},_t=["placeholder","rows","data-testid","aria-label"],ft=N({__name:"TemplateEditorV3",props:{modelValue:{},label:{},placeholder:{default:"Enter your prompt template..."},required:{type:Boolean},rows:{default:4},variables:{default:()=>[]},variableColors:{default:()=>({})}},emits:["update:modelValue"],setup(R,{expose:a,emit:n}){const i=R,c=n,d=w(),S=w(),o=w(!1),C=j({get:()=>i.modelValue,set:l=>c("update:modelValue",l)}),m=j(()=>{let l=k(C.value);return l=l.replace(/\{\{(\w+)\}\}/g,(_,y)=>{const v=/^\w+$/.test(y),f=i.variableColors[y];return v&&f?`<span class="variable-highlight" style="background-color: ${f.bg}; box-shadow: 0 0 0 1px ${f.bg};">${k(_)}</span>`:v?`<span class="variable-highlight">${k(_)}</span>`:`<span class="variable-error">${k(_)}</span>`}),l=l.replace(/\n/g,"<br>"),l=l.replace(/  /g," &nbsp;"),l.endsWith("<br>")||(l+="<br>"),l});function k(l){const _=document.createElement("div");return _.textContent=l,_.innerHTML}function t(){!d.value||!S.value||(S.value.scrollTop=d.value.scrollTop,S.value.scrollLeft=d.value.scrollLeft)}return G(C,async()=>{await ne(),t()}),a({focus:()=>d.value?.focus()}),(l,_)=>{const y=xe("dompurify-html");return s(),u("div",gt,[e("div",{class:oe(["editor-container",{focused:o.value}])},[q(e("div",{ref_key:"highlightRef",ref:S,class:"editor-highlight","aria-hidden":"true"},null,512),[[y,m.value,"template"]]),q(e("textarea",{ref_key:"textareaRef",ref:d,"onUpdate:modelValue":_[0]||(_[0]=v=>C.value=v),class:"editor-textarea",placeholder:l.placeholder,rows:l.rows,"data-testid":l.$attrs["data-testid"]||"textarea-template-editor","aria-label":l.$attrs["aria-label"]||"Template editor textarea",onFocus:_[1]||(_[1]=v=>o.value=!0),onBlur:_[2]||(_[2]=v=>o.value=!1),onScroll:t},null,40,_t),[[Ie,C.value]])],2)])}}}),bt=L(ft,[["__scopeId","data-v-1880e5bc"]]),ht={class:"prompt-section"},yt={class:"section-header"},$t={class:"character-count"},kt=N({__name:"PromptEditorSectionV3",props:{promptText:{}},emits:["update:prompt-text"],setup(R){return(a,n)=>(s(),u("div",ht,[e("div",yt,[n[1]||(n[1]=e("h3",null,"Prompt",-1)),e("span",$t,p(a.promptText.length)+" characters",1)]),$(bt,{"model-value":a.promptText,"onUpdate:modelValue":n[0]||(n[0]=i=>a.$emit("update:prompt-text",i)),rows:6,placeholder:"Enter your prompt here... No variables or placeholders in the playground, just one prompt at a time.","data-testid":"playground-prompt-editor"},null,8,["model-value"])]))}}),Ct=L(kt,[["__scopeId","data-v-dffa2db6"]]),St={key:0,class:"logprobs-container"},Pt={class:"logprobs-header"},xt=["value"],It={class:"logprobs-content"},wt=["onMouseenter"],Tt={class:"tooltip-header"},Vt={class:"tooltip-content"},Mt={class:"tooltip-row"},Rt={class:"tooltip-value"},Et={class:"tooltip-row"},Ot={class:"tooltip-value"},Lt={key:0,class:"tooltip-alternatives"},Nt={class:"alt-token"},Dt={class:"alt-prob"},jt={class:"logprobs-legend"},zt={class:"legend-bar"},Bt=N({__name:"LogprobsDisplay",props:{logprobs:{}},setup(R){const a=w("viridis"),n=w(!1),i=w(null),c=w({}),d=w(null);function S(_){const y=Math.exp(_);return Math.sqrt(y)}function o(_){const y=W[a.value];if(!y)return a.value,{};const v=S(_.logprob),f=K(v,y.colors),T=Re(f);return{backgroundColor:`${f} !important`,color:`${T} !important`}}function C(_){const y=W[a.value];return y?K(_,y.colors):"transparent"}function m(_){return _===`
`?"\\n":_==="	"?"\\t":_===" "?"·":_.trim()===""?`[${_.length} spaces]`:_}function k(_,y){i.value=_,n.value=!0,l(y)}function t(){n.value=!1,i.value=null}function l(_){if(!n.value)return;const y=10,v=_.clientX+y,f=d.value,T=f?f.offsetHeight:100,z=_.clientY-T+y;c.value={position:"fixed",left:`${v}px`,top:`${z}px`,zIndex:"1000"}}return(_,y)=>_.logprobs.hasLogprobs?(s(),u("div",St,[e("div",Pt,[y[2]||(y[2]=e("h4",null,"Token Probabilities",-1)),q(e("select",{"onUpdate:modelValue":y[0]||(y[0]=v=>a.value=v),class:"color-scale-selector"},[(s(!0),u(D,null,A(J(W),(v,f)=>(s(),u("option",{key:f,value:f},p(v.name),9,xt))),128))],512),[[we,a.value]])]),e("div",It,[(s(!0),u(D,null,A(_.logprobs.content,(v,f)=>(s(),u("span",{key:f,style:H(o(v)),class:"logprob-token",onMouseenter:T=>k(v,T),onMouseleave:t,onMousemove:y[1]||(y[1]=T=>l(T))},p(m(v.token)),45,wt))),128))]),n.value?(s(),u("div",{key:0,ref_key:"tooltipRef",ref:d,class:"logprob-tooltip",style:H(c.value)},[e("div",Tt,[e("strong",null,'"'+p(i.value?.token)+'"',1)]),e("div",Vt,[e("div",Mt,[y[3]||(y[3]=e("span",{class:"tooltip-label"},"Logprob:",-1)),e("span",Rt,p(i.value?.logprob?.toFixed(4)),1)]),e("div",Et,[y[4]||(y[4]=e("span",{class:"tooltip-label"},"Probability:",-1)),e("span",Ot,p((Math.exp(i.value?.logprob||0)*100).toFixed(2))+"%",1)]),i.value?.top_logprobs&&i.value.top_logprobs.length>0?(s(),u("div",Lt,[y[5]||(y[5]=e("div",{class:"tooltip-section-header"},"Top alternatives:",-1)),(s(!0),u(D,null,A(i.value.top_logprobs,v=>(s(),u("div",{key:v.token,class:"tooltip-alt"},[e("span",Nt,'"'+p(m(v.token))+'"',1),e("span",Dt,p((Math.exp(v.logprob)*100).toFixed(2))+"%",1)]))),128))])):x("",!0)])],4)):x("",!0),e("div",jt,[e("div",zt,[(s(),u(D,null,A(10,(v,f)=>e("div",{key:f,style:H({backgroundColor:C(f/9)}),class:"legend-segment"},null,4)),64))]),y[6]||(y[6]=e("div",{class:"legend-labels"},[e("span",null,"Low probability"),e("span",null,"High probability")],-1))])])):x("",!0)}}),At=L(Bt,[["__scopeId","data-v-36cdf50b"]]),Ut={class:"response-display"},Ft={key:0,class:"loading-state"},Jt={key:1,class:"error-state"},qt={class:"error-details"},Ht={key:2,class:"response-content"},Wt={class:"response-text"},Gt={class:"text-content"},Yt={class:"expand-icon"},Qt={class:"metadata-content"},Xt={class:"metadata-grid"},Zt={class:"metadata-item"},Kt={class:"value"},es={key:0,class:"metadata-item"},ts={class:"value"},ss={key:1,class:"metadata-item"},os={class:"value"},ns={class:"cost-amount"},ls={class:"cost-amount"},as={class:"cost-amount"},rs={class:"metadata-item"},is={class:"value env-costs"},ds={class:"env-item"},us={class:"env-item"},ps={class:"env-item"},cs={class:"raw-response"},ms={class:"debug-sections"},vs={class:"debug-section"},gs={class:"debug-response"},_s={class:"debug-section"},fs={class:"debug-response"},bs={class:"debug-section"},hs={class:"debug-response"},ys={key:3,class:"empty-state"},$s=N({__name:"ResponseDisplayV3",props:{response:{},isLoading:{type:Boolean},error:{}},setup(R){const a=F(),n=j(()=>a.settings.core.preferences.value),i=w(!1);function c(t){return t<1e-4?t.toFixed(6):t<.01?t.toFixed(4):t.toFixed(3)}function d(t){if(!t)return"No raw response data";try{return JSON.stringify(t,null,2)}catch{return String(t)}}function S(t){if(!t)return"No error details available";try{if(t.debugInfo){const l=t.debugInfo;return`API Request Details:
URL: ${l.url}
Status: ${l.status}

Request Body:
${JSON.stringify(l.requestBody,null,2)}

Response Body:
${JSON.stringify(l.responseBody,null,2)}

Error Details:
${JSON.stringify(l.errorDetails,null,2)}

Full Error Object:
${JSON.stringify(t,null,2)}`}return t.stack?`Stack Trace:
${t.stack}

Full Error Object:
${JSON.stringify(t,null,2)}`:t.details?`Error Details:
${JSON.stringify(t.details,null,2)}

Full Error Object:
${JSON.stringify(t,null,2)}`:JSON.stringify(t,null,2)}catch{return String(t)}}function o(t){return n.value?.enableEnvironmentalCosts,"??"}function C(t){if(!t)return"No request data available";try{return JSON.stringify({url:t.url,method:t.method,headers:t.headers,body:t.body},null,2)}catch{return String(t)}}function m(t){if(!t)return"No response data available";try{return JSON.stringify({status:t.status,statusText:t.statusText,headers:t.headers,body:t.body},null,2)}catch{return String(t)}}function k(t){if(!t)return"No parsing data available";try{return JSON.stringify({providerId:t.providerId,modelId:t.modelId,parameters:t.parameters,parsedResponse:t.parsedResponse,contentExtracted:t.contentExtracted,contentLength:t.contentLength},null,2)}catch{return String(t)}}return(t,l)=>{const _=ge,y=ee,v=se,f=te;return s(),u("div",Ut,[t.isLoading?(s(),u("div",Ft,[$(_,{size:"large"},{tip:P(()=>l[1]||(l[1]=[M("Generating response...")])),_:1})])):t.error?(s(),u("div",Jt,[$(y,{type:"error",message:t.error.message||"API Error",description:t.error.details,"show-icon":""},null,8,["message","description"]),t.error?(s(),I(f,{key:0,ghost:"",style:{"margin-top":"16px"}},{default:P(()=>[$(v,{key:"details",header:"Full API Request/Response"},{default:P(()=>[e("pre",qt,p(S(t.error.response||t.error)),1)]),_:1})]),_:1})):x("",!0)])):t.response?(s(),u("div",Ht,[e("div",Wt,[e("pre",Gt,p(t.response.content),1)]),t.response.logprobs?(s(),I(At,{key:0,logprobs:t.response.logprobs},null,8,["logprobs"])):x("",!0),e("div",{class:oe(["response-metadata",{expanded:i.value}])},[e("h3",{class:"metadata-header",onClick:l[0]||(l[0]=T=>i.value=!i.value)},[e("span",Yt,[i.value?(s(),I(J(fe),{key:1})):(s(),I(J(_e),{key:0}))]),l[2]||(l[2]=M(" Response Details "))]),q(e("div",Qt,[e("div",Xt,[e("div",Zt,[l[3]||(l[3]=e("span",{class:"label"},"Latency:",-1)),e("span",Kt,p(t.response.latency)+"ms",1)]),t.response.tokens?(s(),u("div",es,[l[4]||(l[4]=e("span",{class:"label"},"Token Usage:",-1)),e("span",ts,p(t.response.tokens.prompt_tokens||"?")+" input + "+p(t.response.tokens.completion_tokens||"?")+" output = "+p(t.response.tokens.total_tokens||"?")+" total tokens ",1)])):x("",!0),t.response.cost?(s(),u("div",ss,[l[8]||(l[8]=e("span",{class:"label"},"Cost Estimate:",-1)),e("span",os,[e("span",ns,"$"+p(c(t.response.cost.input)),1),l[5]||(l[5]=M(" input + ")),e("span",ls,"$"+p(c(t.response.cost.output)),1),l[6]||(l[6]=M(" output = ")),e("span",as,"$"+p(c(t.response.cost.total)),1),l[7]||(l[7]=M(" total "))])])):x("",!0),e("div",rs,[l[9]||(l[9]=e("span",{class:"label"},"Environmental:",-1)),e("span",is,[e("span",ds,"CO₂ 🏭: "+p(o())+"  ",1),e("span",us,"Water 💧: "+p(o())+"  ",1),e("span",ps,"Energy ⚡: "+p(o()),1)])])]),$(f,{ghost:"",style:{"margin-top":"16px"}},{default:P(()=>[$(v,{key:"raw",header:"Raw API Response"},{default:P(()=>[e("pre",cs,p(d(t.response.raw)),1)]),_:1})]),_:1}),t.response.debug?(s(),I(f,{key:0,ghost:"",style:{"margin-top":"8px"}},{default:P(()=>[$(v,{key:"debug",header:"🔍 Complete API Request/Response Debug"},{default:P(()=>[e("div",ms,[e("div",vs,[l[10]||(l[10]=e("h4",null,"📤 API Request",-1)),e("pre",gs,p(C(t.response.debug.request)),1)]),e("div",_s,[l[11]||(l[11]=e("h4",null,"📥 API Response",-1)),e("pre",fs,p(m(t.response.debug.response)),1)]),e("div",bs,[l[12]||(l[12]=e("h4",null,"⚙️ Response Parser Details",-1)),e("pre",hs,p(k(t.response.debug.parsing)),1)])])]),_:1})]),_:1})):x("",!0)],512),[[Te,i.value]])],2)])):(s(),u("div",ys,l[13]||(l[13]=[e("div",{class:"empty-content"},[e("div",{class:"empty-icon"},"💬"),e("p",null,"Response will appear here after running a prompt")],-1)])))])}}}),ks=L($s,[["__scopeId","data-v-70d773b1"]]),Cs={key:0,class:"response-section"},Ss={class:"section-header"},Ps={key:0,class:"response-meta"},xs={class:"response-container"},Is=N({__name:"ResponseSectionV3",props:{hasExecuted:{type:Boolean},response:{},error:{},isLoading:{type:Boolean}},setup(R){return(a,n)=>a.hasExecuted?(s(),u("div",Cs,[e("div",Ss,[n[0]||(n[0]=e("h3",null,"Response",-1)),a.response&&!a.error?(s(),u("div",Ps,[e("span",null,p(a.response.latency)+"ms",1),e("span",null,p(a.response.tokens?.total_tokens||"?")+" tokens",1)])):x("",!0)]),e("div",xs,[$(ks,{response:a.response,"is-loading":a.isLoading,error:a.error},null,8,["response","is-loading","error"])])])):x("",!0)}}),ws=L(Is,[["__scopeId","data-v-cf6c2814"]]),Ts={class:"center-panel"},Vs=N({__name:"PlaygroundCenterPanelV3",props:{promptText:{},hasExecuted:{type:Boolean},response:{},error:{},isExecuting:{type:Boolean}},emits:["update:prompt-text"],setup(R){return(a,n)=>(s(),u("div",Ts,[$(Ct,{"prompt-text":a.promptText,"onUpdate:promptText":n[0]||(n[0]=i=>a.$emit("update:prompt-text",i))},null,8,["prompt-text"]),$(ws,{"has-executed":a.hasExecuted,response:a.response,error:a.error,"is-loading":a.isExecuting},null,8,["has-executed","response","error","is-loading"])]))}}),Ms=L(Vs,[["__scopeId","data-v-e48f18da"]]),Rs={class:"parameter-panel"},Es={key:0,class:"params-section"},Os={key:0,class:"reasoning-warning"},Ls={key:0,class:"json-error"},Ns={key:7,class:"param-description"},Ds={key:0,class:"json-error"},js={key:6,class:"param-description"},zs={class:"panel-actions"},Bs=N({__name:"ModelParameterPanel",props:{model:{},modelValue:{}},emits:["update:modelValue","change"],setup(R,{emit:a}){const n=R,i=a,{getBasicParameters:c,getAdvancedParameters:d,getUIDefaults:S}=Ee(),o=Ve({}),C=j(()=>n.model?c(n.model.provider,n.model.modelId):{}),m=j(()=>n.model?d(n.model.provider,n.model.modelId):{}),k=j(()=>n.model?(n.model.provider==="openai-chat"||n.model.provider==="openai-responses")&&(n.model.modelId.match(/^o[0-9]/)||n.model.modelId.match(/^gpt-5/)):!1);function t(v,f){o[v]=f,i("update:modelValue",{...o}),i("change",{...o})}function l(v,f){try{if(!f.trim()){t(v,null),delete o[v+"_json_error"];return}const T=JSON.parse(f);t(v,T),delete o[v+"_json_error"]}catch{o[v+"_json_error"]="Invalid JSON format"}}function _(v){return v.replace(/\./g," › ").replace(/_/g," ").replace(/\b\w/g,f=>f.toUpperCase())}function y(){if(!n.model)return;Object.keys(o).forEach(E=>delete o[E]);const v=S(n.model.provider,n.model.modelId);Object.assign(o,v);const f=c(n.model.provider,n.model.modelId),T=d(n.model.provider,n.model.modelId),z={...f,...T};for(const[E,O]of Object.entries(z))O.fixed&&O.default!==void 0&&(o[E]=O.default,O.default);for(const[E,O]of Object.entries(z))O.type==="object"&&o[E]&&(o[E+"_json"]=JSON.stringify(o[E],null,2));i("update:modelValue",{...o}),i("change",{...o})}return G(()=>n.model,v=>{v&&y()},{immediate:!0}),G(()=>n.modelValue,v=>{Object.assign(o,v)},{immediate:!0,deep:!0}),(v,f)=>{const T=ee,z=be,E=he,O=$e,g=ye,V=ke,B=Ce,Q=Se,le=se,ae=te,re=Y;return s(),u("div",Rs,[Object.keys(C.value).length>0?(s(),u("div",Es,[f[1]||(f[1]=e("h4",null,"Basic Parameters",-1)),k.value?(s(),u("div",Os,[$(T,{message:"Reasoning models (O* and GPT-5*) do not support temperature",type:"info",size:"small","show-icon":"",closable:!1})])):x("",!0),(s(!0),u(D,null,A(C.value,(r,b)=>(s(),I(Q,{key:b,label:_(b)},{default:P(()=>[r.type==="number"?(s(),I(z,{key:0,value:o[b],onChange:h=>t(b,h),min:r.min,max:r.max,step:r.step||.1,placeholder:String(r.default),disabled:r.fixed,size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","step","placeholder","disabled"])):r.type==="integer"?(s(),I(z,{key:1,value:o[b],onChange:h=>t(b,h),min:r.min,max:r.max,placeholder:String(r.default),disabled:r.fixed,size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","placeholder","disabled"])):r.type==="boolean"?(s(),I(E,{key:2,checked:o[b],onChange:h=>t(b,h),"checked-children":"true","un-checked-children":"false",disabled:r.fixed},null,8,["checked","onChange","disabled"])):r.type==="string"&&r.enum?(s(),I(g,{key:3,value:o[b],onChange:h=>t(b,h),placeholder:r.default?String(r.default):"<not set>",disabled:r.fixed,size:"large",style:{width:"100%"},allowClear:""},{default:P(()=>[$(O,{value:void 0},{default:P(()=>f[0]||(f[0]=[e("span",{style:{color:"#999"}},"<not set>",-1)])),_:1,__:[0]}),(s(!0),u(D,null,A(r.enum,h=>(s(),I(O,{key:h,value:h},{default:P(()=>[M(p(h),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onChange","placeholder","disabled"])):r.type==="array"?(s(),I(g,{key:4,value:o[b],"onUpdate:value":h=>o[b]=h,mode:"tags",placeholder:r.default?String(r.default):"Enter values",disabled:r.fixed,size:"large",style:{width:"100%"},onChange:h=>t(b,h)},null,8,["value","onUpdate:value","placeholder","disabled","onChange"])):r.type==="object"?(s(),u(D,{key:5},[$(V,{value:o[b+"_json"],"onUpdate:value":h=>o[b+"_json"]=h,placeholder:JSON.stringify(r.default||{},null,2),disabled:r.fixed,rows:3,status:o[b+"_json_error"]?"error":"",onInput:h=>l(b,h.target.value)},null,8,["value","onUpdate:value","placeholder","disabled","status","onInput"]),o[b+"_json_error"]?(s(),u("div",Ls,p(o[b+"_json_error"]),1)):x("",!0)],64)):r.type==="string"?(s(),I(B,{key:6,value:o[b],onChange:h=>t(b,h.target.value),placeholder:String(r.default),disabled:r.fixed,size:"large"},null,8,["value","onChange","placeholder","disabled"])):x("",!0),r.description?(s(),u("div",Ns,p(r.description),1)):x("",!0)]),_:2},1032,["label"]))),128))])):x("",!0),Object.keys(m.value).length>0?(s(),I(ae,{key:1,ghost:""},{default:P(()=>[$(le,{key:"advanced",header:"Advanced Parameters"},{default:P(()=>[(s(!0),u(D,null,A(m.value,(r,b)=>(s(),I(Q,{key:b,label:_(b)},{default:P(()=>[r.type==="number"||r.type==="integer"?(s(),I(z,{key:0,value:o[b],onChange:h=>t(b,h),min:r.min,max:r.max,step:r.type==="number"?r.step||.1:1,placeholder:String(r.default),size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","step","placeholder"])):r.type==="boolean"?(s(),I(E,{key:1,checked:o[b],onChange:h=>t(b,h),"checked-children":"true","un-checked-children":"false",disabled:r.fixed},null,8,["checked","onChange","disabled"])):r.type==="string"&&r.enum?(s(),I(g,{key:2,value:o[b],onChange:h=>t(b,h),placeholder:r.default?String(r.default):"<not set>",disabled:r.fixed,size:"large",style:{width:"100%"},allowClear:""},{default:P(()=>[$(O,{value:void 0},{default:P(()=>f[2]||(f[2]=[e("span",{style:{color:"#999"}},"<not set>",-1)])),_:1,__:[2]}),(s(!0),u(D,null,A(r.enum,h=>(s(),I(O,{key:h,value:h},{default:P(()=>[M(p(h),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onChange","placeholder","disabled"])):r.type==="array"?(s(),I(g,{key:3,value:o[b],"onUpdate:value":h=>o[b]=h,mode:"tags",placeholder:r.default?String(r.default):"Enter values",disabled:r.fixed,size:"large",style:{width:"100%"},onChange:h=>t(b,h)},null,8,["value","onUpdate:value","placeholder","disabled","onChange"])):r.type==="object"?(s(),u(D,{key:4},[$(V,{value:o[b+"_json"],"onUpdate:value":h=>o[b+"_json"]=h,placeholder:JSON.stringify(r.default||{},null,2),disabled:r.fixed,rows:3,status:o[b+"_json_error"]?"error":"",onInput:h=>l(b,h.target.value)},null,8,["value","onUpdate:value","placeholder","disabled","status","onInput"]),o[b+"_json_error"]?(s(),u("div",Ds,p(o[b+"_json_error"]),1)):x("",!0)],64)):r.type==="string"?(s(),I(B,{key:5,value:o[b],onChange:h=>t(b,h.target.value),placeholder:String(r.default),disabled:r.fixed,size:"large"},null,8,["value","onChange","placeholder","disabled"])):x("",!0),r.description?(s(),u("div",js,p(r.description),1)):x("",!0)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):x("",!0),e("div",zs,[$(re,{onClick:y,size:"small"},{default:P(()=>f[3]||(f[3]=[M(" Reset to Defaults ")])),_:1,__:[3]})])])}}}),As=L(Bs,[["__scopeId","data-v-bbc76c6d"]]),Us={class:"right-panel"},Fs={class:"panel-header"},Js={key:0},qs={key:1},Hs={key:0,class:"panel-content"},Ws={key:1,class:"no-model-message"},Gs=N({__name:"PlaygroundRightPanelV3",props:{model:{},parameters:{}},emits:["update:parameters","parameters-change"],setup(R,{emit:a}){const n=a;function i(c){n("update:parameters",c),n("parameters-change",c)}return(c,d)=>(s(),u("div",Us,[e("div",Fs,[c.model?(s(),u("h3",Js,p(c.model.displayName),1)):(s(),u("h3",qs,"Select a Model"))]),c.model?(s(),u("div",Hs,[$(As,{model:c.model,modelValue:c.parameters,"onUpdate:modelValue":i,onChange:i},null,8,["model","modelValue"])])):(s(),u("div",Ws,d[0]||(d[0]=[e("p",null,"Choose a model from the left panel to configure parameters.",-1)])))]))}}),Ys=L(Gs,[["__scopeId","data-v-a054623d"]]),Qs={class:"design-list"},Xs=["onClick"],Zs={class:"design-name"},Ks={class:"design-description"},eo={class:"design-preview"},to={class:"design-type"},so=N({__name:"DesignSelectorModalV3",props:{open:{type:Boolean}},emits:["close","select"],setup(R,{emit:a}){const n=a,i=F(),c=j(()=>{const S=i.templates.templates.value||[],o=i.spreadsheet.prompts.prompts.value||[];return[...S.map(C=>({id:C.id,name:C.name,description:C.description,text:C.template,type:"template"})),...o.map(C=>({id:C.id,name:C.name,description:C.description,text:C.promptPattern,type:"spreadsheet"}))]});function d(S){n("select",S),n("close")}return(S,o)=>{const C=Pe;return s(),I(C,{open:S.open,title:"Load from Design",width:"800px",footer:null,onCancel:o[0]||(o[0]=m=>S.$emit("close"))},{default:P(()=>[e("div",Qs,[(s(!0),u(D,null,A(c.value,m=>(s(),u("div",{key:m.id,class:"design-item",onClick:k=>d(m)},[e("div",Zs,p(m.name),1),e("div",Ks,p(m.description||"No description"),1),e("div",eo,p(m.text.substring(0,100))+"...",1),e("div",to,p(m.type),1)],8,Xs))),128))])]),_:1},8,["open"])}}}),oo=L(so,[["__scopeId","data-v-5324ccd4"]]),no={class:"playground-view","data-testid":"page-playground"},lo={class:"playground-content"},ao=N({__name:"PlaygroundViewV3",setup(R){const{enabledModels:a}=ue(),n=F(),i=w(null),c=w(""),d=w({}),S=w(!1),o=w(!1),C=w(!1),m=w(!1),k=w(null),t=w(null),l=j(()=>i.value&&c.value.trim().length>0&&!m.value),_=j(()=>c.value?ie().estimateTokens(c.value):0),y=j(()=>i.value?X().getOutputTokenLimit(i.value.provider,i.value.modelId,d.value):0);function v(g){d.value={...g},d.value}function f(g){c.value=g.text}function T(g){c.value=g}function z(){c.value=""}function E(g){i.value=g,o.value=!1;const V=X();d.value=V.applyDefaults(g.provider,g.modelId,{}),Z.supportsLogprobs(g.provider,g.modelId)&&(`${g.provider}${g.modelId}`,ne(()=>{d.value.logprobs=!0,d.value.top_logprobs=5,d.value}))}async function O(){if(!(!l.value||!i.value)){C.value=!0,m.value=!0,k.value=null,t.value=null;try{const g=await n.executeSingleCall(c.value,0,{provider:i.value.provider,modelId:i.value.modelId,...d.value});g.ok?(k.value={content:g.value.content||"",latency:de(g.value.latency),tokens:g.value.usage,cost:g.value.cost,logprobs:g.value.logprobs,features:g.value.features,raw:g.value.raw,debug:g.value.debug,model:i.value},g.value.logprobs):t.value={message:g.error?.message||"Failed to execute prompt",details:g.error?.details||g.error?.stack||g.error,response:g.error,debugInfo:g.error?.debugInfo}}catch(g){t.value={message:g.message||"An unexpected error occurred",details:g.stack||g.toString(),response:g}}finally{m.value=!1}}}return Me(async()=>{setTimeout(()=>{!i.value&&a.value&&a.value.length>0&&(i.value=a.value[0],Z.supportsLogprobs(i.value.provider,i.value.modelId)&&(`${i.value.provider}${i.value.modelId}`,setTimeout(()=>{d.value.logprobs=!0,d.value.top_logprobs=5,d.value},200)))},100)}),(g,V)=>(s(),u("div",no,[$(ze,{"selected-model":i.value,"estimated-tokens":_.value,"output-token-limit":y.value,disabled:!l.value,loading:m.value,onExecute:O},null,8,["selected-model","estimated-tokens","output-token-limit","disabled","loading"]),e("div",lo,[$(vt,{"selected-model":i.value,"prompt-text":c.value,onOpenModelSelector:V[0]||(V[0]=B=>o.value=!0),onLoadFromDesign:V[1]||(V[1]=B=>S.value=!0),onClearPrompt:z,onLoadTemplate:T},null,8,["selected-model","prompt-text"]),$(Ms,{"prompt-text":c.value,"has-executed":C.value,response:k.value,error:t.value,"is-executing":m.value,"onUpdate:promptText":V[2]||(V[2]=B=>c.value=B)},null,8,["prompt-text","has-executed","response","error","is-executing"]),$(Ys,{model:i.value,parameters:d.value,"onUpdate:parameters":V[3]||(V[3]=B=>d.value=B),onParametersChange:v},null,8,["model","parameters"])]),$(oo,{open:S.value,onClose:V[4]||(V[4]=B=>S.value=!1),onSelect:f},null,8,["open"]),$(ce,{visible:o.value,mode:"playground",title:"Select Model","onUpdate:visible":V[5]||(V[5]=B=>o.value=B),onSelectModel:E},null,8,["visible"])]))}}),bo=L(ao,[["__scopeId","data-v-df7dc143"]]);export{bo as default};
