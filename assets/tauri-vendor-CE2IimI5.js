function c(e,n,t,r){if(typeof n=="function"?e!==n||!0:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(e):r?r.value:n.get(e)}function p(e,n,t,r,o){if(typeof n=="function"?e!==n||!0:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(e,t),t}var b,f,_,h,U;const W="__TAURI_TO_IPC_KEY__";function v(e,n=!1){return window.__TAURI_INTERNALS__.transformCallback(e,n)}class F{constructor(n){b.set(this,void 0),f.set(this,0),_.set(this,[]),h.set(this,void 0),p(this,b,n||(()=>{})),this.id=v(t=>{const r=t.index;if("end"in t){r==c(this,f,"f")?this.cleanupCallback():p(this,h,r);return}const o=t.message;if(r==c(this,f,"f")){for(c(this,b,"f").call(this,o),p(this,f,c(this,f,"f")+1);c(this,f,"f")in c(this,_,"f");){const a=c(this,_,"f")[c(this,f,"f")];c(this,b,"f").call(this,a),delete c(this,_,"f")[c(this,f,"f")],p(this,f,c(this,f,"f")+1)}c(this,f,"f")===c(this,h,"f")&&this.cleanupCallback()}else c(this,_,"f")[r]=o})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(n){p(this,b,n)}get onmessage(){return c(this,b,"f")}[(b=new WeakMap,f=new WeakMap,_=new WeakMap,h=new WeakMap,W)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[W]()}}async function i(e,n={},t){return window.__TAURI_INTERNALS__.invoke(e,n,t)}class j{get rid(){return c(this,U,"f")}constructor(n){U.set(this,void 0),p(this,U,n)}async close(){return i("plugin:resources|close",{rid:this.rid})}}U=new WeakMap;const L="Request cancelled";async function K(e,n){const t=n==null?void 0:n.signal;if(t!=null&&t.aborted)throw new Error(L);const r=n==null?void 0:n.maxRedirections,o=n==null?void 0:n.connectTimeout,a=n==null?void 0:n.proxy,l=n==null?void 0:n.danger;n&&(delete n.maxRedirections,delete n.connectTimeout,delete n.proxy,delete n.danger);const s=n!=null&&n.headers?n.headers instanceof Headers?n.headers:new Headers(n.headers):new Headers,d=new Request(e,n),m=await d.arrayBuffer(),y=m.byteLength!==0?Array.from(new Uint8Array(m)):null;for(const[w,g]of d.headers)s.get(w)||s.set(w,g);const V=(s instanceof Headers?Array.from(s.entries()):Array.isArray(s)?s:Object.entries(s)).map(([w,g])=>[w,typeof g=="string"?g:g.toString()]);if(t!=null&&t.aborted)throw new Error(L);const x=await i("plugin:http|fetch",{clientConfig:{method:d.method,url:d.url,headers:V,data:y,maxRedirections:r,connectTimeout:o,proxy:a,danger:l}}),I=()=>i("plugin:http|fetch_cancel",{rid:x});if(t!=null&&t.aborted)throw I(),new Error(L);t==null||t.addEventListener("abort",()=>void I());const{status:O,statusText:q,url:D,headers:P,rid:J}=await i("plugin:http|fetch_send",{rid:x}),Z=[101,103,204,205,304].includes(O)?null:new ReadableStream({start:w=>{const g=new F;g.onmessage=S=>{if(t!=null&&t.aborted){w.error(L);return}const R=new Uint8Array(S),Q=R[R.byteLength-1],Y=R.slice(0,R.byteLength-1);if(Q==1){w.close();return}w.enqueue(Y)},i("plugin:http|fetch_read_body",{rid:J,streamChannel:g}).catch(S=>{w.error(S)})}}),E=new Response(Z,{status:O,statusText:q});return Object.defineProperty(E,"url",{value:D}),Object.defineProperty(E,"headers",{value:new Headers(P)}),E}const Ne=Object.freeze(Object.defineProperty({__proto__:null,fetch:K},Symbol.toStringTag,{value:"Module"}));async function X(e={}){return typeof e=="object"&&Object.freeze(e),await i("plugin:dialog|open",{options:e})}async function B(e={}){return typeof e=="object"&&Object.freeze(e),await i("plugin:dialog|save",{options:e})}async function ee(e,n){var r,o;const t=typeof n=="string"?{title:n}:n;await i("plugin:dialog|message",{message:e.toString(),title:(r=t==null?void 0:t.title)==null?void 0:r.toString(),kind:t==null?void 0:t.kind,okButtonLabel:(o=t==null?void 0:t.okLabel)==null?void 0:o.toString()})}async function ne(e,n){var r,o,a;const t=typeof n=="string"?{title:n}:n;return await i("plugin:dialog|ask",{message:e.toString(),title:(r=t==null?void 0:t.title)==null?void 0:r.toString(),kind:t==null?void 0:t.kind,yesButtonLabel:(o=t==null?void 0:t.okLabel)==null?void 0:o.toString(),noButtonLabel:(a=t==null?void 0:t.cancelLabel)==null?void 0:a.toString()})}async function te(e,n){var r,o,a;const t=typeof n=="string"?{title:n}:n;return await i("plugin:dialog|confirm",{message:e.toString(),title:(r=t==null?void 0:t.title)==null?void 0:r.toString(),kind:t==null?void 0:t.kind,okButtonLabel:(o=t==null?void 0:t.okLabel)==null?void 0:o.toString(),cancelButtonLabel:(a=t==null?void 0:t.cancelLabel)==null?void 0:a.toString()})}const Ce=Object.freeze(Object.defineProperty({__proto__:null,ask:ne,confirm:te,message:ee,open:X,save:B},Symbol.toStringTag,{value:"Module"}));var A;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(A||(A={}));var T;(function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"})(T||(T={}));function k(e){return{isFile:e.isFile,isDirectory:e.isDirectory,isSymlink:e.isSymlink,size:e.size,mtime:e.mtime!==null?new Date(e.mtime):null,atime:e.atime!==null?new Date(e.atime):null,birthtime:e.birthtime!==null?new Date(e.birthtime):null,readonly:e.readonly,fileAttributes:e.fileAttributes,dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,blksize:e.blksize,blocks:e.blocks}}function re(e){const n=new Uint8ClampedArray(e),t=n.byteLength;let r=0;for(let o=0;o<t;o++){const a=n[o];r*=256,r+=a}return r}class N extends j{async read(n){if(n.byteLength===0)return 0;const t=await i("plugin:fs|read",{rid:this.rid,len:n.byteLength}),r=re(t.slice(-8)),o=t instanceof ArrayBuffer?new Uint8Array(t):t;return n.set(o.slice(0,o.length-8)),r===0?null:r}async seek(n,t){return await i("plugin:fs|seek",{rid:this.rid,offset:n,whence:t})}async stat(){const n=await i("plugin:fs|fstat",{rid:this.rid});return k(n)}async truncate(n){await i("plugin:fs|ftruncate",{rid:this.rid,len:n})}async write(n){return await i("plugin:fs|write",{rid:this.rid,data:n})}}async function oe(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await i("plugin:fs|create",{path:e instanceof URL?e.toString():e,options:n});return new N(t)}async function z(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await i("plugin:fs|open",{path:e instanceof URL?e.toString():e,options:n});return new N(t)}async function ie(e,n,t){if(e instanceof URL&&e.protocol!=="file:"||n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");await i("plugin:fs|copy_file",{fromPath:e instanceof URL?e.toString():e,toPath:n instanceof URL?n.toString():n,options:t})}async function ae(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await i("plugin:fs|mkdir",{path:e instanceof URL?e.toString():e,options:n})}async function se(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await i("plugin:fs|read_dir",{path:e instanceof URL?e.toString():e,options:n})}async function ce(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await i("plugin:fs|read_file",{path:e instanceof URL?e.toString():e,options:n});return t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}async function le(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await i("plugin:fs|read_text_file",{path:e instanceof URL?e.toString():e,options:n}),r=t instanceof ArrayBuffer?t:Uint8Array.from(t);return new TextDecoder().decode(r)}async function fe(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=e instanceof URL?e.toString():e;return await Promise.resolve({path:t,rid:null,async next(){this.rid===null&&(this.rid=await i("plugin:fs|read_text_file_lines",{path:t,options:n}));const r=await i("plugin:fs|read_text_file_lines_next",{rid:this.rid}),o=r instanceof ArrayBuffer?new Uint8Array(r):Uint8Array.from(r),a=o[o.byteLength-1]===1;return a?(this.rid=null,{value:null,done:a}):{value:new TextDecoder().decode(o.slice(0,o.byteLength)),done:a}},[Symbol.asyncIterator](){return this}})}async function ue(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await i("plugin:fs|remove",{path:e instanceof URL?e.toString():e,options:n})}async function de(e,n,t){if(e instanceof URL&&e.protocol!=="file:"||n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");await i("plugin:fs|rename",{oldPath:e instanceof URL?e.toString():e,newPath:n instanceof URL?n.toString():n,options:t})}async function we(e,n){const t=await i("plugin:fs|stat",{path:e instanceof URL?e.toString():e,options:n});return k(t)}async function ge(e,n){const t=await i("plugin:fs|lstat",{path:e instanceof URL?e.toString():e,options:n});return k(t)}async function be(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await i("plugin:fs|truncate",{path:e instanceof URL?e.toString():e,len:n,options:t})}async function me(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");if(n instanceof ReadableStream){const r=await z(e,{create:!0,...t}),o=n.getReader();try{for(;;){const{done:a,value:l}=await o.read();if(a)break;await r.write(l)}}finally{o.releaseLock(),await r.close()}}else await i("plugin:fs|write_file",n,{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(t)}})}async function _e(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const r=new TextEncoder;await i("plugin:fs|write_text_file",r.encode(n),{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(t)}})}async function pe(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await i("plugin:fs|exists",{path:e instanceof URL?e.toString():e,options:n})}class ye extends j{}async function H(e,n,t){const r=Array.isArray(e)?e:[e];for(const s of r)if(s instanceof URL&&s.protocol!=="file:")throw new TypeError("Must be a file URL.");const o=new F;o.onmessage=n;const a=await i("plugin:fs|watch",{paths:r.map(s=>s instanceof URL?s.toString():s),options:t,onEvent:o}),l=new ye(a);return()=>{l.close()}}async function Re(e,n,t){return await H(e,n,{delayMs:2e3,...t})}async function he(e,n,t){return await H(e,n,{...t,delayMs:void 0})}async function Le(e){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await i("plugin:fs|size",{path:e instanceof URL?e.toString():e})}const xe=Object.freeze(Object.defineProperty({__proto__:null,get BaseDirectory(){return A},FileHandle:N,get SeekMode(){return T},copyFile:ie,create:oe,exists:pe,lstat:ge,mkdir:ae,open:z,readDir:se,readFile:ce,readTextFile:le,readTextFileLines:fe,remove:ue,rename:de,size:Le,stat:we,truncate:be,watch:Re,watchImmediate:he,writeFile:me,writeTextFile:_e},Symbol.toStringTag,{value:"Module"}));var M;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(M||(M={}));async function Ue(e,n){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,n),await i("plugin:event|unlisten",{event:e,eventId:n})}async function Ee(e,n,t){var r;const o=(r=void 0)!==null&&r!==void 0?r:{kind:"Any"};return i("plugin:event|listen",{event:e,target:o,handler:v(n)}).then(a=>async()=>Ue(e,a))}var u;(function(e){e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warn=4]="Warn",e[e.Error=5]="Error"})(u||(u={}));function Se(e){var n,t;if(e)if(e.startsWith("Error")){const o=(n=e.split(`
`)[3])==null?void 0:n.trim();if(!o)return;const a=/at\s+(?<functionName>.*?)\s+\((?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)\)/,l=o.match(a);if(l){const{functionName:s,fileName:d,lineNumber:m,columnNumber:y}=l.groups;return`${s}@${d}:${m}:${y}`}else{const s=/at\s+(?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)/,d=o.match(s);if(d){const{fileName:m,lineNumber:y,columnNumber:C}=d.groups;return`<anonymous>@${m}:${y}:${C}`}}}else return(t=e.split(`
`).map(a=>a.split("@")).filter(([a,l])=>a.length>0&&l!=="[native code]")[2])==null?void 0:t.filter(a=>a.length>0).join("@")}async function $(e,n,t){const r=Se(new Error().stack),{file:o,line:a,keyValues:l}=t??{};await i("plugin:log|log",{level:e,message:n,location:r,file:o,line:a,keyValues:l})}async function Ae(e,n){await $(u.Error,e,n)}async function Te(e,n){await $(u.Info,e,n)}async function G(e){return await Ee("log://log",n=>{const{level:t}=n.payload;let{message:r}=n.payload;r=r.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),e({message:r,level:t})})}async function ke(){return await G(({level:e,message:n})=>{switch(e){case u.Trace:console.log(n);break;case u.Debug:console.debug(n);break;case u.Info:console.info(n);break;case u.Warn:console.warn(n);break;case u.Error:console.error(n);break;default:throw new Error(`unknown log level ${e}`)}})}const Ie=Object.freeze(Object.defineProperty({__proto__:null,get LogLevel(){return u},attachConsole:ke,attachLogger:G,error:Ae,info:Te},Symbol.toStringTag,{value:"Module"}));export{Ce as a,xe as b,Ie as c,Ne as i};
