import{a as p}from"./useV4LiveQuery-CFmqtcF9.js";import{l as n,d as l,a as b}from"./index-BfkoFMqp.js";import{c as d}from"./vue-vendor-DPw1dQYc.js";class R{liveModels(){return n(async()=>{const o=await l.models.toArray(),e=await l.settings.get("main");o.filter(r=>r.provider==="openrouter").length;let a=o;e&&(e.hideOpenRouterAuto||e.hideOpenRouterFree)&&(o.filter(r=>r.provider==="openrouter").length,a=o.filter(r=>{if(r.provider==="openrouter"){if(e.hideOpenRouterAuto&&r.modelId==="openrouter/auto")return!1;if(e.hideOpenRouterFree&&r.capabilities?.inputCostPerToken===0)return r.modelId,!1}return!0}),a.filter(r=>r.provider==="openrouter").length),a.sort((r,i)=>(r.displayName||r.modelId).localeCompare(i.displayName||i.modelId));const t=a.map(r=>Object.freeze(r));return Object.freeze(t)})}liveModelsByProvider(){return n(async()=>{const o=await l.models.toArray(),e=await l.settings.get("main");let a=o;e&&(e.hideOpenRouterAuto||e.hideOpenRouterFree)&&(a=o.filter(i=>!(i.provider==="openrouter"&&(e.hideOpenRouterAuto&&i.modelId==="openrouter/auto"||e.hideOpenRouterFree&&i.capabilities?.inputCostPerToken===0))));const t={};for(const i of a)t[i.provider]||(t[i.provider]=[]),t[i.provider].push(Object.freeze(i));const r={};for(const[i,s]of Object.entries(t))s.sort((u,f)=>(u.displayName||u.modelId).localeCompare(f.displayName||f.modelId)),r[i]=Object.freeze(s);return Object.freeze(r)})}liveEnabledModels(){return n(async()=>{const o=await l.models.filter(r=>r.enabled===!0).toArray(),e=await l.settings.get("main");let a=o;e&&(e.hideOpenRouterAuto||e.hideOpenRouterFree)&&(a=o.filter(r=>!(r.provider==="openrouter"&&(e.hideOpenRouterAuto&&r.modelId==="openrouter/auto"||e.hideOpenRouterFree&&r.capabilities?.inputCostPerToken===0))));const t=a.map(r=>Object.freeze(r));return Object.freeze(t)})}liveModelsBySpecificProvider(o){return n(async()=>{const a=(await l.models.where("provider").equals(o).toArray()).map(t=>Object.freeze(t));return Object.freeze(a)})}liveModel(o){return n(async()=>{const e=await l.models.get(o);return e?Object.freeze(e):null})}liveModelStats(){return n(async()=>{const o=await l.models.toArray(),e=o.length,a=o.filter(t=>t.enabled===!0).length;return Object.freeze({total:e,enabled:a,disabled:e-a})})}liveProviderStats(){return n(async()=>{const o=await l.models.toArray(),e={};for(const t of o)e[t.provider]||(e[t.provider]={total:0,enabled:0,available:0}),e[t.provider].total++,t.enabled&&e[t.provider].enabled++,t.available!==!1&&e[t.provider].available++;const a={};for(const[t,r]of Object.entries(e))a[t]=Object.freeze(r);return Object.freeze(a)})}}const c=new R;function V(){const{data:v,loading:o,error:e}=p(()=>c.liveModels(),{initialValue:[]}),{data:a,loading:t,error:r}=p(()=>c.liveModelsByProvider(),{initialValue:{}}),{data:i,loading:s,error:u}=p(()=>c.liveEnabledModels(),{initialValue:[]}),{data:f,loading:g,error:O}=p(()=>c.liveModelStats(),{initialValue:{total:0,enabled:0,disabled:0}}),y=d(()=>o.value||t.value||s.value||g.value),M=d(()=>e.value||r.value||u.value||O.value);function h(m){return v.value.find(j=>j.id===m)}function z(m){return a.value[m]||[]}return{models:d(()=>v.value),modelsByProvider:d(()=>a.value),enabledModels:d(()=>i.value),stats:d(()=>f.value),loading:y,error:M,findModel:h,getProviderModels:z}}export{V as u};
