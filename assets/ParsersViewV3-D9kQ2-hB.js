import{d as I,f as B,c as U,R as C,Y as i,S as d,k as e,_ as w,Z as t,$ as k,V as b,G as y,F as J,W as Q,l as V,u as T,r as R,w as F,o as X,X as Y}from"./vue-vendor-DPw1dQYc.js";import{u as Z}from"./parser.store-FJExtJy7.js";import{_ as G,o as H,T as A,L as ee,Q as te,q as se,n as K,I as ae,r as ne,C as oe,w as le,y as re,x as W,s as ie,R as ue,V as pe,P as ce,M as de,t as _e,W as ye,X as M,Y as fe,N as z}from"./ui-vendor-IRGmExUJ.js";import{j as L}from"./index-BNyV4f0C.js";import{P as me}from"./ParserTestSectionCompact-Cj6mLri9.js";import"./utils-vendor-B76-F3_P.js";const ve={class:"parsers-table"},ge={class:"table-search"},he={key:0,class:"parser-name-cell"},ke={class:"parser-name"},Ce={key:0,class:"parser-description"},be={key:5,class:"date-text"},we={key:6,class:"action-buttons"},Te={key:0,class:"empty-state"},Pe=I({__name:"ParsersTableV3",props:{parsers:{},loading:{type:Boolean,default:!1},category:{default:"all"}},emits:["edit","delete","duplicate","test"],setup(O,{emit:D}){const c=O,f=D,u=B(""),m=U(()=>{if(!u.value)return c.parsers;const o=u.value.toLowerCase();return c.parsers.filter(l=>l.name.toLowerCase().includes(o)||l.description?.toLowerCase().includes(o)||l.tags?.some(v=>v.toLowerCase().includes(o)))}),P=[{title:"Name",key:"name",width:"35%"},{title:"Type",key:"type",width:"10%"},{title:"Output",key:"outputType",width:"10%"},{title:"Tags",key:"tags",width:"10%"},{title:"Tests",key:"testCases",width:"5%",align:"center"},{title:"Updated",key:"updated",width:"10%"},{title:"Actions",key:"actions",width:"20%",align:"center"}];function $(o){switch(o){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}function n(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function p(){}return(o,l)=>{const v=G,g=A,j=ee,r=te,s=K,x=se,S=H,N=re;return i(),C("div",ve,[d("div",ge,[e(v,{value:u.value,"onUpdate:value":l[0]||(l[0]=_=>u.value=_),placeholder:"Search parsers by name, tags, or description...","allow-clear":"",size:"large",onSearch:p},null,8,["value"])]),e(S,{columns:P,"data-source":m.value,loading:o.loading,pagination:!1,scroll:{y:"calc(100vh - 350px)"},"row-key":"id",class:"parsers-data-table"},{bodyCell:t(({column:_,record:a})=>[_.key==="name"?(i(),C("div",he,[d("div",ke,[d("strong",null,b(a.name),1),a.isBuiltIn?(i(),k(g,{key:0,color:"blue",size:"small"},{default:t(()=>l[2]||(l[2]=[y("Built-in")])),_:1,__:[2]})):w("",!0)]),a.description?(i(),C("div",Ce,b(a.description),1)):w("",!0)])):_.key==="type"?(i(),k(g,{key:1,color:$(a.type)},{default:t(()=>[y(b(a.type.toUpperCase()),1)]),_:2},1032,["color"])):_.key==="outputType"?(i(),k(g,{key:2},{default:t(()=>[y(b(a.outputType),1)]),_:2},1024)):_.key==="tags"?(i(),k(j,{key:3,wrap:"",size:"small"},{default:t(()=>[(i(!0),C(J,null,Q(a.tags?.slice(0,1),h=>(i(),k(g,{key:h,size:"small"},{default:t(()=>[y(b(h.length>8?h.substring(0,8)+"...":h),1)]),_:2},1024))),128)),a.tags?.length>1?(i(),k(g,{key:0,size:"small"},{default:t(()=>[y(" +"+b(a.tags.length-1),1)]),_:2},1024)):w("",!0)]),_:2},1024)):_.key==="testCases"?(i(),k(r,{key:4,count:a.testCases?.length||0,showZero:!0,color:a.testCases?.length>0?"green":"gray"},null,8,["count","color"])):_.key==="updated"?(i(),C("span",be,b(n(a.updated)),1)):_.key==="actions"?(i(),C("div",we,[e(x,{title:"Test"},{default:t(()=>[e(s,{size:"small",type:"text",onClick:h=>f("test",a),icon:V(T(ae))},null,8,["onClick","icon"])]),_:2},1024),e(x,{title:a.isBuiltIn?"Copy and Edit":"Edit"},{default:t(()=>[e(s,{size:"small",type:"text",onClick:h=>f("edit",a),icon:V(T(ne))},null,8,["onClick","icon"])]),_:2},1032,["title"]),e(x,{title:"Duplicate"},{default:t(()=>[e(s,{size:"small",type:"text",onClick:h=>f("duplicate",a),icon:V(T(oe))},null,8,["onClick","icon"])]),_:2},1024),a.isBuiltIn?w("",!0):(i(),k(x,{key:0,title:"Delete"},{default:t(()=>[e(s,{size:"small",type:"text",danger:"",onClick:h=>f("delete",a),icon:V(T(le))},null,8,["onClick","icon"])]),_:2},1024))])):w("",!0)]),_:1},8,["data-source","loading"]),!o.loading&&m.value.length===0?(i(),C("div",Te,[e(N,{description:"No parsers found"},{default:t(()=>[u.value?(i(),k(s,{key:0,onClick:l[1]||(l[1]=_=>u.value="")},{default:t(()=>l[3]||(l[3]=[y("Clear Search")])),_:1,__:[3]})):w("",!0)]),_:1})])):w("",!0)])}}}),E=L(Pe,[["__scopeId","data-v-13293cc7"]]),$e={key:0,class:"parser-tester-modal"},De={class:"parser-info-bar"},xe={class:"info-item"},Se={class:"info-item"},Be={key:0,class:"info-item description"},Oe={class:"info-value"},Ve=I({__name:"ParserTesterModal",props:{visible:{type:Boolean,default:!1},parser:{default:null}},emits:["close"],setup(O,{emit:D}){const c=O,f=D,u=B(c.visible),m=R({outputType:U(()=>c.parser?.outputType||"text"),testCases:R([])});F(()=>c.visible,n=>{u.value=n,n&&c.parser&&(m.testCases=(c.parser.testCases||[]).map((p,o)=>({...p,id:`test-${o}-${Date.now()}`,hasRun:p.output!==void 0})))}),F(u,n=>{n||f("close")});function P(n){m.testCases=n}function $(n){switch(n){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}return(n,p)=>{const o=A,l=W;return i(),k(l,{open:u.value,"onUpdate:open":p[0]||(p[0]=v=>u.value=v),title:`Test Parser: ${n.parser?.name||""}`,width:"90%",style:{maxWidth:"1200px"},footer:null,"destroy-on-close":!0},{default:t(()=>[n.parser?(i(),C("div",$e,[d("div",De,[d("div",xe,[p[1]||(p[1]=d("span",{class:"info-label"},"Type:",-1)),e(o,{color:$(n.parser.type)},{default:t(()=>[y(b(n.parser.type.toUpperCase()),1)]),_:1},8,["color"])]),d("div",Se,[p[2]||(p[2]=d("span",{class:"info-label"},"Output:",-1)),e(o,null,{default:t(()=>[y(b(n.parser.outputType),1)]),_:1})]),n.parser.description?(i(),C("div",Be,[p[3]||(p[3]=d("span",{class:"info-label"},"Description:",-1)),d("span",Oe,b(n.parser.description),1)])):w("",!0)]),e(me,{parser:n.parser,form:m,"auto-save-tests":!1,"onUpdate:testCases":P},null,8,["parser","form"])])):w("",!0)]),_:1},8,["open","title"])}}}),ze=L(Ve,[["__scopeId","data-v-1a043fe5"]]),Ee={class:"parsers-view"},Ue={class:"view-header"},je={class:"header-actions"},Ne=I({__name:"ParsersViewV3",setup(O){const D=Y(),c=Z(),f=B("all"),u=B(!1),m=B(void 0),P=U(()=>c.loading),$=U(()=>{const r=c.parsers;switch(f.value){case"all":return r;case"regex":return r.filter(s=>s.type==="regex");case"javascript":return r.filter(s=>s.type==="javascript");case"python":return r.filter(s=>s.type==="python");default:return[]}});function n(r){f.value=r}function p({key:r}){D.push(`/parsers/new?type=${r}`)}function o(r){D.push(`/parsers/${r.id}/edit`)}async function l(r){W.confirm({title:"Delete Parser",content:`Are you sure you want to delete "${r.name}"? This action cannot be undone.`,okText:"Delete",okType:"danger",cancelText:"Cancel",onOk:async()=>{try{await c.deleteParser(r.id),z.success("Parser deleted successfully")}catch{z.error("Failed to delete parser")}}})}async function v(r){try{await c.duplicateParser(r.id),z.success("Parser duplicated successfully")}catch{z.error("Failed to duplicate parser")}}function g(r){m.value=r,u.value=!0}function j(){u.value=!1,m.value=void 0}return X(async()=>{await c.loadParsers()}),(r,s)=>{const x=K,S=_e,N=de,_=ie,a=fe,h=ue;return i(),C("div",Ee,[d("div",Ue,[s[5]||(s[5]=d("h1",null,"Parsers",-1)),d("div",je,[e(_,{placement:"bottomRight"},{overlay:t(()=>[e(N,{onClick:p},{default:t(()=>[e(S,{key:"regex"},{icon:t(()=>[e(T(ye))]),default:t(()=>[s[2]||(s[2]=y(" Regex Parser "))]),_:1,__:[2]}),e(S,{key:"javascript"},{icon:t(()=>[e(T(M))]),default:t(()=>[s[3]||(s[3]=y(" JavaScript Parser "))]),_:1,__:[3]}),e(S,{key:"python"},{icon:t(()=>[e(T(M))]),default:t(()=>[s[4]||(s[4]=y(" Python Parser "))]),_:1,__:[4]})]),_:1})]),default:t(()=>[e(x,{type:"primary","data-testid":"btn-create-new"},{icon:t(()=>[e(T(ce))]),default:t(()=>[s[1]||(s[1]=y(" Create New ")),e(T(pe))]),_:1,__:[1]})]),_:1})])]),e(h,{activeKey:f.value,"onUpdate:activeKey":s[0]||(s[0]=q=>f.value=q),class:"parsers-tabs",onChange:n},{default:t(()=>[e(a,{key:"all",tab:"All Parsers"},{default:t(()=>[e(E,{parsers:$.value,loading:P.value,category:"all",onEdit:o,onDelete:l,onDuplicate:v,onTest:g},null,8,["parsers","loading"])]),_:1}),e(a,{key:"regex",tab:"Regex"},{default:t(()=>[e(E,{parsers:$.value,loading:P.value,category:"regex",onEdit:o,onDelete:l,onDuplicate:v,onTest:g},null,8,["parsers","loading"])]),_:1}),e(a,{key:"javascript",tab:"JavaScript"},{default:t(()=>[e(E,{parsers:$.value,loading:P.value,category:"javascript",onEdit:o,onDelete:l,onDuplicate:v,onTest:g},null,8,["parsers","loading"])]),_:1}),e(a,{key:"python",tab:"Python"},{default:t(()=>[e(E,{parsers:$.value,loading:P.value,category:"python",onEdit:o,onDelete:l,onDuplicate:v,onTest:g},null,8,["parsers","loading"])]),_:1})]),_:1},8,["activeKey"]),e(ze,{visible:u.value,parser:m.value,onClose:j},null,8,["visible","parser"])])}}}),Ke=L(Ne,[["__scopeId","data-v-5bacec24"]]);export{Ke as default};
