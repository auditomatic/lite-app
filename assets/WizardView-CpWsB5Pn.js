import{d as H,c as x,$ as E,Z as u,Y as l,k as n,_ as O,S as e,u as k,V as v,R as m,W as j,F as Q,a9 as Ge,a0 as oe,G as y,f as z,o as ee,w as de,j as we,a4 as He,U as Ye,X as Ve}from"./vue-vendor-DPw1dQYc.js";import{useWizardFlow as ne}from"./wizard-flow-nmzQGVAP.js";import{j as Y,t as je,s as ae,a as N,M as Qe,d as G,r as ue,v as Xe,f as Ze,P as Je,w as et}from"./index-B4E_mw1M.js";import{ac as tt,l as X,C as st,aA as ot,a0 as nt,$ as at,ad as it,af as lt,ag as rt,ae as dt,aK as be,aL as ut,S as ct,ax as J,I as pt,aM as Se,w as ie,ay as vt,aN as Ce,av as mt,u as Z,_ as ft,aC as yt,aO as _e,n as gt,aF as ht,aP as $e,ai as _t,p as kt,a6 as wt,a7 as bt,aQ as St,s as Ct,ah as $t,R as Mt}from"./ui-vendor-CcBzucUW.js";import{u as ce}from"./useV4Models-BGiFLOq0.js";import{O as At}from"./OllamaModelManagerV3-Dny6XLni.js";import"./utils-vendor--V4UhsOV.js";import"./useV4LiveQuery-CFmqtcF9.js";import"./ollama-fetch-DSFg0oRl.js";const It={class:"header-content"},Pt={class:"wizard-progress"},xt={class:"progress-mobile"},Ot={class:"step-counter"},Rt={class:"progress-desktop"},Tt={class:"content-wrapper"},zt={class:"navigation-wrapper"},Wt={class:"btn-text"},Lt=H({__name:"WizardContainer",props:{currentStep:{},totalSteps:{},canGoNext:{type:Boolean},canGoBack:{type:Boolean},completedSteps:{}},emits:["next","back","close","complete"],setup(U){const A=U,c=x(()=>A.currentStep===1||A.currentStep===3||A.currentStep===4),r=["Welcome","Local-First","Security","Providers","Configure","Complete"];function C(){switch(A.currentStep){case 0:return"Get Started";case 2:return"Continue";case 3:return"Finish Setup";default:return"Continue"}}return(h,S)=>{const w=X,b=ot,M=at,F=nt,i=it,f=lt,o=rt,_=tt;return l(),E(_,{class:"wizard-layout"},{default:u(()=>[n(i,{class:"wizard-header"},{default:u(()=>[e("div",It,[n(w,{class:"wizard-close",type:"text",shape:"circle",size:"small",onClick:S[0]||(S[0]=d=>h.$emit("close"))},{icon:u(()=>[n(k(st))]),_:1}),e("div",Pt,[e("div",xt,[e("span",Ot,v(h.currentStep+1)+" of "+v(h.totalSteps),1),n(b,{percent:Math.round((h.currentStep+1)/h.totalSteps*100),"show-info":!1,size:"small","stroke-color":"var(--color-primary)"},null,8,["percent"])]),e("div",Rt,[n(F,{current:h.currentStep,size:"small",responsive:!1},{default:u(()=>[(l(),m(Q,null,j(r,(d,g)=>n(M,{key:g,title:d},null,8,["title"])),64))]),_:1},8,["current"])])])])]),_:1}),n(f,{class:"wizard-content"},{default:u(()=>[e("div",Tt,[Ge(h.$slots,"default",{},void 0,!0)])]),_:3}),c.value?O("",!0):(l(),E(o,{key:0,class:"wizard-footer"},{default:u(()=>[e("div",zt,[h.canGoBack?(l(),E(w,{key:0,class:"nav-back",onClick:S[1]||(S[1]=d=>h.$emit("back"))},{default:u(()=>[n(k(dt)),S[4]||(S[4]=e("span",{class:"btn-text"},"Back",-1))]),_:1,__:[4]})):O("",!0),S[6]||(S[6]=e("div",{class:"nav-spacer"},null,-1)),h.currentStep<h.totalSteps-1?(l(),E(w,{key:1,type:"primary",class:"nav-next",onClick:S[2]||(S[2]=d=>h.$emit("next")),disabled:!h.canGoNext},{default:u(()=>[e("span",Wt,v(C()),1),n(k(be))]),_:1},8,["disabled"])):(l(),E(w,{key:2,type:"primary",class:"nav-complete",onClick:S[3]||(S[3]=d=>h.$emit("complete"))},{default:u(()=>[S[5]||(S[5]=e("span",{class:"btn-text"},"Get Started",-1)),n(k(ut))]),_:1,__:[5]}))])]),_:1}))]),_:3})}}}),Dt=Y(Lt,[["__scopeId","data-v-b8cb3ec8"]]),Ft={class:"wizard-welcome"},Et={class:"feature-showcase"},Nt={class:"feature-grid"},Bt={class:"feature-icon"},Ut={class:"feature-content"},Kt=H({__name:"WizardWelcome",emits:["continue"],setup(U){const A=[{icon:"üåê",title:"Browser Compatibility",description:"Chrome and Firefox are preferred. Safari support is limited.",isWarning:!0},{icon:"‚ö†Ô∏è",title:"Experimental Beta",description:"Features may change. Export your data regularly.",isWarning:!0},{icon:"üí∞",title:"Cost Tracking",description:"Real-time cost estimation with environmental impact tracking.",isWarning:!0},{icon:"üíæ",title:"Local Storage",description:"All data stored locally in your browser - complete privacy"},{icon:"üö´",title:"No Cloud Storage",description:"We cannot access your data - export regularly to avoid data loss"},{icon:"ü§ñ",title:"Multi-Provider",description:"Test across OpenAI, Anthropic, OpenRouter, Ollama, and more"},{icon:"üìù",title:"Design Templates",description:"Create prompt templates with variables for systematic testing"},{icon:"üîÑ",title:"Variable Lists",description:"Define test values that get substituted into prompts automatically"},{icon:"üß™",title:"Run Trials",description:"Test multiple models and configurations in parallel"},{icon:"üìä",title:"Analyze Results",description:"View live progress, compare responses, and export data"},{icon:"‚ö°",title:"High Performance",description:"Optimized for large datasets with virtual scrolling"},{icon:"üîí",title:"Secure API Keys",description:"Optional encryption for API keys with master password protection"}];return(c,r)=>(l(),m("div",Ft,[r[0]||(r[0]=e("div",{class:"welcome-header"},[e("h1",null,"Welcome to Auditomatic Lite"),e("p",{class:"tagline"},"Browser-Based Testing for Multiple LLM Providers")],-1)),e("div",Et,[e("div",Nt,[(l(),m(Q,null,j(A,C=>e("div",{key:C.title,class:oe(["feature-card",{"warning-card":C.isWarning}])},[e("div",Bt,v(C.icon),1),e("div",Ut,[e("h3",null,v(C.title),1),e("p",null,v(C.description),1)])],2)),64))])]),r[1]||(r[1]=e("div",{class:"welcome-actions"},[e("p",{class:"help-text"}," Ready to get started? We'll guide you through setting up security and AI providers. "),e("div",{class:"continue-hint"},[y(" üëá Click "),e("strong",null,'"Get Started"'),y(" below to continue ")])],-1))]))}}),qt=Y(Kt,[["__scopeId","data-v-f8570420"]]),Gt={class:"wizard-local-first"},Ht={class:"content-slides"},Yt={class:"slide"},Vt={class:"slide-content"},jt={class:"slide-icon"},Qt={class:"slide-description"},Xt=["innerHTML"],Zt={class:"slide-navigation"},Jt={class:"slide-indicators"},es=["onClick"],ts=H({__name:"WizardLocalFirst",emits:["continue"],setup(U,{emit:A}){const c=A,r=z(0),C=je(),h=[{icon:"üñ•Ô∏è",title:"Desktop Application",content:["You are using the **Tauri desktop application** version of Auditomatic Lite.","This provides enhanced security, better performance, and native file system access compared to the web version.","All data is stored locally on your computer in a secure application-specific directory."]},{icon:"üîí",title:"Enhanced Security",content:["The desktop app provides **better security** than the web version.","Your API keys and data are protected from browser-based attacks and malicious extensions.","Direct API calls bypass browser CORS restrictions for improved compatibility."]},{icon:"üíæ",title:"Local Data Storage",content:["All data is stored locally on **this computer** in the application data directory.","Your data persists between app restarts and system reboots.","We recommend regular exports for backup and portability."]},{icon:"üö´",title:"No Account System",content:["The desktop app operates **completely offline** with no account system.","We have **no** access to your data and **cannot** recover it if you delete it.","This is by design, for your privacy and security."]},{icon:"‚ö°",title:"Optimal Performance",content:["The desktop app provides **better performance** than the web version.","Native HTTP client for faster API calls.","More efficient memory usage and no browser overhead.","Can run trials in the background without performance degradation."]},{icon:"üî¨",title:"Research Data Management",content:["While Auditomatic Lite stores your template designs, variable lists, experimental setups, and full records of all API calls made, we **discourage** you from using it as your **primary** way to manage and store your research operations and data.","Instead, treat Auditomatic Lite as an instrument within your broader research data management workflow.","When you complete a trial, export and back up both the data and the Python bundle, which contains everything needed to re-run and reproduce your trial."]},{icon:"‚úÖ",title:"You're All Set!",content:["You're using the **recommended desktop version** of Auditomatic Lite.","Enjoy the enhanced security, performance, and reliability of the native application.",'For updates and support, visit <a href="https://auditomatic.org" target="_blank">auditomatic.org</a>.']}],S=[{icon:"üåê",title:"This is NOT a Web-Based Platform",content:["Even though you are accessing it from lite.auditomatic.org (**and always verify this is the correct URL, do not click phishing links**), this is not a traditional web-based platform.","Auditomatic Lite runs entirely in your web browser after downloading."]},{icon:"üíª",title:"How It Works",content:["When you visit lite.auditomatic.org, it only connects to our server to download the app, then runs it in your browser.","When you make an API call to a provider like OpenAI, the app makes it directly from your browser to OpenAI's servers.","Responses are stored in your browser's storage - we never see your data."]},{icon:"üíæ",title:"Local Storage Only",content:["Everything is stored on this computer, in this browser, in this user's profile.","If you change computers, browsers, browser profiles, or use incognito/private mode, you will **not** have access to the data you create here.","We recommend exporting results as soon as they are completed and exporting all data and settings via the Settings ‚Üí Import/Export tab."]},{icon:"üö´",title:"No Account System",content:["You do **not** need (and **cannot** get) an account on lite.auditomatic.org.","We have **no** access to your data and **cannot** recover it if you delete it.","This is by design, for your privacy and security."]},{icon:"‚ö†Ô∏è",title:"Usage Limitations",content:["**Only** keep one Auditomatic Lite tab open at a time.","You can **only** run one trial at a time.","Minimizing your browser or switching tabs during a trial may slow down or pause execution.","Browser crashes or updates may cause data loss - export regularly."]},{icon:"üî¨",title:"Research Data Management",content:["While Auditomatic Lite stores your template designs, variable lists, experimental setups, and full records of all API calls made, we **discourage** you from using it as your **primary** way to manage and store your research operations and data.","Instead, treat Auditomatic Lite as an instrument within your broader research data management workflow.","When you complete a trial, export and back up both the data and the Python bundle, which contains everything needed to re-run and reproduce your trial."]},{icon:"üñ•Ô∏è",title:"Desktop App Recommendation",content:['We have a desktop app version that we recommend, which is also 100% locally hosted. Download at <a href="https://auditomatic.org/download" target="_blank">auditomatic.org/download</a>.',"The desktop version is more secure from browser-based attacks, is faster and more memory-efficient, and less likely to suffer data loss from browser crashes.","Consider upgrading to the desktop version for production research work."]}],w=x(()=>C?h:S);function b(){r.value<w.value.length-1&&r.value++}function M(i){r.value=i}function F(){c("continue")}return(i,f)=>{const o=X;return l(),m("div",Gt,[e("div",Ht,[e("div",Yt,[e("div",Vt,[e("div",jt,v(w.value[r.value].icon),1),e("h3",null,v(w.value[r.value].title),1),e("div",Qt,[(l(!0),m(Q,null,j(w.value[r.value].content,(_,d)=>(l(),m("p",{key:d,innerHTML:_.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>")},null,8,Xt))),128))])])])]),e("div",Zt,[e("div",Jt,[(l(!0),m(Q,null,j(w.value,(_,d)=>(l(),m("button",{key:d,class:oe(["slide-indicator",{active:r.value===d}]),onClick:g=>M(d)},v(d+1),11,es))),128)),n(o,{onClick:f[0]||(f[0]=_=>r.value<w.value.length-1?b():F()),type:"primary",size:"large",class:"next-button"},{default:u(()=>[y(v(r.value<w.value.length-1?"Next":"Continue to Security"),1)]),_:1})])])])}}}),ss=Y(ts,[["__scopeId","data-v-8083944f"]]),os={class:"wizard-security"},ns={key:0,class:"security-setup-required"},as={class:"security-explanation"},is={class:"explanation-section"},ls={class:"combined-warning"},rs={class:"platform-specific-risks"},ds={key:0},us={key:1},cs={class:"setup-action"},ps={key:1,class:"security-configured"},vs={class:"completion-header"},ms={class:"current-settings"},fs={class:"setting-item"},ys={class:"setting-value"},gs={key:0,class:"setting-item"},hs={class:"configured-actions"},_s=H({__name:"WizardSecurity",emits:["security-ready"],setup(U,{emit:A}){const c=A,r=ae(),C=z(!1),h=x(()=>r.secureSettings.hasSetupApiKeySecurity()),S=x(()=>r.hasMasterPassword.value),w=x(()=>typeof window>"u"?!1:window.__TAURI__!==void 0||window.__TAURI_INTERNALS__!==void 0);function b(){const f=r.secureSettings.getDefaultSecurityMode();return{encrypted:"üîí Encrypted",session:"‚ö†Ô∏è Session Only",plaintext:"üìù Plaintext"}[f]||f}function M(){C.value=!0,N.info("Triggering security setup from wizard")}function F(){C.value=!1}function i(f){C.value=!1,N.info("Security setup completed in wizard",{mode:f.mode}),localStorage.setItem("wizard-security-completed","true"),c("security-ready")}return ee(()=>{if(N.info("Wizard security step mounted",{hasSetupSecurity:h.value,defaultMode:r.secureSettings.getDefaultSecurityMode()}),h.value){const f=r.secureSettings.getDefaultSecurityMode();localStorage.setItem("wizard-security-completed","true"),N.info("Security already configured, showing status",{mode:f})}}),(f,o)=>{const _=X;return l(),m("div",os,[h.value?(l(),m("div",ps,[e("div",vs,[n(k(J),{class:"completion-icon"}),o[6]||(o[6]=e("h3",null,"Security Already Configured",-1))]),e("div",ms,[e("div",fs,[o[7]||(o[7]=e("span",{class:"setting-label"},"Default Security Mode:",-1)),e("span",ys,v(b()),1)]),S.value?(l(),m("div",gs,o[8]||(o[8]=[e("span",{class:"setting-label"},"Master Password:",-1),e("span",{class:"setting-value"},"‚úÖ Configured",-1)]))):O("",!0)]),e("div",hs,[n(_,{type:"default",onClick:M},{default:u(()=>[n(k(pt)),o[9]||(o[9]=y(" Change Security Settings "))]),_:1,__:[9]}),n(_,{type:"primary",onClick:o[0]||(o[0]=d=>f.$emit("security-ready"))},{default:u(()=>[o[10]||(o[10]=y(" Continue to API Keys ")),n(k(be))]),_:1,__:[10]})])])):(l(),m("div",ns,[o[5]||(o[5]=e("div",{class:"setup-info"},[e("div",{class:"info-card"},[e("div",{class:"card-icon"},"üîê"),e("div",{class:"card-content"},[e("h3",null,"API Key Security Setup Required"),e("p",null," Before adding API keys, you need to choose your security preferences. This is a one-time setup that affects all your API keys. ")])])],-1)),e("div",as,[e("div",is,[e("div",ls,[o[2]||(o[2]=e("h4",null,"üö® Why API Key Security Matters",-1)),o[3]||(o[3]=e("p",null,[e("strong",null,"Your API key lets anyone charge your OpenAI/Anthropic/OpenRouter account."),y(" Without proper protection, malicious actors could access and misuse your API keys. ")],-1)),e("div",rs,[e("h5",null,v(w.value?"üíª Desktop Security Risks:":"üåê Browser Security Risks:"),1),w.value?(l(),m("p",ds," If your key is stored unencrypted, anyone who hacks or has access to your computer could steal your API keys. Desktop apps provide better security than browsers, but unprotected keys are still vulnerable to malware and unauthorized access. ")):(l(),m("p",us,o[1]||(o[1]=[y(" Anyone with access to this computer could access your browser's storage. Many browser extensions can also access your browser's storage. If you click a phishing link, someone could steal your API key. "),e("br",null,null,-1),e("br",null,null,-1),y(" While this is unlikely, we provide three levels of security. We also recommend creating a new key with a small spending limit specifically for Auditomatic. For added browser security, "),e("a",{href:"https://support.healthsci.queensu.ca/support/solutions/articles/151000178968-separating-web-browser-profiles",target:"_blank",rel:"noopener noreferrer"},"create a separate profile",-1),y(" in your browser for Auditomatic. ")])))])])])]),e("div",cs,[n(_,{type:"primary",size:"large",onClick:M},{default:u(()=>[n(k(ct)),o[4]||(o[4]=y(" Configure Security Settings "))]),_:1,__:[4]})])])),n(Qe,{open:C.value,context:"wizard",onClose:F,onSuccess:i},null,8,["open"])])}}}),ks=Y(_s,[["__scopeId","data-v-abe43243"]]),ws={class:"wizard-provider-selection"},bs={key:0,class:"discovery-status"},Ss={key:1,class:"providers-list"},Cs={class:"provider-option"},$s={class:"provider-details"},Ms={class:"provider-status"},As={key:0,class:"ollama-help"},Is={class:"provider-option"},Ps={class:"provider-details"},xs={class:"provider-status"},Os={class:"model-count"},Rs={class:"provider-option"},Ts={class:"provider-details"},zs={class:"provider-status"},Ws={class:"model-count"},Ls={class:"provider-option"},Ds={class:"provider-details"},Fs={class:"provider-status"},Es={class:"model-count"},Ns={class:"step-actions"},Bs={class:"action-right"},Us=H({__name:"WizardProviderSelection",emits:["continue","skip"],setup(U,{emit:A}){const c=A,r=ne(),C=z(!1),h=z(0),S=z(0),w=z(0),b=z(0),M=z("not-running"),F=x(()=>{switch(M.value){case"ready":return`${h.value} models installed`;case"no-models":return"Running but no models installed";case"not-running":return"Not running or CORS not configured"}}),i=z({ollama:!1,anthropic:!1,openrouter:!1,openai:!1}),f=x(()=>i.value.ollama||i.value.anthropic||i.value.openrouter||i.value.openai);async function o(){const $=await G.models.where("provider").equals("ollama-chat").count(),s=await G.models.where("provider").equals("anthropic").count(),q=await G.models.where("provider").equals("openrouter").count(),T=await G.models.where("provider").equals("openai-chat").count(),R=await G.models.where("provider").equals("openai-responses").count();if(h.value=$,S.value=s,w.value=q,b.value=Math.max(T,R),$>0)M.value="ready",i.value.ollama=!0;else try{(await fetch("http://localhost:11434/api/tags")).ok?M.value="no-models":M.value="not-running"}catch{M.value="not-running"}}async function _(){C.value=!0;try{const s=await ue().discoverModels({forceRefresh:!0});Z.success(`Discovered ${s.totalModels} models`),await o()}catch($){N.error("Discovery failed:",$),Z.error("Failed to refresh model discovery")}finally{C.value=!1}}async function d(){if(!f.value){Z.warning("Please select at least one provider");return}r.setSelectedProviders(i.value),c("continue")}function g(){c("skip")}return ee(async()=>{await o()}),($,s)=>{const q=ie,T=X;return l(),m("div",ws,[s[21]||(s[21]=e("div",{class:"step-header"},[e("h2",null,"Choose Your AI Providers"),e("p",{class:"step-description"}," We've discovered available models. Select which providers you want to configure. ")],-1)),C.value?(l(),m("div",bs,[n(k(Se),{spin:""}),s[4]||(s[4]=y(" Discovering available models... "))])):(l(),m("div",Ss,[e("label",Cs,[n(q,{checked:i.value.ollama,"onUpdate:checked":s[0]||(s[0]=R=>i.value.ollama=R),disabled:M.value==="not-running"},{default:u(()=>[e("div",$s,[s[8]||(s[8]=e("span",{class:"provider-icon"},"ü¶ô",-1)),e("div",null,[s[6]||(s[6]=e("strong",null,"Ollama",-1)),s[7]||(s[7]=e("span",{class:"provider-desc"},"Run models locally on your computer",-1)),e("div",Ms,[M.value==="ready"?(l(),E(k(J),{key:0,class:"status-icon success"})):M.value==="not-running"?(l(),E(k(vt),{key:1,class:"status-icon error"})):M.value==="no-models"?(l(),E(k(Ce),{key:2,class:"status-icon warning"})):O("",!0),e("span",{class:oe(["status-text",M.value])},v(F.value),3)]),M.value==="not-running"?(l(),m("div",As,s[5]||(s[5]=[e("div",{class:"help-line"},[y("1. Download from "),e("a",{href:"https://ollama.ai",target:"_blank",rel:"noopener noreferrer"},"ollama.ai")],-1),e("div",{class:"help-line"},[y("2. Set "),e("a",{href:"https://objectgraph.com/blog/ollama-cors/",target:"_blank",rel:"noopener noreferrer"},"OLLAMA_ORIGINS=*"),y(" for CORS")],-1)]))):O("",!0)])])]),_:1},8,["checked","disabled"])]),e("label",Is,[n(q,{checked:i.value.openai,"onUpdate:checked":s[1]||(s[1]=R=>i.value.openai=R)},{default:u(()=>[e("div",Ps,[s[11]||(s[11]=e("span",{class:"provider-icon"},"ü§ñ",-1)),e("div",null,[s[9]||(s[9]=e("strong",null,"OpenAI",-1)),s[10]||(s[10]=e("span",{class:"provider-desc"},"GPT-4 and GPT-3.5 models - API key required",-1)),e("div",xs,[e("span",Os,v(b.value)+" models available",1)])])])]),_:1},8,["checked"])]),e("label",Rs,[n(q,{checked:i.value.openrouter,"onUpdate:checked":s[2]||(s[2]=R=>i.value.openrouter=R)},{default:u(()=>[e("div",Ts,[s[14]||(s[14]=e("span",{class:"provider-icon"},"üåê",-1)),e("div",null,[s[12]||(s[12]=e("strong",null,"OpenRouter",-1)),s[13]||(s[13]=e("span",{class:"provider-desc"},"100+ models from many providers - API key required",-1)),e("div",zs,[e("span",Ws,v(w.value)+" models available",1)])])])]),_:1},8,["checked"])]),e("label",Ls,[n(q,{checked:i.value.anthropic,"onUpdate:checked":s[3]||(s[3]=R=>i.value.anthropic=R)},{default:u(()=>[e("div",Ds,[s[17]||(s[17]=e("span",{class:"provider-icon"},"üß†",-1)),e("div",null,[s[15]||(s[15]=e("strong",null,"Anthropic",-1)),s[16]||(s[16]=e("span",{class:"provider-desc"},"Access Claude models - API key required",-1)),e("div",Fs,[e("span",Es,v(S.value)+" models available",1)])])])]),_:1},8,["checked"])])])),e("div",Ns,[n(T,{onClick:_,size:"large",loading:C.value},{default:u(()=>[n(k(mt)),s[18]||(s[18]=y(" Refresh Discovery "))]),_:1,__:[18]},8,["loading"]),e("div",Bs,[n(T,{onClick:g,size:"large"},{default:u(()=>s[19]||(s[19]=[y(" Skip Setup ")])),_:1,__:[19]}),n(T,{type:"primary",onClick:d,size:"large",disabled:!f.value||C.value},{default:u(()=>s[20]||(s[20]=[y(" Continue ")])),_:1,__:[20]},8,["disabled"])])])])}}}),Ks=Y(Us,[["__scopeId","data-v-f56e7f48"]]),qs={class:"wizard-model-grid"},Gs={class:"grid-header"},Hs={class:"grid-controls"},Ys={class:"models-list"},Vs={class:"model-info"},js={class:"model-name"},Qs={class:"model-meta"},Xs={key:0,class:"context"},Zs={key:1,class:"model-cost"},Js={class:"grid-footer"},eo=H({__name:"WizardModelGrid",props:{providerId:{},providerName:{},selectedModels:{}},emits:["update:selectedModels"],setup(U,{emit:A}){const c=U,r=A,{modelsByProvider:C}=ce(),h=x(()=>C.value[c.providerId]||[]),S=z(""),w=x(()=>{const d=S.value.toLowerCase();return d?h.value.filter(g=>g.modelId.toLowerCase().includes(d)||g.displayName.toLowerCase().includes(d)):h.value});function b(d){return c.selectedModels.includes(d)}function M(d){const g=[...c.selectedModels],$=g.indexOf(d);$>=0?g.splice($,1):g.push(d),r("update:selectedModels",g)}function F(){r("update:selectedModels",w.value.map(d=>d.id))}function i(){r("update:selectedModels",[])}function f(){if(["openai-chat","openai-responses","anthropic"].includes(c.providerId)){const $=h.value.filter(s=>s.enabled).map(s=>s.id);if($.length>0){r("update:selectedModels",$);return}}const g=h.value.filter($=>{const s=$.modelId.toLowerCase();return s.includes("nano")||s.includes("mini")||s.includes("haiku")||s.includes("3.5")||s.includes("mistral")||s.includes("llama3")}).slice(0,5).map($=>$.id);g.length===0?r("update:selectedModels",h.value.slice(0,5).map($=>$.id)):r("update:selectedModels",g)}function o(d){return d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(0)}K`:`${d}`}function _(d){const g=d.capabilities?.inputCostPerToken,$=d.capabilities?.outputCostPerToken;if(!g&&!$)return null;const s=((g||0)+($||0))/2*1e6;return s===0?null:s<.01?s.toFixed(4):s<1?s.toFixed(2):s.toFixed(0)}return ee(()=>{c.selectedModels.length===0&&f()}),(d,g)=>{const $=ft,s=X,q=yt,T=ie;return l(),m("div",qs,[e("div",Gs,[e("h3",null,"Select "+v(d.providerName)+" Models",1),e("div",Hs,[n($,{value:S.value,"onUpdate:value":g[0]||(g[0]=R=>S.value=R),placeholder:"Search models...",size:"small",style:{width:"200px"}},null,8,["value"]),n(q,{size:"small"},{default:u(()=>[n(s,{onClick:F},{default:u(()=>g[1]||(g[1]=[y("Select All")])),_:1,__:[1]}),n(s,{onClick:i},{default:u(()=>g[2]||(g[2]=[y("Select None")])),_:1,__:[2]}),n(s,{onClick:f},{default:u(()=>g[3]||(g[3]=[y("Defaults")])),_:1,__:[3]})]),_:1})])]),g[4]||(g[4]=e("div",{class:"description-row"},[e("p",{class:"header-description"}," Choose which models appear in the UI. You can always enable/disable more models in the Models tab. ")],-1)),e("div",Ys,[(l(!0),m(Q,null,j(w.value,R=>(l(),m("label",{key:R.id,class:"model-item"},[n(T,{checked:b(R.id),onChange:B=>M(R.id)},{default:u(()=>[e("div",Vs,[e("code",js,v(R.modelId),1),e("span",Qs,[R.capabilities?.contextWindow?(l(),m("span",Xs,v(o(R.capabilities.contextWindow)),1)):O("",!0),_(R)?(l(),m("span",Zs," $"+v(_(R))+"/1M ",1)):O("",!0)])])]),_:2},1032,["checked","onChange"])]))),128))]),e("div",Js,[e("span",null,v(d.selectedModels.length)+" models selected",1)])])}}}),to=Y(eo,[["__scopeId","data-v-cd6e7b82"]]),so={class:"openrouter-settings"},oo={class:"privacy-warning"},no={class:"settings-options"},ao={class:"setting-option"},io={class:"setting-option"},lo={class:"model-preview"},ro={class:"preview-list"},uo={key:0,class:"preview-item hidden"},co={key:1,class:"preview-item hidden"},po={key:2,class:"preview-item shown"},vo={class:"settings-actions"},mo=H({__name:"WizardOpenRouterSettings",emits:["save","cancel"],setup(U,{emit:A}){const c=A,r=z({hideOpenRouterFree:!0,hideOpenRouterAuto:!0}),C=x(()=>r.value.hideOpenRouterFree||r.value.hideOpenRouterAuto);async function h(){await G.settings.get("main")?await G.settings.update("main",{hideOpenRouterFree:r.value.hideOpenRouterFree,hideOpenRouterAuto:r.value.hideOpenRouterAuto}):await G.settings.add({id:"main",version:1,initialized:!0,hideOpenRouterFree:r.value.hideOpenRouterFree,hideOpenRouterAuto:r.value.hideOpenRouterAuto}),c("save",r.value)}function S(){c("cancel")}return(w,b)=>{const M=ie,F=X;return l(),m("div",so,[e("div",oo,[n(k(Ce),{class:"warning-icon"}),b[2]||(b[2]=e("div",{class:"warning-content"},[e("h4",null,"About Free Models"),e("p",null,[y(" OpenRouter offers some models for free. However, "),e("strong",null,"your prompts and responses may be sold, publicly released, and used to train models"),y(". Free models are rate-limited and should not be used for sensitive data. ")])],-1))]),e("div",no,[e("label",ao,[n(M,{checked:r.value.hideOpenRouterFree,"onUpdate:checked":b[0]||(b[0]=i=>r.value.hideOpenRouterFree=i)},{default:u(()=>b[3]||(b[3]=[e("div",{class:"option-content"},[e("strong",null,"Hide free models"),e("span",{class:"option-desc"},"Free models may use your data for training")],-1)])),_:1,__:[3]},8,["checked"])]),e("label",io,[n(M,{checked:r.value.hideOpenRouterAuto,"onUpdate:checked":b[1]||(b[1]=i=>r.value.hideOpenRouterAuto=i)},{default:u(()=>b[4]||(b[4]=[e("div",{class:"option-content"},[e("strong",null,"Hide Auto Router"),e("span",{class:"option-desc"},"Auto Router automatically selects models, making costs unpredictable")],-1)])),_:1,__:[4]},8,["checked"])])]),e("div",lo,[e("h4",null,"Models that will be "+v(C.value?"hidden":"shown")+":",1),e("div",ro,[r.value.hideOpenRouterFree?(l(),m("div",uo,[n(k(_e)),b[5]||(b[5]=y(" All free models (pricing = $0) "))])):O("",!0),r.value.hideOpenRouterAuto?(l(),m("div",co,[n(k(_e)),b[6]||(b[6]=y(" openrouter/auto (meta-model router) "))])):O("",!0),C.value?O("",!0):(l(),m("div",po,[n(k(J)),b[7]||(b[7]=y(" All OpenRouter models will be shown "))]))])]),e("div",vo,[n(F,{onClick:S,size:"large"},{default:u(()=>b[8]||(b[8]=[y(" Cancel ")])),_:1,__:[8]}),n(F,{type:"primary",onClick:h,size:"large"},{default:u(()=>b[9]||(b[9]=[y(" Save Settings ")])),_:1,__:[9]})])])}}}),fo=Y(mo,[["__scopeId","data-v-0c2211de"]]),yo={class:"wizard-provider-config"},go={class:"provider-header"},ho={class:"provider-icon"},_o={key:0,class:"api-key-stage"},ko={class:"help-link"},wo=["href"],bo={class:"stage-actions"},So={key:1,class:"ollama-check-stage"},Co={class:"ollama-info"},$o={class:"ollama-manager-wrapper"},Mo={class:"stage-actions"},Ao={key:2,class:"ollama-endpoints-stage"},Io={class:"endpoint-selection"},Po={class:"endpoint-option"},xo={class:"endpoint-option"},Oo={class:"endpoint-note"},Ro={class:"stage-actions"},To={key:3,class:"openai-endpoints-stage"},zo={class:"endpoint-selection"},Wo={class:"endpoint-option"},Lo={class:"endpoint-option"},Do={class:"endpoint-note"},Fo={class:"stage-actions"},Eo={key:4,class:"model-select-stage"},No={class:"model-select-option"},Bo={class:"model-name"},Uo={key:0,class:"model-cost"},Ko={key:0,class:"test-preview"},qo={class:"test-info"},Go={class:"info-item"},Ho={class:"info-item"},Yo={key:0},Vo={key:1},jo={class:"stage-actions"},Qo={key:5,class:"testing-stage"},Xo={class:"test-status"},Zo={key:6,class:"results-stage"},Jo={class:"test-details"},en={class:"detail-item"},tn={class:"response-text"},sn={class:"detail-item"},on={class:"detail-item"},nn={key:0,class:"detail-item"},an={key:7,class:"openrouter-settings-stage"},ln={key:8,class:"models-stage"},rn={class:"stage-actions"},dn="Hello! Respond with a one-word greeting.",ke=16,un=H({__name:"WizardProviderConfig",emits:["continue","complete"],setup(U,{emit:A}){const c=A,r=ne(),C=ae(),h=C.secureSettings,S=Xe(),{modelsByProvider:w}=ce(),b=Ze(),M=x(()=>{try{const a=b.estimateTokens(dn);return typeof a=="number"&&a>0?a:10}catch(a){return N.warn("Token calculation failed:",a),10}}),F=new Je(a=>S.startTrialWithStreaming(a)),i=z("api-key"),f=z(""),o=z(""),_=z([]),d=z(""),g=z(["ollama-chat"]),$=z(["openai-responses"]),s=z(null),q=x(()=>[...w.value[K.value]||[]].sort((p,W)=>{const I=p.capabilities?.inputCostPerToken,P=W.capabilities?.inputCostPerToken;return I!==void 0&&P!==void 0?I-P:I!==void 0&&P===void 0?-1:I===void 0&&P!==void 0?1:(p.displayName||p.modelId).localeCompare(W.displayName||W.modelId)}).map(p=>({id:p.id,modelId:p.modelId,name:p.displayName||p.modelId,inputCost:p.capabilities?.inputCostPerToken?p.capabilities.inputCostPerToken*1e6:void 0,outputCost:p.capabilities?.outputCostPerToken?p.capabilities.outputCostPerToken*1e6:void 0}))),T=z({success:!1}),R={"openai-chat":"gpt-4.1-nano-2025-04-14","openai-responses":"gpt-4.1-nano-2025-04-14",anthropic:"claude-3-haiku-20240307",openrouter:"mistralai/mistral-nemo","ollama-chat":"llama3.2"},B=x(()=>r.currentProviderId||""),K=x(()=>{const a=B.value;switch(a){case"ollama":return"ollama-chat";case"openai":return"openai-chat";case"anthropic":return"anthropic";case"openrouter":return"openrouter";default:return a}}),te=x(()=>d.value||R[K.value]||"unknown"),pe=x(()=>{if(!d.value)return null;try{const t=(w.value[K.value]||[]).find(se=>se.modelId===d.value);if(!t?.capabilities)return null;const p=t.capabilities.inputCostPerToken,W=t.capabilities.outputCostPerToken;if(typeof p!="number"||typeof W!="number")return"Free";const I=M.value*p,P=ke*W,L=I+P;return!Number.isFinite(L)||L<0?null:L===0?"Free":`$${ve(L)}`}catch(a){return N.warn("Cost calculation failed:",a),null}});function Me(a,t){const p=a.toLowerCase();return(t.label?.toLowerCase()||t.value?.toLowerCase()||"").includes(p)}function ve(a){if(a===0)return"0.000000";if(a<1e-6){const t=Math.floor(Math.log10(a)),p=Math.max(6,Math.abs(t)+1);return a.toFixed(p)}return a.toFixed(6)}const le=x(()=>{const a=B.value;return{ollama:{name:"Ollama",icon:"ü¶ô",group:"ollama"},anthropic:{name:"Anthropic",icon:"üß†",group:"anthropic"},openrouter:{name:"OpenRouter",icon:"üåê",group:"openrouter"},openai:{name:"OpenAI",icon:"ü§ñ",group:"openai"}}[a]||{name:"Unknown",icon:"‚ùì",group:"unknown"}}),V=x(()=>le.value.name),Ae=x(()=>le.value.icon),me=x(()=>le.value.group),Ie=x(()=>{const a=r.providerQueue;return r.currentProviderIndex<a.length-1});function Pe(){return{anthropic:"https://console.anthropic.com/account/keys",openrouter:"https://openrouter.ai/keys",openai:"https://platform.openai.com/api-keys",ollama:"https://ollama.com"}[B.value]||"#"}function xe(a){const t=a.message?.toLowerCase()||"",p=a.status||a.response?.status;return t==="timeout"?"Test timed out after 30 seconds. The API may be overloaded or slow.":t.includes("network")||t.includes("fetch")||t.includes("connection")?"Network connection failed. Check your internet connection and try again.":p===401||t.includes("unauthorized")||t.includes("api key")||t.includes("authentication")?"Invalid API key. Please check your API key and try again.":p===429||t.includes("rate limit")||t.includes("too many requests")?"Rate limit exceeded. Please wait a moment and try again.":p===402||t.includes("quota")||t.includes("billing")||t.includes("usage")?"Account quota exceeded. Please check your billing status.":p===404||t.includes("model")&&t.includes("not found")?"Selected model is not available. Please try a different model.":p>=500||t.includes("server error")||t.includes("internal error")?"Server error. The API service may be temporarily unavailable.":`Connection failed: ${a.message||"Unknown error"}`}async function fe(){const a=B.value;if(!f.value.trim()){o.value="API key is required";return}const t=C.secureSettings.hasSetupApiKeySecurity()?C.secureSettings.getDefaultSecurityMode():"plaintext";await h.setApiKey(me.value,f.value.trim(),t),a==="openrouter"?i.value="openrouter-settings":i.value="model-select"}async function Oe(){s.value&&s.value.abort(),s.value=new AbortController,i.value="testing",o.value="";try{const a=B.value;let t=K.value;a==="ollama"&&g.value.length>0?t=g.value[0]:a==="openai"&&$.value.length>0&&(t=$.value[0]);const p={provider:t,modelId:te.value,temperature:.7,stream:!1};t==="openai-chat"?p.max_completion_tokens=16:t==="openai-responses"?p.max_output_tokens=16:t==="anthropic"||t==="openrouter"?p.max_tokens=16:t==="ollama-chat"&&(p.num_predict=16);const W=new Promise((P,L)=>{setTimeout(()=>L(new Error("TIMEOUT")),3e4)}),I=await Promise.race([F.executePlaygroundCall("Hello! Respond with a one-word greeting.",p),W]);if(I.ok){const P=I.value;T.value={success:!0,response:P.content||"Test successful",latency:P.latency,cost:P.cost?.total||0}}else throw I.error;i.value="results"}catch(a){if(a.name==="AbortError"||a.message?.includes("abort"))return;T.value={success:!1,error:xe(a)},i.value="results"}}function Re(){const a=B.value;a==="ollama"?i.value="ollama-endpoints":a==="openai"?i.value="openai-endpoints":i.value="api-key"}function re(){r.setProviderConfig(B.value,{testStatus:"skipped",enabledModels:[]}),r.nextProvider()?ye():c("complete")}async function Te(){const t={"openai-chat":"openai-defaults","openai-responses":"openai-defaults",anthropic:"anthropic-defaults"}[K.value];if(t)try{await et().applyList(t),await new Promise(W=>setTimeout(W,100))}catch(p){N.error(`Failed to apply ${t} list:`,p)}await Le(),i.value="models"}function ze(){i.value="model-select"}function We(){i.value="api-key"}async function Le(){const a=w.value[K.value]||[];if(_.value=a.filter(t=>t.enabled).map(t=>t.id),_.value.length===0){const t=a.slice(0,5).map(p=>p.id);_.value=t}}async function De(){const a=B.value;let t=[];a==="ollama"?t=g.value:a==="openai"?t=$.value:t=[K.value];const p=new Set(_.value.map(P=>{const L=P.indexOf(":");return L>-1?P.substring(L+1):P}));for(const P of t)await G.models.where("provider").equals(P).modify(L=>{L.enabled=p.has(L.modelId),L.userModified=!0});const W=[];a==="ollama"?W.push("ollama-chat","ollama-generate"):a==="openai"&&W.push("openai-chat","openai-responses");const I=W.filter(P=>!t.includes(P));for(const P of I)await G.models.where("provider").equals(P).modify(L=>{L.enabled=!1,L.userModified=!0});r.setProviderConfig(B.value,{apiKey:f.value,testStatus:"success",testResponse:{content:T.value.response||"",latency:T.value.latency||0,model:te.value},enabledModels:_.value}),r.nextProvider()?ye():c("complete")}function ye(){s.value&&(s.value.abort(),s.value=null);const a=B.value;if(a==="ollama"){const t=w.value["ollama-chat"]||[];i.value=t.length>0?"ollama-endpoints":"ollama-check"}else a==="openai"?i.value="openai-endpoints":i.value="api-key";f.value="",_.value=[],d.value="",T.value={success:!1},o.value="",g.value=["ollama-chat"],$.value=["openai-responses"]}function Fe(){const a=w.value[K.value]||[];if(a.length===0)return;const t=R[K.value],p=a.find(W=>W.modelId===t);d.value=p?.modelId||a[0]?.modelId||""}function Ee(){if(g.value.length===0){Z.warning("Please select at least one Ollama endpoint");return}r.setSelectedEndpoints({...r.selectedEndpoints,ollama:g.value}),i.value="model-select"}async function Ne(){if($.value.length===0){Z.warning("Please select at least one OpenAI endpoint");return}r.setSelectedEndpoints({...r.selectedEndpoints,openai:$.value}),i.value="api-key"}async function ge(){await ue().discoverModels({forceRefresh:!0}),(w.value["ollama-chat"]||[]).length>0?i.value="ollama-endpoints":Z.info("Refreshing models... This may take a moment.")}async function Be(){await ge()}return de(()=>r.currentProviderId,async a=>{if(a){const t=a;if(t!=="ollama"&&t!=="openai"){const p=await h.getApiKey(t);p&&(f.value=p)}}}),de([()=>w.value[K.value],()=>K.value],([a,t],[,p])=>{a&&a.length>0&&(!d.value||t!==p)&&Fe()},{immediate:!0}),de(()=>w.value["ollama-chat"],a=>{B.value==="ollama"&&i.value==="ollama-check"&&a&&a.length>0&&(i.value="ollama-endpoints")},{immediate:!1}),ee(async()=>{const a=B.value;if(a==="ollama"){(w.value["ollama-chat"]||[]).length>0?i.value="ollama-endpoints":i.value="ollama-check";return}if(a==="openai"){i.value="openai-endpoints";const p=await h.getApiKey(a);p&&(f.value=p);return}i.value="api-key";const t=await h.getApiKey(me.value);t&&(f.value=t)}),we(()=>{s.value&&s.value.abort()}),(a,t)=>{const p=ht,W=gt,I=X,P=ie,L=_t,se=kt,Ue=bt,Ke=wt,he=St,qe=Ct;return l(),m("div",yo,[e("div",go,[e("span",ho,v(Ae.value),1),e("h2",null,"Configure "+v(V.value),1)]),i.value==="api-key"?(l(),m("div",_o,[n(W,{label:"API Key","validate-status":o.value?"error":"",help:o.value},{default:u(()=>[n(p,{value:f.value,"onUpdate:value":t[0]||(t[0]=D=>f.value=D),size:"large",placeholder:`Enter your ${V.value} API key`,onKeyup:He(fe,["enter"])},null,8,["value","placeholder"])]),_:1},8,["validate-status","help"]),e("div",ko,[e("a",{href:Pe(),target:"_blank"},[n(k($e)),y(" How to get "+v(V.value)+" API key ",1)],8,wo)]),e("div",bo,[n(I,{onClick:re,size:"large"},{default:u(()=>[y(" Skip "+v(V.value),1)]),_:1}),n(I,{type:"primary",onClick:fe,size:"large",disabled:!f.value.trim()},{default:u(()=>t[7]||(t[7]=[y(" Continue ")])),_:1,__:[7]},8,["disabled"])])])):O("",!0),i.value==="ollama-check"?(l(),m("div",So,[e("div",Co,[t[10]||(t[10]=e("h3",null,"Ollama Needs Models",-1)),t[11]||(t[11]=e("p",null,"Ollama is running but no models are installed. Use the model manager below to install models:",-1)),e("div",$o,[n(At,{onModelsUpdated:Be})]),e("div",Mo,[n(I,{onClick:re,size:"large"},{default:u(()=>t[8]||(t[8]=[y(" Skip Ollama ")])),_:1,__:[8]}),n(I,{type:"primary",onClick:ge,size:"large"},{default:u(()=>t[9]||(t[9]=[y(" Continue with Installed Models ")])),_:1,__:[9]})])])])):O("",!0),i.value==="ollama-endpoints"?(l(),m("div",Ao,[e("div",Io,[t[15]||(t[15]=e("h3",null,"Select Ollama Endpoints",-1)),t[16]||(t[16]=e("p",{class:"description"}," Choose which Ollama endpoints to enable. If unsure, we recommend using just the Chat endpoint. ",-1)),n(L,{value:g.value,"onUpdate:value":t[1]||(t[1]=D=>g.value=D),class:"endpoint-options"},{default:u(()=>[e("div",Po,[n(P,{value:"ollama-chat"},{default:u(()=>t[12]||(t[12]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Chat Endpoint (Recommended)"),e("div",{class:"endpoint-desc"},"Standard chat completions API - works with most models")],-1)])),_:1,__:[12]})]),e("div",xo,[n(P,{value:"ollama-generate"},{default:u(()=>t[13]||(t[13]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Generate Endpoint (Advanced)"),e("div",{class:"endpoint-desc"},"Raw generation API - for advanced use cases")],-1)])),_:1,__:[13]})])]),_:1},8,["value"]),e("div",Oo,[n(se,{type:"info",message:"Models you select will be enabled for all chosen endpoints","show-icon":""})]),e("div",Ro,[n(I,{type:"primary",size:"large",onClick:Ee},{default:u(()=>t[14]||(t[14]=[y(" Continue to Model Selection ")])),_:1,__:[14]})])])])):O("",!0),i.value==="openai-endpoints"?(l(),m("div",To,[e("div",zo,[t[20]||(t[20]=e("h3",null,"Select OpenAI Endpoints",-1)),t[21]||(t[21]=e("p",{class:"description"}," Choose which OpenAI endpoints to enable. Both work with all OpenAI models. ",-1)),n(L,{value:$.value,"onUpdate:value":t[2]||(t[2]=D=>$.value=D),class:"endpoint-options"},{default:u(()=>[e("div",Wo,[n(P,{value:"openai-chat"},{default:u(()=>t[17]||(t[17]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Chat Completions API"),e("div",{class:"endpoint-desc"},"Traditional OpenAI endpoint - widely supported")],-1)])),_:1,__:[17]})]),e("div",Lo,[n(P,{value:"openai-responses"},{default:u(()=>t[18]||(t[18]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Responses API (Recommended)"),e("div",{class:"endpoint-desc"},"Newer endpoint with better error handling and structured outputs")],-1)])),_:1,__:[18]})])]),_:1},8,["value"]),e("div",Do,[n(se,{type:"info",message:"Models you select will be enabled for all chosen endpoints","show-icon":""})]),e("div",Fo,[n(I,{type:"primary",size:"large",onClick:Ne},{default:u(()=>t[19]||(t[19]=[y(" Continue to Model Selection ")])),_:1,__:[19]})])])])):O("",!0),i.value==="model-select"?(l(),m("div",Eo,[e("h3",null,"Select a model to test "+v(V.value),1),t[28]||(t[28]=e("p",null,"Choose which model to use for testing the connection:",-1)),n(Ke,{value:d.value,"onUpdate:value":t[3]||(t[3]=D=>d.value=D),size:"large",placeholder:"Select a model to test",style:{width:"100%"},"show-search":"","filter-option":Me},{default:u(()=>[(l(!0),m(Q,null,j(q.value,D=>(l(),E(Ue,{key:D.id,value:D.modelId},{default:u(()=>[e("div",No,[e("code",Bo,v(D.name),1),D.inputCost!==void 0&&D.outputCost!==void 0?(l(),m("span",Uo," $"+v(D.inputCost.toFixed(4))+"/1M in, $"+v(D.outputCost.toFixed(4))+"/1M out ",1)):O("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),d.value?(l(),m("div",Ko,[t[25]||(t[25]=e("h4",null,"Test Details",-1)),e("div",qo,[t[24]||(t[24]=e("div",{class:"info-item"},[e("strong",null,"Prompt:"),e("code",{class:"prompt-text"},"Hello! Respond with a one-word greeting.")],-1)),e("div",Go,[t[22]||(t[22]=e("strong",null,"Estimated tokens:",-1)),e("span",null,v(M.value)+" input, "+v(ke)+" output (capped)",1)]),e("div",Ho,[t[23]||(t[23]=e("strong",null,"Estimated cost:",-1)),pe.value?(l(),m("span",Yo,v(pe.value),1)):(l(),m("span",Vo,"Free (local model)"))])])])):O("",!0),e("div",jo,[n(I,{onClick:Re,size:"large"},{default:u(()=>t[26]||(t[26]=[y(" Back ")])),_:1,__:[26]}),n(I,{type:"primary",onClick:Oe,size:"large",disabled:!d.value},{default:u(()=>t[27]||(t[27]=[y(" Test Connection ")])),_:1,__:[27]},8,["disabled"])])])):O("",!0),i.value==="testing"?(l(),m("div",Qo,[e("div",Xo,[n(k(Se),{spin:"",class:"test-spinner"}),e("p",null,"Testing connection with "+v(te.value)+"...",1),t[29]||(t[29]=e("p",{class:"test-detail"},"Sending test prompt...",-1))])])):O("",!0),i.value==="results"?(l(),m("div",Zo,[T.value.success?(l(),E(he,{key:0,status:"success",title:`${V.value} Connected Successfully!`},{extra:u(()=>[e("div",Jo,[e("div",en,[t[30]||(t[30]=e("strong",null,"Response:",-1)),e("div",tn,v(T.value.response),1)]),e("div",sn,[t[31]||(t[31]=e("strong",null,"Model:",-1)),y(" "+v(te.value),1)]),e("div",on,[t[32]||(t[32]=e("strong",null,"Latency:",-1)),y(" "+v(T.value.latency)+"ms ",1)]),T.value.cost!==void 0&&T.value.cost>0?(l(),m("div",nn,[t[33]||(t[33]=e("strong",null,"Actual Cost:",-1)),y(" $"+v(ve(T.value.cost)),1)])):O("",!0)]),n(I,{type:"primary",onClick:Te,size:"large"},{default:u(()=>t[34]||(t[34]=[y(" Select Models ")])),_:1,__:[34]})]),_:1},8,["title"])):(l(),E(he,{key:1,status:"error",title:`${V.value} Connection Failed`,"sub-title":T.value.error},{extra:u(()=>[n(qe,null,{default:u(()=>[n(I,{onClick:t[4]||(t[4]=D=>i.value="api-key")},{default:u(()=>t[35]||(t[35]=[y(" Try Different Key ")])),_:1,__:[35]}),n(I,{onClick:re},{default:u(()=>[y(" Skip "+v(V.value),1)]),_:1})]),_:1})]),_:1},8,["title","sub-title"]))])):O("",!0),i.value==="openrouter-settings"?(l(),m("div",an,[n(fo,{onSave:ze,onCancel:We})])):O("",!0),i.value==="models"?(l(),m("div",ln,[n(to,{"provider-id":K.value,"provider-name":V.value,"selected-models":_.value,"onUpdate:selectedModels":t[5]||(t[5]=D=>_.value=D)},null,8,["provider-id","provider-name","selected-models"]),e("div",rn,[n(I,{onClick:t[6]||(t[6]=D=>i.value="results"),size:"large"},{default:u(()=>t[36]||(t[36]=[y(" Back ")])),_:1,__:[36]}),n(I,{type:"primary",onClick:De,size:"large"},{default:u(()=>[y(v(Ie.value?"Next Provider":"Complete Setup"),1)]),_:1})])])):O("",!0)])}}}),cn=Y(un,[["__scopeId","data-v-e057ced6"]]),pn={class:"wizard-complete"},vn={class:"completion-header"},mn={class:"success-animation"},fn={class:"setup-summary"},yn={class:"summary-grid"},gn={class:"summary-card"},hn={class:"card-content"},_n={class:"card-description"},kn={class:"summary-card"},wn={class:"card-content"},bn={class:"card-description"},Sn={class:"summary-card"},Cn={class:"card-content"},$n={class:"card-description"},Mn={class:"summary-card"},An={class:"card-content"},In={class:"card-description"},Pn={class:"next-steps"},xn={class:"destination-options"},On=["onClick"],Rn={class:"destination-icon"},Tn={class:"destination-content"},zn={class:"destination-title"},Wn={class:"destination-description"},Ln={class:"destination-indicator"},Dn={class:"help-section"},Fn={class:"help-item"},En={class:"help-item"},Nn={class:"help-item"},Bn=H({__name:"WizardComplete",props:{environmentalMetrics:{},nextDestination:{}},emits:["destination-changed"],setup(U,{emit:A}){const c=U,r=A,C=ne(),h=ae(),{stats:S}=ce(),w=[{id:"playground",icon:"üéÆ",title:"Playground",description:"Quick testing with individual prompts and models"},{id:"models",icon:"ü§ñ",title:"Models",description:"Browse and manage available AI models"},{id:"templates",icon:"üìù",title:"Templates",description:"Create systematic prompt testing designs"},{id:"home",icon:"üè†",title:"Home",description:"Start from the main dashboard"}],b=x(()=>{const f=[];return c.environmentalMetrics.showCO2&&f.push("CO‚ÇÇ"),c.environmentalMetrics.showWater&&f.push("Water"),c.environmentalMetrics.showElectricity&&f.push("Energy"),f.length===0?"Tracking disabled":`Tracking ${f.join(", ")}`}),M=x(()=>{if(!h.secureSettings.hasSetupApiKeySecurity())return"Not configured";switch(h.secureSettings.getDefaultSecurityMode()){case"encrypted":return"Encrypted with master password";case"session":return"Session-only storage";case"plaintext":return"Plaintext storage";default:return"Not configured"}}),F=x(()=>{const o=Object.entries(C.providerConfigs).filter(([d,g])=>g.testStatus==="success");if(o.length===0)return"No providers configured";const _=o.map(([d])=>({"ollama-chat":"Ollama",anthropic:"Anthropic",openrouter:"OpenRouter","openai-chat":"OpenAI Chat","openai-responses":"OpenAI Responses"})[d]||d);return`${_.length} provider${_.length>1?"s":""}: ${_.join(", ")}`});function i(f){r("destination-changed",f)}return(f,o)=>(l(),m("div",pn,[e("div",vn,[e("div",mn,[n(k(J),{class:"success-icon"})]),o[0]||(o[0]=e("h2",null,"Setup Complete!",-1)),o[1]||(o[1]=e("p",{class:"completion-message"}," You've successfully configured Auditomatic Lite. You're ready to start testing AI models. ",-1))]),e("div",fn,[o[10]||(o[10]=e("h3",null,"What You've Set Up",-1)),e("div",yn,[e("div",gn,[o[3]||(o[3]=e("div",{class:"card-icon"},"üîí",-1)),e("div",hn,[o[2]||(o[2]=e("div",{class:"card-title"},"Security",-1)),e("div",_n,v(M.value),1)])]),e("div",kn,[o[5]||(o[5]=e("div",{class:"card-icon"},"ü§ñ",-1)),e("div",wn,[o[4]||(o[4]=e("div",{class:"card-title"},"AI Providers",-1)),e("div",bn,v(F.value),1)])]),e("div",Sn,[o[7]||(o[7]=e("div",{class:"card-icon"},"üìä",-1)),e("div",Cn,[o[6]||(o[6]=e("div",{class:"card-title"},"Models Ready",-1)),e("div",$n,v(k(S).enabled)+" models enabled",1)])]),e("div",Mn,[o[9]||(o[9]=e("div",{class:"card-icon"},"üåç",-1)),e("div",An,[o[8]||(o[8]=e("div",{class:"card-title"},"Environmental Tracking",-1)),e("div",In,v(b.value),1)])])])]),e("div",Pn,[o[11]||(o[11]=e("h3",null,"Where would you like to start?",-1)),e("div",xn,[(l(),m(Q,null,j(w,_=>e("div",{key:_.id,class:oe(["destination-card",{active:f.nextDestination===_.id}]),onClick:d=>i(_.id)},[e("div",Rn,v(_.icon),1),e("div",Tn,[e("div",zn,v(_.title),1),e("div",Wn,v(_.description),1)]),e("div",Ln,[f.nextDestination===_.id?(l(),E(k(J),{key:0})):O("",!0)])],10,On)),64))])]),o[15]||(o[15]=Ye('<div class="getting-started-tips" data-v-009b4007><h4 data-v-009b4007>üí° Getting Started Tips</h4><div class="tips-grid" data-v-009b4007><div class="tip-item" data-v-009b4007><span class="tip-number" data-v-009b4007>1</span><span class="tip-text" data-v-009b4007>Start with the Playground for quick model testing</span></div><div class="tip-item" data-v-009b4007><span class="tip-number" data-v-009b4007>2</span><span class="tip-text" data-v-009b4007>Create Templates for systematic prompt testing</span></div><div class="tip-item" data-v-009b4007><span class="tip-number" data-v-009b4007>3</span><span class="tip-text" data-v-009b4007>Use Variable Lists to test multiple inputs</span></div><div class="tip-item" data-v-009b4007><span class="tip-number" data-v-009b4007>4</span><span class="tip-text" data-v-009b4007>Check Models page to browse available options</span></div></div></div>',1)),e("div",Dn,[e("div",Fn,[n(k($e),{class:"help-icon"}),o[12]||(o[12]=e("span",null,"Need help? Check the getting started guide or hover over any ‚ìò icon throughout the app.",-1))]),e("div",En,[n(k($t),{class:"help-icon"}),o[13]||(o[13]=e("span",null,"All your data is stored locally in your browser for complete privacy.",-1))]),e("div",Nn,[n(k(Mt),{class:"help-icon"}),o[14]||(o[14]=e("span",null,"Remember to export your data regularly as a backup.",-1))])])]))}}),Un=Y(Bn,[["__scopeId","data-v-009b4007"]]),Kn={class:"wizard-fullscreen"},qn=H({__name:"WizardView",setup(U){const A=Ve(),c=ne(),r=ae(),C=x(()=>r.secureSettings.hasSetupApiKeySecurity()),h=x(()=>{switch(c.currentStep){case 0:return!0;case 1:return!0;case 2:return C.value;case 3:return!0;case 4:return!0;case 5:return!1;default:return!1}});function S(){c.nextStep()}function w(){c.previousStep()}function b(){A.push("/")}async function M(){try{await c.completeWizard();const d=c.nextDestination;switch(d){case"playground":A.push("/playground");break;case"models":A.push("/models");break;case"templates":A.push("/templates");break;default:A.push("/")}N.info("Wizard completed successfully",{destination:d})}catch(d){N.error("Failed to complete wizard",d)}}async function F(){N.info("Security setup ready, running model discovery"),await ue().discoverModels({forceRefresh:!0}),c.nextStep(),N.info("Discovery complete, advancing to providers")}function i(){c.providerQueue.length>0?(c.startProviderConfiguration(),c.nextStep()):_()}function f(){N.info("Provider configuration continuing")}function o(){c.goToStep(5),N.info("All providers configured, moving to complete")}function _(){c.goToStep(5),N.info("Skipping to complete step")}return ee(()=>{c.showWizard(),N.info("Wizard view mounted",{currentStep:c.currentStep,hasCompletedWizard:c.hasCompletedWizard})}),we(()=>{c.hideWizard()}),(d,g)=>(l(),m("div",Kn,[n(Dt,{"data-wizard-active":"","current-step":k(c).currentStep,"total-steps":k(c).totalSteps,"can-go-next":h.value,"can-go-back":k(c).canGoBack,"completed-steps":k(c).completedSteps,onNext:S,onBack:w,onClose:b,onComplete:M},{default:u(()=>[k(c).currentStep===0?(l(),E(qt,{key:0,onContinue:S})):k(c).currentStep===1?(l(),E(ss,{key:1,onContinue:S})):k(c).currentStep===2?(l(),E(ks,{key:2,onSecurityReady:F})):k(c).currentStep===3?(l(),E(Ks,{key:3,onContinue:i,onSkip:_})):k(c).currentStep===4?(l(),E(cn,{key:4,onContinue:f,onComplete:o})):k(c).currentStep===5?(l(),E(Un,{key:5,"environmental-metrics":k(c).environmentalMetrics,"next-destination":k(c).nextDestination,onDestinationChanged:k(c).setNextDestination},null,8,["environmental-metrics","next-destination","onDestinationChanged"])):O("",!0)]),_:1},8,["current-step","total-steps","can-go-next","can-go-back","completed-steps"])]))}}),ea=Y(qn,[["__scopeId","data-v-309a7e19"]]);export{ea as default};
