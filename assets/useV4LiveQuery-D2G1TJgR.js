import{m as v,n as m,r as d,s as i,q as f,O as b}from"./index-BET_-Wmx.js";function x(n){return v()?(m(n),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function O(n,r){const s=d(r==null?void 0:r.initialValue),o=n.subscribe({next:e=>s.value=e,error:r==null?void 0:r.onError});return x(()=>{o.unsubscribe()}),s}function S(n,r={}){const{initialValue:s,onError:o}=r,e=i(null),a=i(!0);return{data:O(f(n()).pipe(l=>new b(t=>{const p=l.subscribe({next:u=>{e.value=null,a.value=!1,t.next(u)},error:u=>{e.value=u instanceof Error?u:new Error(String(u)),a.value=!1,o==null||o(e.value),t.error(u)},complete:()=>{a.value=!1,t.complete()}});return()=>p.unsubscribe()})),{initialValue:s}),loading:a,error:e}}function g(n,r,s={}){const o=new b(e=>{const a=n(),c=f(a).subscribe({next:l=>{try{const t=r(l);e.next(t)}catch(t){e.error(t)}},error:l=>e.error(l),complete:()=>e.complete()});return()=>c.unsubscribe()});return S(()=>o,s)}export{S as a,g as u};
