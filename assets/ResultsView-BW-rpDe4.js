var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{d as r,r as a,b as s,e as o,f as n,q as i,p as l,F as c,D as d,t as u,g as m,n as p,O as f,o as h,i as v,w as y,l as g,I as _,_ as $,u as b,$ as w,k}from"./vendor-DdqHZeTC.js";import{d as S,_ as E,b as P}from"./index-C9s_qmww.js";import{P as j,T as x}from"./TaskDetailModal-CV8OFGy6.js";import{g as C}from"./db-ftwlfnxb.js";import"./apiLogger-wE3EW76_.js";import"./safeJson-BfKuju6h.js";var N={exports:{}},R={},O={},I={},T={},M={},D={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(t){if(super(),!e.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function s(e,...t){const r=[e[0]];let s=0;for(;s<t.length;)i(r,t[s]),r.push(e[++s]);return new a(r)}e._Code=a,e.nil=new a(""),e._=s;const o=new a("+");function n(e,...t){const r=[c(e[0])];let s=0;for(;s<t.length;)r.push(o),i(r,t[s]),r.push(o,c(e[++s]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===o){const r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new a(r)}function i(e,t){var s;t instanceof a?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(s=t)||"boolean"==typeof s||null===s?s:c(Array.isArray(s)?s.join(","):s))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function c(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.str=n,e.addCodeArg=i,e.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:n`${e}${t}`},e.stringify=function(e){return new a(c(e))},e.safeStringify=c,e.getProperty=function(t){return"string"==typeof t&&e.IDENTIFIER.test(t)?new a(`.${t}`):s`[${t}]`},e.getEsmExportName=function(t){if("string"==typeof t&&e.IDENTIFIER.test(t))return new a(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)},e.regexpCode=function(e){return new a(e.toString())}}(D);var A={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=D;class r extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var a,s;(s=a||(e.UsedValueState=a={}))[s.Started=0]="Started",s[s.Completed=1]="Completed",e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof t.Name?e:this.name(e)}name(e){return new t.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}e.Scope=o;class n extends t.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:r,itemIndex:a}){this.value=e,this.scopePath=t._`.${new t.Name(r)}[${a}]`}}e.ValueScopeName=n;const i=t._`\n`;e.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?i:t.nil}}get(){return this._scope}name(e){return new n(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const a=this.toName(e),{prefix:s}=a,o=null!==(r=t.key)&&void 0!==r?r:t.ref;let n=this._values[s];if(n){const e=n.get(o);if(e)return e}else n=this._values[s]=new Map;n.set(o,a);const i=this._scope[s]||(this._scope[s]=[]),l=i.length;return i[l]=t.ref,a.setValue(t,{property:s,itemIndex:l}),a}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,r=this._values){return this._reduceValues(r,r=>{if(void 0===r.scopePath)throw new Error(`CodeGen: name "${r}" has no value`);return t._`${e}${r.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(s,o,n={},i){let l=t.nil;for(const c in s){const d=s[c];if(!d)continue;const u=n[c]=n[c]||new Map;d.forEach(s=>{if(u.has(s))return;u.set(s,a.Started);let n=o(s);if(n){const r=this.opts.es5?e.varKinds.var:e.varKinds.const;l=t._`${l}${r} ${s} = ${n};${this.opts._n}`}else{if(!(n=null==i?void 0:i(s)))throw new r(s);l=t._`${l}${n}${this.opts._n}`}u.set(s,a.Completed)})}return l}}}(A),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=D,r=A;var a=D;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var s=A;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(e,t){return this}}class n extends o{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const a=e?r.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${a} ${this.name}${s};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=C(this.rhs,e,t)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class i extends o{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof t.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=C(this.rhs,e,r),this}get names(){return x(this.lhs instanceof t.Name?{}:{...this.lhs.names},this.rhs)}}class l extends i{constructor(e,t,r,a){super(e,r,a),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class c extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends o{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class u extends o{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class m extends o{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=C(this.code,e,t),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class p extends o{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let a=r.length;for(;a--;){const s=r[a];s.optimizeNames(e,t)||(N(e,s.names),r.splice(a,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>j(e,t.names),{})}}class f extends p{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class h extends p{}class v extends f{}v.kind="else";class y extends f{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof y?t:t.nodes:this.nodes.length?this:new y(R(e),t instanceof y?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=C(this.condition,e,t),this}get names(){const e=super.names;return x(e,this.condition),this.else&&j(e,this.else.names),e}}y.kind="if";class g extends f{}g.kind="for";class _ extends g{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=C(this.iteration,e,t),this}get names(){return j(super.names,this.iteration.names)}}class $ extends g{constructor(e,t,r,a){super(),this.varKind=e,this.name=t,this.from=r,this.to=a}render(e){const t=e.es5?r.varKinds.var:this.varKind,{name:a,from:s,to:o}=this;return`for(${t} ${a}=${s}; ${a}<${o}; ${a}++)`+super.render(e)}get names(){const e=x(super.names,this.from);return x(e,this.to)}}class b extends g{constructor(e,t,r,a){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=a}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=C(this.iterable,e,t),this}get names(){return j(super.names,this.iterable.names)}}class w extends f{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}w.kind="func";class k extends p{render(e){return"return "+super.render(e)}}k.kind="return";class S extends f{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,a;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(a=this.finally)||void 0===a||a.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&j(e,this.catch.names),this.finally&&j(e,this.finally.names),e}}class E extends f{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}E.kind="catch";class P extends f{render(e){return"finally"+super.render(e)}}P.kind="finally";function j(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function x(e,r){return r instanceof t._CodeOrName?j(e,r.names):e}function C(e,r,a){return e instanceof t.Name?o(e):(s=e)instanceof t._Code&&s._items.some(e=>e instanceof t.Name&&1===r[e.str]&&void 0!==a[e.str])?new t._Code(e._items.reduce((e,r)=>(r instanceof t.Name&&(r=o(r)),r instanceof t._Code?e.push(...r._items):e.push(r),e),[])):e;var s;function o(e){const t=a[e.str];return void 0===t||1!==r[e.str]?e:(delete r[e.str],t)}}function N(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function R(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:t._`!${M(e)}`}e.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new r.Scope({parent:e}),this._nodes=[new h]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,a){const s=this._scope.toName(t);return void 0!==r&&a&&(this._constants[s.str]=r),this._leafNode(new n(e,s,r)),s}const(e,t,a){return this._def(r.varKinds.const,e,t,a)}let(e,t,a){return this._def(r.varKinds.let,e,t,a)}var(e,t,a){return this._def(r.varKinds.var,e,t,a)}assign(e,t,r){return this._leafNode(new i(e,t,r))}add(t,r){return this._leafNode(new l(t,e.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==t.nil&&this._leafNode(new m(e)),this}object(...e){const r=["{"];for(const[a,s]of e)r.length>1&&r.push(","),r.push(a),(a!==s||this.opts.es5)&&(r.push(":"),(0,t.addCodeArg)(r,s));return r.push("}"),new t._Code(r)}if(e,t,r){if(this._blockNode(new y(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new y(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(y,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new _(e),t)}forRange(e,t,a,s,o=(this.opts.es5?r.varKinds.var:r.varKinds.let)){const n=this._scope.toName(e);return this._for(new $(o,n,t,a),()=>s(n))}forOf(e,a,s,o=r.varKinds.const){const n=this._scope.toName(e);if(this.opts.es5){const e=a instanceof t.Name?a:this.var("_arr",a);return this.forRange("_i",0,t._`${e}.length`,r=>{this.var(n,t._`${e}[${r}]`),s(n)})}return this._for(new b("of",o,n,a),()=>s(n))}forIn(e,a,s,o=(this.opts.es5?r.varKinds.var:r.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,t._`Object.keys(${a})`,s);const n=this._scope.toName(e);return this._for(new b("in",o,n,a),()=>s(n))}endFor(){return this._endBlockNode(g)}label(e){return this._leafNode(new c(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new k;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const a=new S;if(this._blockNode(a),this.code(e),t){const e=this.name("e");this._currNode=a.catch=new E(e),t(e)}return r&&(this._currNode=a.finally=new P,this.code(r)),this._endBlockNode(E,P)}throw(e){return this._leafNode(new u(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,r=t.nil,a,s){return this._blockNode(new w(e,r,a)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(w)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},e.not=R;const O=T(e.operators.AND);e.and=function(...e){return e.reduce(O)};const I=T(e.operators.OR);function T(e){return(r,a)=>r===t.nil?a:a===t.nil?r:t._`${M(r)} ${e} ${M(a)}`}function M(e){return e instanceof t.Name?e:t._`(${e})`}e.or=function(...e){return e.reduce(I)}}(M);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.checkStrictMode=z.getErrorPath=z.Type=z.useFunc=z.setEvaluated=z.evaluatedPropsToName=z.mergeEvaluated=z.eachItem=z.unescapeJsonPointer=z.escapeJsonPointer=z.escapeFragment=z.unescapeFragment=z.schemaRefOrVal=z.schemaHasRulesButRef=z.schemaHasRules=z.checkUnknownRules=z.alwaysValidSchema=z.toHash=void 0;const V=M,q=D;function U(e,t=e.schema){const{opts:r,self:a}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const s=a.RULES.keywords;for(const o in t)s[o]||Z(e,`unknown keyword: "${o}"`)}function F(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function L(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function K(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function G({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:a}){return(s,o,n,i)=>{const l=void 0===n?o:n instanceof V.Name?(o instanceof V.Name?e(s,o,n):t(s,o,n),n):o instanceof V.Name?(t(s,n,o),o):r(o,n);return i!==V.Name||l instanceof V.Name?l:a(s,l)}}function J(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",V._`{}`);return void 0!==t&&B(e,r,t),r}function B(e,t,r){Object.keys(r).forEach(r=>e.assign(V._`${t}${(0,V.getProperty)(r)}`,!0))}z.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},z.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(U(e,t),!F(t,e.self.RULES.all))},z.checkUnknownRules=U,z.schemaHasRules=F,z.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},z.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,a,s){if(!s){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return V._`${r}`}return V._`${e}${t}${(0,V.getProperty)(a)}`},z.unescapeFragment=function(e){return K(decodeURIComponent(e))},z.escapeFragment=function(e){return encodeURIComponent(L(e))},z.escapeJsonPointer=L,z.unescapeJsonPointer=K,z.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},z.mergeEvaluated={props:G({mergeNames:(e,t,r)=>e.if(V._`${r} !== true && ${t} !== undefined`,()=>{e.if(V._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,V._`${r} || {}`).code(V._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(V._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,V._`${r} || {}`),B(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:J}),items:G({mergeNames:(e,t,r)=>e.if(V._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,V._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(V._`${r} !== true`,()=>e.assign(r,!0===t||V._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},z.evaluatedPropsToName=J,z.setEvaluated=B;const H={};var W,Q;function Z(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}z.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:H[t.code]||(H[t.code]=new q._Code(t.code))})},(Q=W||(z.Type=W={}))[Q.Num=0]="Num",Q[Q.Str=1]="Str",z.getErrorPath=function(e,t,r){if(e instanceof V.Name){const a=t===W.Num;return r?a?V._`"[" + ${e} + "]"`:V._`"['" + ${e} + "']"`:a?V._`"/" + ${e}`:V._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,V.getProperty)(e).toString():"/"+L(e)},z.checkStrictMode=Z;var X={};Object.defineProperty(X,"__esModule",{value:!0});const Y=M,ee={data:new Y.Name("data"),valCxt:new Y.Name("valCxt"),instancePath:new Y.Name("instancePath"),parentData:new Y.Name("parentData"),parentDataProperty:new Y.Name("parentDataProperty"),rootData:new Y.Name("rootData"),dynamicAnchors:new Y.Name("dynamicAnchors"),vErrors:new Y.Name("vErrors"),errors:new Y.Name("errors"),this:new Y.Name("this"),self:new Y.Name("self"),scope:new Y.Name("scope"),json:new Y.Name("json"),jsonPos:new Y.Name("jsonPos"),jsonLen:new Y.Name("jsonLen"),jsonPart:new Y.Name("jsonPart")};X.default=ee,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=M,r=z,a=X;function s(e,r){const s=e.const("err",r);e.if(t._`${a.default.vErrors} === null`,()=>e.assign(a.default.vErrors,t._`[${s}]`),t._`${a.default.vErrors}.push(${s})`),e.code(t._`${a.default.errors}++`)}function o(e,r){const{gen:a,validateName:s,schemaEnv:o}=e;o.$async?a.throw(t._`new ${e.ValidationError}(${r})`):(a.assign(t._`${s}.errors`,r),a.return(!1))}e.keywordError={message:({keyword:e})=>t.str`must pass "${e}" keyword validation`},e.keyword$DataError={message:({keyword:e,schemaType:r})=>r?t.str`"${e}" keyword must be ${r} ($data)`:t.str`"${e}" keyword is invalid ($data)`},e.reportError=function(r,a=e.keywordError,n,l){const{it:c}=r,{gen:d,compositeRule:u,allErrors:m}=c,p=i(r,a,n);(null!=l?l:u||m)?s(d,p):o(c,t._`[${p}]`)},e.reportExtraError=function(t,r=e.keywordError,n){const{it:l}=t,{gen:c,compositeRule:d,allErrors:u}=l;s(c,i(t,r,n)),d||u||o(l,a.default.vErrors)},e.resetErrorsCount=function(e,r){e.assign(a.default.errors,r),e.if(t._`${a.default.vErrors} !== null`,()=>e.if(r,()=>e.assign(t._`${a.default.vErrors}.length`,r),()=>e.assign(a.default.vErrors,null)))},e.extendErrors=function({gen:e,keyword:r,schemaValue:s,data:o,errsCount:n,it:i}){if(void 0===n)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",n,a.default.errors,n=>{e.const(l,t._`${a.default.vErrors}[${n}]`),e.if(t._`${l}.instancePath === undefined`,()=>e.assign(t._`${l}.instancePath`,(0,t.strConcat)(a.default.instancePath,i.errorPath))),e.assign(t._`${l}.schemaPath`,t.str`${i.errSchemaPath}/${r}`),i.opts.verbose&&(e.assign(t._`${l}.schema`,s),e.assign(t._`${l}.data`,o))})};const n={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function i(e,r,s){const{createErrors:o}=e.it;return!1===o?t._`{}`:function(e,r,s={}){const{gen:o,it:i}=e,d=[l(i,s),c(e,s)];return function(e,{params:r,message:s},o){const{keyword:i,data:l,schemaValue:c,it:d}=e,{opts:u,propertyName:m,topSchemaRef:p,schemaPath:f}=d;o.push([n.keyword,i],[n.params,"function"==typeof r?r(e):r||t._`{}`]),u.messages&&o.push([n.message,"function"==typeof s?s(e):s]);u.verbose&&o.push([n.schema,c],[n.parentSchema,t._`${p}${f}`],[a.default.data,l]);m&&o.push([n.propertyName,m])}(e,r,d),o.object(...d)}(e,r,s)}function l({errorPath:e},{instancePath:s}){const o=s?t.str`${e}${(0,r.getErrorPath)(s,r.Type.Str)}`:e;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,o)]}function c({keyword:e,it:{errSchemaPath:a}},{schemaPath:s,parentSchema:o}){let i=o?a:t.str`${a}/${e}`;return s&&(i=t.str`${i}${(0,r.getErrorPath)(s,r.Type.Str)}`),[n.schemaPath,i]}}(T),Object.defineProperty(I,"__esModule",{value:!0}),I.boolOrEmptySchema=I.topBoolOrEmptySchema=void 0;const te=T,re=M,ae=X,se={message:"boolean schema is false"};function oe(e,t){const{gen:r,data:a}=e;(0,te.reportError)({gen:r,keyword:"false schema",data:a,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},se,void 0,t)}I.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:a}=e;!1===r?oe(e,!1):"object"==typeof r&&!0===r.$async?t.return(ae.default.data):(t.assign(re._`${a}.errors`,null),t.return(!0))},I.boolOrEmptySchema=function(e,t){const{gen:r,schema:a}=e;!1===a?(r.var(t,!1),oe(e)):r.var(t,!0)};var ne={},ie={};Object.defineProperty(ie,"__esModule",{value:!0}),ie.getRules=ie.isJSONType=void 0;const le=new Set(["string","number","integer","boolean","null","object","array"]);ie.isJSONType=function(e){return"string"==typeof e&&le.has(e)},ie.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}};var ce={};function de(e,t){return t.rules.some(t=>ue(e,t))}function ue(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(ce,"__esModule",{value:!0}),ce.shouldUseRule=ce.shouldUseGroup=ce.schemaHasRulesForType=void 0,ce.schemaHasRulesForType=function({schema:e,self:t},r){const a=t.RULES.types[r];return a&&!0!==a&&de(e,a)},ce.shouldUseGroup=de,ce.shouldUseRule=ue,Object.defineProperty(ne,"__esModule",{value:!0}),ne.reportTypeError=ne.checkDataTypes=ne.checkDataType=ne.coerceAndCheckDataType=ne.getJSONTypes=ne.getSchemaTypes=ne.DataType=void 0;const me=ie,pe=ce,fe=T,he=M,ve=z;var ye,ge;function _e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(me.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}(ge=ye||(ne.DataType=ye={}))[ge.Correct=0]="Correct",ge[ge.Wrong=1]="Wrong",ne.getSchemaTypes=function(e){const t=_e(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},ne.getJSONTypes=_e,ne.coerceAndCheckDataType=function(e,t){const{gen:r,data:a,opts:s}=e,o=function(e,t){return t?e.filter(e=>$e.has(e)||"array"===t&&"array"===e):[]}(t,s.coerceTypes),n=t.length>0&&!(0===o.length&&1===t.length&&(0,pe.schemaHasRulesForType)(e,t[0]));if(n){const n=we(t,a,s.strictNumbers,ye.Wrong);r.if(n,()=>{o.length?function(e,t,r){const{gen:a,data:s,opts:o}=e,n=a.let("dataType",he._`typeof ${s}`),i=a.let("coerced",he._`undefined`);"array"===o.coerceTypes&&a.if(he._`${n} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>a.assign(s,he._`${s}[0]`).assign(n,he._`typeof ${s}`).if(we(t,s,o.strictNumbers),()=>a.assign(i,s)));a.if(he._`${i} !== undefined`);for(const c of r)($e.has(c)||"array"===c&&"array"===o.coerceTypes)&&l(c);function l(e){switch(e){case"string":return void a.elseIf(he._`${n} == "number" || ${n} == "boolean"`).assign(i,he._`"" + ${s}`).elseIf(he._`${s} === null`).assign(i,he._`""`);case"number":return void a.elseIf(he._`${n} == "boolean" || ${s} === null
              || (${n} == "string" && ${s} && ${s} == +${s})`).assign(i,he._`+${s}`);case"integer":return void a.elseIf(he._`${n} === "boolean" || ${s} === null
              || (${n} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(i,he._`+${s}`);case"boolean":return void a.elseIf(he._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(i,!1).elseIf(he._`${s} === "true" || ${s} === 1`).assign(i,!0);case"null":return a.elseIf(he._`${s} === "" || ${s} === 0 || ${s} === false`),void a.assign(i,null);case"array":a.elseIf(he._`${n} === "string" || ${n} === "number"
              || ${n} === "boolean" || ${s} === null`).assign(i,he._`[${s}]`)}}a.else(),Se(e),a.endIf(),a.if(he._`${i} !== undefined`,()=>{a.assign(s,i),function({gen:e,parentData:t,parentDataProperty:r},a){e.if(he._`${t} !== undefined`,()=>e.assign(he._`${t}[${r}]`,a))}(e,i)})}(e,t,o):Se(e)})}return n};const $e=new Set(["string","number","integer","boolean","null"]);function be(e,t,r,a=ye.Correct){const s=a===ye.Correct?he.operators.EQ:he.operators.NEQ;let o;switch(e){case"null":return he._`${t} ${s} null`;case"array":o=he._`Array.isArray(${t})`;break;case"object":o=he._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=n(he._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=n();break;default:return he._`typeof ${t} ${s} ${e}`}return a===ye.Correct?o:(0,he.not)(o);function n(e=he.nil){return(0,he.and)(he._`typeof ${t} == "number"`,e,r?he._`isFinite(${t})`:he.nil)}}function we(e,t,r,a){if(1===e.length)return be(e[0],t,r,a);let s;const o=(0,ve.toHash)(e);if(o.array&&o.object){const e=he._`typeof ${t} != "object"`;s=o.null?e:he._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else s=he.nil;o.number&&delete o.integer;for(const n in o)s=(0,he.and)(s,be(n,t,r,a));return s}ne.checkDataType=be,ne.checkDataTypes=we;const ke={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?he._`{type: ${e}}`:he._`{type: ${t}}`};function Se(e){const t=function(e){const{gen:t,data:r,schema:a}=e,s=(0,ve.schemaRefOrVal)(e,a,"type");return{gen:t,keyword:"type",data:r,schema:a.type,schemaCode:s,schemaValue:s,parentSchema:a,params:{},it:e}}(e);(0,fe.reportError)(t,ke)}ne.reportTypeError=Se;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.assignDefaults=void 0;const Pe=M,je=z;function xe(e,t,r){const{gen:a,compositeRule:s,data:o,opts:n}=e;if(void 0===r)return;const i=Pe._`${o}${(0,Pe.getProperty)(t)}`;if(s)return void(0,je.checkStrictMode)(e,`default is ignored for: ${i}`);let l=Pe._`${i} === undefined`;"empty"===n.useDefaults&&(l=Pe._`${l} || ${i} === null || ${i} === ""`),a.if(l,Pe._`${i} = ${(0,Pe.stringify)(r)}`)}Ee.assignDefaults=function(e,t){const{properties:r,items:a}=e.schema;if("object"===t&&r)for(const s in r)xe(e,s,r[s].default);else"array"===t&&Array.isArray(a)&&a.forEach((t,r)=>xe(e,r,t.default))};var Ce={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.validateUnion=Ne.validateArray=Ne.usePattern=Ne.callValidateCode=Ne.schemaProperties=Ne.allSchemaProperties=Ne.noPropertyInData=Ne.propertyInData=Ne.isOwnProperty=Ne.hasPropFunc=Ne.reportMissingProp=Ne.checkMissingProp=Ne.checkReportMissingProp=void 0;const Re=M,Oe=z,Ie=X,Te=z;function Me(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:Re._`Object.prototype.hasOwnProperty`})}function De(e,t,r){return Re._`${Me(e)}.call(${t}, ${r})`}function Ae(e,t,r,a){const s=Re._`${t}${(0,Re.getProperty)(r)} === undefined`;return a?(0,Re.or)(s,(0,Re.not)(De(e,t,r))):s}function ze(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}Ne.checkReportMissingProp=function(e,t){const{gen:r,data:a,it:s}=e;r.if(Ae(r,a,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:Re._`${t}`},!0),e.error()})},Ne.checkMissingProp=function({gen:e,data:t,it:{opts:r}},a,s){return(0,Re.or)(...a.map(a=>(0,Re.and)(Ae(e,t,a,r.ownProperties),Re._`${s} = ${a}`)))},Ne.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},Ne.hasPropFunc=Me,Ne.isOwnProperty=De,Ne.propertyInData=function(e,t,r,a){const s=Re._`${t}${(0,Re.getProperty)(r)} !== undefined`;return a?Re._`${s} && ${De(e,t,r)}`:s},Ne.noPropertyInData=Ae,Ne.allSchemaProperties=ze,Ne.schemaProperties=function(e,t){return ze(t).filter(r=>!(0,Oe.alwaysValidSchema)(e,t[r]))},Ne.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:a,schemaPath:s,errorPath:o},it:n},i,l,c){const d=c?Re._`${e}, ${t}, ${a}${s}`:t,u=[[Ie.default.instancePath,(0,Re.strConcat)(Ie.default.instancePath,o)],[Ie.default.parentData,n.parentData],[Ie.default.parentDataProperty,n.parentDataProperty],[Ie.default.rootData,Ie.default.rootData]];n.opts.dynamicRef&&u.push([Ie.default.dynamicAnchors,Ie.default.dynamicAnchors]);const m=Re._`${d}, ${r.object(...u)}`;return l!==Re.nil?Re._`${i}.call(${l}, ${m})`:Re._`${i}(${m})`};const Ve=Re._`new RegExp`;Ne.usePattern=function({gen:e,it:{opts:t}},r){const a=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,a);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:Re._`${"new RegExp"===s.code?Ve:(0,Te.useFunc)(e,s)}(${r}, ${a})`})},Ne.validateArray=function(e){const{gen:t,data:r,keyword:a,it:s}=e,o=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return n(()=>t.assign(e,!1)),e}return t.var(o,!0),n(()=>t.break()),o;function n(s){const n=t.const("len",Re._`${r}.length`);t.forRange("i",0,n,r=>{e.subschema({keyword:a,dataProp:r,dataPropType:Oe.Type.Num},o),t.if((0,Re.not)(o),s)})}},Ne.validateUnion=function(e){const{gen:t,schema:r,keyword:a,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,Oe.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const o=t.let("valid",!1),n=t.name("_valid");t.block(()=>r.forEach((r,s)=>{const i=e.subschema({keyword:a,schemaProp:s,compositeRule:!0},n);t.assign(o,Re._`${o} || ${n}`);e.mergeValidEvaluated(i,n)||t.if((0,Re.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))},Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.validateKeywordUsage=Ce.validSchemaType=Ce.funcKeywordCode=Ce.macroKeywordCode=void 0;const qe=M,Ue=X,Fe=Ne,Le=T;function Ke(e){const{gen:t,data:r,it:a}=e;t.if(a.parentData,()=>t.assign(r,qe._`${a.parentData}[${a.parentDataProperty}]`))}function Ge(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,qe.stringify)(r)})}Ce.macroKeywordCode=function(e,t){const{gen:r,keyword:a,schema:s,parentSchema:o,it:n}=e,i=t.macro.call(n.self,s,o,n),l=Ge(r,a,i);!1!==n.opts.validateSchema&&n.self.validateSchema(i,!0);const c=r.name("valid");e.subschema({schema:i,schemaPath:qe.nil,errSchemaPath:`${n.errSchemaPath}/${a}`,topSchemaRef:l,compositeRule:!0},c),e.pass(c,()=>e.error(!0))},Ce.funcKeywordCode=function(e,t){var r;const{gen:a,keyword:s,schema:o,parentSchema:n,$data:i,it:l}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(l,t);const c=!i&&t.compile?t.compile.call(l.self,o,n,l):t.validate,d=Ge(a,s,c),u=a.let("valid");function m(r=(t.async?qe._`await `:qe.nil)){const s=l.opts.passContext?Ue.default.this:Ue.default.self,o=!("compile"in t&&!i||!1===t.schema);a.assign(u,qe._`${r}${(0,Fe.callValidateCode)(e,d,s,o)}`,t.modifying)}function p(e){var r;a.if((0,qe.not)(null!==(r=t.valid)&&void 0!==r?r:u),e)}e.block$data(u,function(){if(!1===t.errors)m(),t.modifying&&Ke(e),p(()=>e.error());else{const r=t.async?function(){const e=a.let("ruleErrs",null);return a.try(()=>m(qe._`await `),t=>a.assign(u,!1).if(qe._`${t} instanceof ${l.ValidationError}`,()=>a.assign(e,qe._`${t}.errors`),()=>a.throw(t))),e}():function(){const e=qe._`${d}.errors`;return a.assign(e,null),m(qe.nil),e}();t.modifying&&Ke(e),p(()=>function(e,t){const{gen:r}=e;r.if(qe._`Array.isArray(${t})`,()=>{r.assign(Ue.default.vErrors,qe._`${Ue.default.vErrors} === null ? ${t} : ${Ue.default.vErrors}.concat(${t})`).assign(Ue.default.errors,qe._`${Ue.default.vErrors}.length`),(0,Le.extendErrors)(e)},()=>e.error())}(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:u)},Ce.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},Ce.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:a},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const n=s.dependencies;if(null==n?void 0:n.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${n.join(",")}`);if(s.validateSchema){if(!s.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${a}": `+r.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}};var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.extendSubschemaMode=Je.extendSubschemaData=Je.getSubschema=void 0;const Be=M,He=z;Je.getSubschema=function(e,{keyword:t,schemaProp:r,schema:a,schemaPath:s,errSchemaPath:o,topSchemaRef:n}){if(void 0!==t&&void 0!==a)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const a=e.schema[t];return void 0===r?{schema:a,schemaPath:Be._`${e.schemaPath}${(0,Be.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:Be._`${e.schemaPath}${(0,Be.getProperty)(t)}${(0,Be.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,He.escapeFragment)(r)}`}}if(void 0!==a){if(void 0===s||void 0===o||void 0===n)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:s,topSchemaRef:n,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')},Je.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:a,data:s,dataTypes:o,propertyName:n}){if(void 0!==s&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:i}=t;if(void 0!==r){const{errorPath:s,dataPathArr:o,opts:n}=t;l(i.let("data",Be._`${t.data}${(0,Be.getProperty)(r)}`,!0)),e.errorPath=Be.str`${s}${(0,He.getErrorPath)(r,a,n.jsPropertySyntax)}`,e.parentDataProperty=Be._`${r}`,e.dataPathArr=[...o,e.parentDataProperty]}if(void 0!==s){l(s instanceof Be.Name?s:i.let("data",s,!0)),void 0!==n&&(e.propertyName=n)}function l(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}o&&(e.dataTypes=o)},Je.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:a,createErrors:s,allErrors:o}){void 0!==a&&(e.compositeRule=a),void 0!==s&&(e.createErrors=s),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r};var We={},Qe=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var a,s,o;if(Array.isArray(t)){if((a=t.length)!=r.length)return!1;for(s=a;0!==s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((a=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=a;0!==s--;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=a;0!==s--;){var n=o[s];if(!e(t[n],r[n]))return!1}return!0}return t!=t&&r!=r},Ze={exports:{}},Xe=Ze.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),Ye(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function Ye(e,t,r,a,s,o,n,i,l,c){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var d in t(a,s,o,n,i,l,c),a){var u=a[d];if(Array.isArray(u)){if(d in Xe.arrayKeywords)for(var m=0;m<u.length;m++)Ye(e,t,r,u[m],s+"/"+d+"/"+m,o,s,d,a,m)}else if(d in Xe.propsKeywords){if(u&&"object"==typeof u)for(var p in u)Ye(e,t,r,u[p],s+"/"+d+"/"+et(p),o,s,d,a,p)}else(d in Xe.keywords||e.allKeys&&!(d in Xe.skipKeywords))&&Ye(e,t,r,u,s+"/"+d,o,s,d,a)}r(a,s,o,n,i,l,c)}}function et(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Xe.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},Xe.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Xe.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Xe.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};var tt=Ze.exports;Object.defineProperty(We,"__esModule",{value:!0}),We.getSchemaRefs=We.resolveUrl=We.normalizeId=We._getFullPath=We.getFullPath=We.inlineRef=void 0;const rt=z,at=Qe,st=tt,ot=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);We.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!it(e):!!t&&lt(e)<=t)};const nt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function it(e){for(const t in e){if(nt.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(it))return!0;if("object"==typeof r&&it(r))return!0}return!1}function lt(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!ot.has(r)&&("object"==typeof e[r]&&(0,rt.eachItem)(e[r],e=>t+=lt(e)),t===1/0))return 1/0}return t}function ct(e,t="",r){!1!==r&&(t=mt(t));const a=e.parse(t);return dt(e,a)}function dt(e,t){return e.serialize(t).split("#")[0]+"#"}We.getFullPath=ct,We._getFullPath=dt;const ut=/#\/?$/;function mt(e){return e?e.replace(ut,""):""}We.normalizeId=mt,We.resolveUrl=function(e,t,r){return r=mt(r),e.resolve(t,r)};const pt=/^[a-z_][-a-z0-9._]*$/i;We.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:a}=this.opts,s=mt(e[r]||t),o={"":s},n=ct(a,s,!1),i={},l=new Set;return st(e,{allKeys:!0},(e,t,a,s)=>{if(void 0===s)return;const u=n+t;let m=o[s];function p(t){const r=this.opts.uriResolver.resolve;if(t=mt(m?r(m,t):t),l.has(t))throw d(t);l.add(t);let a=this.refs[t];return"string"==typeof a&&(a=this.refs[a]),"object"==typeof a?c(e,a.schema,t):t!==mt(u)&&("#"===t[0]?(c(e,i[t],t),i[t]=e):this.refs[t]=u),t}function f(e){if("string"==typeof e){if(!pt.test(e))throw new Error(`invalid anchor "${e}"`);p.call(this,`#${e}`)}}"string"==typeof e[r]&&(m=p.call(this,e[r])),f.call(this,e.$anchor),f.call(this,e.$dynamicAnchor),o[t]=m}),i;function c(e,t,r){if(void 0!==t&&!at(e,t))throw d(r)}function d(e){return new Error(`reference "${e}" resolves to more than one schema`)}},Object.defineProperty(O,"__esModule",{value:!0}),O.getData=O.KeywordCxt=O.validateFunctionCode=void 0;const ft=I,ht=ne,vt=ce,yt=ne,gt=Ee,_t=Ce,$t=Je,bt=M,wt=X,kt=We,St=z,Et=T;function Pt({gen:e,validateName:t,schema:r,schemaEnv:a,opts:s},o){s.code.es5?e.func(t,bt._`${wt.default.data}, ${wt.default.valCxt}`,a.$async,()=>{e.code(bt._`"use strict"; ${jt(r,s)}`),function(e,t){e.if(wt.default.valCxt,()=>{e.var(wt.default.instancePath,bt._`${wt.default.valCxt}.${wt.default.instancePath}`),e.var(wt.default.parentData,bt._`${wt.default.valCxt}.${wt.default.parentData}`),e.var(wt.default.parentDataProperty,bt._`${wt.default.valCxt}.${wt.default.parentDataProperty}`),e.var(wt.default.rootData,bt._`${wt.default.valCxt}.${wt.default.rootData}`),t.dynamicRef&&e.var(wt.default.dynamicAnchors,bt._`${wt.default.valCxt}.${wt.default.dynamicAnchors}`)},()=>{e.var(wt.default.instancePath,bt._`""`),e.var(wt.default.parentData,bt._`undefined`),e.var(wt.default.parentDataProperty,bt._`undefined`),e.var(wt.default.rootData,wt.default.data),t.dynamicRef&&e.var(wt.default.dynamicAnchors,bt._`{}`)})}(e,s),e.code(o)}):e.func(t,bt._`${wt.default.data}, ${function(e){return bt._`{${wt.default.instancePath}="", ${wt.default.parentData}, ${wt.default.parentDataProperty}, ${wt.default.rootData}=${wt.default.data}${e.dynamicRef?bt._`, ${wt.default.dynamicAnchors}={}`:bt.nil}}={}`}(s)}`,a.$async,()=>e.code(jt(r,s)).code(o))}function jt(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?bt._`/*# sourceURL=${r} */`:bt.nil}function xt(e,t){Nt(e)&&(Rt(e),Ct(e))?function(e,t){const{schema:r,gen:a,opts:s}=e;s.$comment&&r.$comment&&It(e);(function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,kt.resolveUrl)(e.opts.uriResolver,e.baseId,t))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=a.const("_errs",wt.default.errors);Ot(e,o),a.var(t,bt._`${o} === ${wt.default.errors}`)}(e,t):(0,ft.boolOrEmptySchema)(e,t)}function Ct({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Nt(e){return"boolean"!=typeof e.schema}function Rt(e){(0,St.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:a,self:s}=e;t.$ref&&a.ignoreKeywordsWithRef&&(0,St.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function Ot(e,t){if(e.opts.jtd)return Tt(e,[],!1,t);const r=(0,ht.getSchemaTypes)(e.schema);Tt(e,r,!(0,ht.coerceAndCheckDataType)(e,r),t)}function It({gen:e,schemaEnv:t,schema:r,errSchemaPath:a,opts:s}){const o=r.$comment;if(!0===s.$comment)e.code(bt._`${wt.default.self}.logger.log(${o})`);else if("function"==typeof s.$comment){const r=bt.str`${a}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(bt._`${wt.default.self}.opts.$comment(${o}, ${r}, ${s}.schema)`)}}function Tt(e,t,r,a){const{gen:s,schema:o,data:n,allErrors:i,opts:l,self:c}=e,{RULES:d}=c;function u(c){(0,vt.shouldUseGroup)(o,c)&&(c.type?(s.if((0,yt.checkDataType)(c.type,n,l.strictNumbers)),Mt(e,c),1===t.length&&t[0]===c.type&&r&&(s.else(),(0,yt.reportTypeError)(e)),s.endIf()):Mt(e,c),i||s.if(bt._`${wt.default.errors} === ${a||0}`))}!o.$ref||!l.ignoreKeywordsWithRef&&(0,St.schemaHasRulesButRef)(o,d)?(l.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach(t=>{At(e.dataTypes,t)||zt(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const r=[];for(const a of e.dataTypes)At(t,a)?r.push(a):t.includes("integer")&&"number"===a&&r.push("integer");e.dataTypes=r}(e,t)})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&zt(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const r=e.self.RULES.all;for(const a in r){const s=r[a];if("object"==typeof s&&(0,vt.shouldUseRule)(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some(e=>Dt(t,e))&&zt(e,`missing type "${r.join(",")}" for keyword "${a}"`)}}}(e,e.dataTypes)}(e,t),s.block(()=>{for(const e of d.rules)u(e);u(d.post)})):s.block(()=>qt(e,"$ref",d.all.$ref.definition))}function Mt(e,t){const{gen:r,schema:a,opts:{useDefaults:s}}=e;s&&(0,gt.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,vt.shouldUseRule)(a,r)&&qt(e,r.keyword,r.definition,t.type)})}function Dt(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function At(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function zt(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,St.checkStrictMode)(e,t,e.opts.strictTypes)}O.validateFunctionCode=function(e){Nt(e)&&(Rt(e),Ct(e))?function(e){const{schema:t,opts:r,gen:a}=e;Pt(e,()=>{r.$comment&&t.$comment&&It(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,St.checkStrictMode)(e,"default is ignored in the schema root")}(e),a.let(wt.default.vErrors,null),a.let(wt.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",bt._`${r}.evaluated`),t.if(bt._`${e.evaluated}.dynamicProps`,()=>t.assign(bt._`${e.evaluated}.props`,bt._`undefined`)),t.if(bt._`${e.evaluated}.dynamicItems`,()=>t.assign(bt._`${e.evaluated}.items`,bt._`undefined`))}(e),Ot(e),function(e){const{gen:t,schemaEnv:r,validateName:a,ValidationError:s,opts:o}=e;r.$async?t.if(bt._`${wt.default.errors} === 0`,()=>t.return(wt.default.data),()=>t.throw(bt._`new ${s}(${wt.default.vErrors})`)):(t.assign(bt._`${a}.errors`,wt.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:r,items:a}){r instanceof bt.Name&&e.assign(bt._`${t}.props`,r);a instanceof bt.Name&&e.assign(bt._`${t}.items`,a)}(e),t.return(bt._`${wt.default.errors} === 0`))}(e)})}(e):Pt(e,()=>(0,ft.topBoolOrEmptySchema)(e))};class Vt{constructor(e,t,r){if((0,_t.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,St.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",Lt(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,_t.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",wt.default.errors))}result(e,t,r){this.failResult((0,bt.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,bt.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(bt._`${t} !== undefined && (${(0,bt.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?Et.reportExtraError:Et.reportError)(this,this.def.error,t)}$dataError(){(0,Et.reportError)(this,this.def.$dataError||Et.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,Et.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=bt.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=bt.nil,t=bt.nil){if(!this.$data)return;const{gen:r,schemaCode:a,schemaType:s,def:o}=this;r.if((0,bt.or)(bt._`${a} === undefined`,t)),e!==bt.nil&&r.assign(e,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==bt.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:a,it:s}=this;return(0,bt.or)(function(){if(r.length){if(!(t instanceof bt.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return bt._`${(0,yt.checkDataTypes)(e,t,s.opts.strictNumbers,yt.DataType.Wrong)}`}return bt.nil}(),function(){if(a.validateSchema){const r=e.scopeValue("validate$data",{ref:a.validateSchema});return bt._`!${r}(${t})`}return bt.nil}())}subschema(e,t){const r=(0,$t.getSubschema)(this.it,e);(0,$t.extendSubschemaData)(r,this.it,e),(0,$t.extendSubschemaMode)(r,e);const a={...this.it,...r,items:void 0,props:void 0};return xt(a,t),a}mergeEvaluated(e,t){const{it:r,gen:a}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=St.mergeEvaluated.props(a,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=St.mergeEvaluated.items(a,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:a}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return a.if(t,()=>this.mergeEvaluated(e,bt.Name)),!0}}function qt(e,t,r,a){const s=new Vt(e,r,t);"code"in r?r.code(s,a):s.$data&&r.validate?(0,_t.funcKeywordCode)(s,r):"macro"in r?(0,_t.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,_t.funcKeywordCode)(s,r)}O.KeywordCxt=Vt;const Ut=/^\/(?:[^~]|~0|~1)*$/,Ft=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Lt(e,{dataLevel:t,dataNames:r,dataPathArr:a}){let s,o;if(""===e)return wt.default.rootData;if("/"===e[0]){if(!Ut.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=wt.default.rootData}else{const n=Ft.exec(e);if(!n)throw new Error(`Invalid JSON-pointer: ${e}`);const i=+n[1];if(s=n[2],"#"===s){if(i>=t)throw new Error(l("property/index",i));return a[t-i]}if(i>t)throw new Error(l("data",i));if(o=r[t-i],!s)return o}let n=o;const i=s.split("/");for(const c of i)c&&(o=bt._`${o}${(0,bt.getProperty)((0,St.unescapeJsonPointer)(c))}`,n=bt._`${n} && ${o}`);return n;function l(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}O.getData=Lt;var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});class Gt extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}Kt.default=Gt;var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});const Bt=We;class Ht extends Error{constructor(e,t,r,a){super(a||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,Bt.resolveUrl)(e,t,r),this.missingSchema=(0,Bt.normalizeId)((0,Bt.getFullPath)(e,this.missingRef))}}Jt.default=Ht;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.resolveSchema=Wt.getCompilingSchema=Wt.resolveRef=Wt.compileSchema=Wt.SchemaEnv=void 0;const Qt=M,Zt=Kt,Xt=X,Yt=We,er=z,tr=O;class rr{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,Yt.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function ar(e){const t=or.call(this,e);if(t)return t;const r=(0,Yt.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:s}=this.opts.code,{ownProperties:o}=this.opts,n=new Qt.CodeGen(this.scope,{es5:a,lines:s,ownProperties:o});let i;e.$async&&(i=n.scopeValue("Error",{ref:Zt.default,code:Qt._`require("ajv/dist/runtime/validation_error").default`}));const l=n.scopeName("validate");e.validateName=l;const c={gen:n,allErrors:this.opts.allErrors,data:Xt.default.data,parentData:Xt.default.parentData,parentDataProperty:Xt.default.parentDataProperty,dataNames:[Xt.default.data],dataPathArr:[Qt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:n.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,Qt.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:i,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Qt.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:Qt._`""`,opts:this.opts,self:this};let d;try{this._compilations.add(e),(0,tr.validateFunctionCode)(c),n.optimize(this.opts.code.optimize);const t=n.toString();d=`${n.scopeRefs(Xt.default.scope)}return ${t}`,this.opts.code.process&&(d=this.opts.code.process(d,e));const r=new Function(`${Xt.default.self}`,`${Xt.default.scope}`,d)(this,this.scope.get());if(this.scope.value(l,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:l,validateCode:t,scopeValues:n._values}),this.opts.unevaluated){const{props:e,items:t}=c;r.evaluated={props:e instanceof Qt.Name?void 0:e,items:t instanceof Qt.Name?void 0:t,dynamicProps:e instanceof Qt.Name,dynamicItems:t instanceof Qt.Name},r.source&&(r.source.evaluated=(0,Qt.stringify)(r.evaluated))}return e.validate=r,e}catch(u){throw delete e.validate,delete e.validateName,d&&this.logger.error("Error compiling schema, function code:",d),u}finally{this._compilations.delete(e)}}function sr(e){return(0,Yt.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:ar.call(this,e)}function or(e){for(const t of this._compilations)if(nr(t,e))return t}function nr(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function ir(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||lr.call(this,e,t)}function lr(e,t){const r=this.opts.uriResolver.parse(t),a=(0,Yt._getFullPath)(this.opts.uriResolver,r);let s=(0,Yt.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&a===s)return dr.call(this,r,e);const o=(0,Yt.normalizeId)(a),n=this.refs[o]||this.schemas[o];if("string"==typeof n){const t=lr.call(this,e,n);if("object"!=typeof(null==t?void 0:t.schema))return;return dr.call(this,r,t)}if("object"==typeof(null==n?void 0:n.schema)){if(n.validate||ar.call(this,n),o===(0,Yt.normalizeId)(t)){const{schema:t}=n,{schemaId:r}=this.opts,a=t[r];return a&&(s=(0,Yt.resolveUrl)(this.opts.uriResolver,s,a)),new rr({schema:t,schemaId:r,root:e,baseId:s})}return dr.call(this,r,n)}}Wt.SchemaEnv=rr,Wt.compileSchema=ar,Wt.resolveRef=function(e,t,r){var a;r=(0,Yt.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=ir.call(this,e,r);if(void 0===o){const s=null===(a=e.localRefs)||void 0===a?void 0:a[r],{schemaId:n}=this.opts;s&&(o=new rr({schema:s,schemaId:n,root:e,baseId:t}))}return void 0!==o?e.refs[r]=sr.call(this,o):void 0},Wt.getCompilingSchema=or,Wt.resolveSchema=lr;const cr=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function dr(e,{baseId:t,schema:r,root:a}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const i of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,er.unescapeFragment)(i)];if(void 0===e)return;const a="object"==typeof(r=e)&&r[this.opts.schemaId];!cr.has(i)&&a&&(t=(0,Yt.resolveUrl)(this.opts.uriResolver,t,a))}let o;if("boolean"!=typeof r&&r.$ref&&!(0,er.schemaHasRulesButRef)(r,this.RULES)){const e=(0,Yt.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=lr.call(this,a,e)}const{schemaId:n}=this.opts;return o=o||new rr({schema:r,schemaId:n,root:a,baseId:t}),o.schema!==o.root.schema?o:void 0}const ur={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var mr={},pr={exports:{}};var fr={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}};const{HEX:hr}=fr,vr=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function yr(e){if(br(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(vr)||[],[r]=t;return r?{host:$r(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function gr(e,t=!1){let r="",a=!0;for(const s of e){if(void 0===hr[s])return;"0"!==s&&!0===a&&(a=!1),a||(r+=s)}return t&&0===r.length&&(r="0"),r}function _r(e){if(br(e,":")<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},a=[],s=[];let o=!1,n=!1,i=!1;function l(){if(s.length){if(!1===o){const e=gr(s);if(void 0===e)return r.error=!0,!1;a.push(e)}s.length=0}return!0}for(let c=0;c<e.length;c++){const d=e[c];if("["!==d&&"]"!==d)if(":"!==d)if("%"===d){if(!l())break;o=!0}else s.push(d);else{if(!0===n&&(i=!0),!l())break;if(t++,a.push(":"),t>7){r.error=!0;break}c-1>=0&&":"===e[c-1]&&(n=!0)}}return s.length&&(o?r.zone=s.join(""):i?a.push(s.join("")):a.push(gr(s))),r.address=a.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,escapedHost:r,isIPV6:!0}}}function $r(e,t){let r="",a=!0;const s=e.length;for(let o=0;o<s;o++){const n=e[o];"0"===n&&a?(o+1<=s&&e[o+1]===t||o+1===s)&&(r+=n,a=!1):(a=n===t,r+=n)}return r}function br(e,t){let r=0;for(let a=0;a<e.length;a++)e[a]===t&&r++;return r}const wr=/^\.\.?\//u,kr=/^\/\.(?:\/|$)/u,Sr=/^\/\.\.(?:\/|$)/u,Er=/^\/?(?:.|\n)*?(?=\/|$)/u;var Pr={recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host);const a=yr(r);if(a.isIPV4)r=a.host;else{const t=_r(a.host);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){const t=[];for(;e.length;)if(e.match(wr))e=e.replace(wr,"");else if(e.match(kr))e=e.replace(kr,"/");else if(e.match(Sr))e=e.replace(Sr,"/"),t.pop();else if("."===e||".."===e)e="";else{const r=e.match(Er);if(!r)throw new Error("Unexpected dot segment condition");{const a=r[0];e=e.slice(a.length),t.push(a)}}return t.join("")},normalizeIPv4:yr,normalizeIPv6:_r};const jr=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,xr=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Cr(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}function Nr(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Rr(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const Or={scheme:"http",domainHost:!0,parse:Nr,serialize:Rr},Ir={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=Cr(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(Cr(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},Tr={http:Or,https:{scheme:"https",domainHost:Or.domainHost,parse:Nr,serialize:Rr},ws:Ir,wss:{scheme:"wss",domainHost:Ir.domainHost,parse:Ir.parse,serialize:Ir.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(xr);if(r){const a=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${a}:${t.nid||e.nid}`,o=Tr[s];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){const r=t.scheme||e.scheme||"urn",a=e.nid.toLowerCase(),s=`${r}:${t.nid||a}`,o=Tr[s];o&&(e=o.serialize(e,t));const n=e,i=e.nss;return n.path=`${a||t.nid}:${i}`,t.skipEscape=!0,n},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&jr.test(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};var Mr=Tr;const{normalizeIPv6:Dr,normalizeIPv4:Ar,removeDotSegments:zr,recomposeAuthority:Vr,normalizeComponentEncoding:qr}=Pr,Ur=Mr;function Fr(e,t,r,a){const s={};return a||(e=Jr(Lr(e,r),r),t=Jr(Lr(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=zr(t.path||""),s.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=zr(t.path||""),s.query=t.query):(t.path?("/"===t.path.charAt(0)?s.path=zr(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path:s.path="/"+t.path,s.path=zr(s.path)),s.query=t.query):(s.path=e.path,void 0!==t.query?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Lr(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},a=Object.assign({},t),s=[],o=Ur[(a.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,a),void 0!==r.path&&(a.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==a.reference&&r.scheme&&s.push(r.scheme,":");const n=Vr(r);if(void 0!==n&&("suffix"!==a.reference&&s.push("//"),s.push(n),r.path&&"/"!==r.path.charAt(0)&&s.push("/")),void 0!==r.path){let e=r.path;a.absolutePath||o&&o.absolutePath||(e=zr(e)),void 0===n&&(e=e.replace(/^\/\//u,"/%2F")),s.push(e)}return void 0!==r.query&&s.push("?",r.query),void 0!==r.fragment&&s.push("#",r.fragment),s.join("")}const Kr=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));const Gr=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Jr(e,t){const r=Object.assign({},t),a={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=-1!==e.indexOf("%");let o=!1;"suffix"===r.reference&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const n=e.match(Gr);if(n){if(a.scheme=n[1],a.userinfo=n[3],a.host=n[4],a.port=parseInt(n[5],10),a.path=n[6]||"",a.query=n[7],a.fragment=n[8],isNaN(a.port)&&(a.port=n[5]),a.host){const e=Ar(a.host);if(!1===e.isIPV4){const t=Dr(e.host);a.host=t.host.toLowerCase(),o=t.isIPV6}else a.host=e.host,o=!0}void 0!==a.scheme||void 0!==a.userinfo||void 0!==a.host||void 0!==a.port||void 0!==a.query||a.path?void 0===a.scheme?a.reference="relative":void 0===a.fragment?a.reference="absolute":a.reference="uri":a.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==a.reference&&(a.error=a.error||"URI is not a "+r.reference+" reference.");const e=Ur[(r.scheme||a.scheme||"").toLowerCase()];if(!(r.unicodeSupport||e&&e.unicodeSupport)&&a.host&&(r.domainHost||e&&e.domainHost)&&!1===o&&function(e){let t=0;for(let r=0,a=e.length;r<a;++r)if(t=e.charCodeAt(r),t>126||Kr[t])return!0;return!1}(a.host))try{a.host=URL.domainToASCII(a.host.toLowerCase())}catch(i){a.error=a.error||"Host's domain name can not be converted to ASCII: "+i}(!e||e&&!e.skipNormalize)&&(s&&void 0!==a.scheme&&(a.scheme=unescape(a.scheme)),s&&void 0!==a.host&&(a.host=unescape(a.host)),a.path&&(a.path=escape(unescape(a.path))),a.fragment&&(a.fragment=encodeURI(decodeURIComponent(a.fragment)))),e&&e.parse&&e.parse(a,r)}else a.error=a.error||"URI can not be parsed.";return a}const Br={SCHEMES:Ur,normalize:function(e,t){return"string"==typeof e?e=Lr(Jr(e,t),t):"object"==typeof e&&(e=Jr(Lr(e,t),t)),e},resolve:function(e,t,r){const a=Object.assign({scheme:"null"},r);return Lr(Fr(Jr(e,a),Jr(t,a),a,!0),{...a,skipEscape:!0})},resolveComponents:Fr,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=Lr(qr(Jr(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=Lr(qr(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=Lr(qr(Jr(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=Lr(qr(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:Lr,parse:Jr};pr.exports=Br,pr.exports.default=Br,pr.exports.fastUri=Br;var Hr=pr.exports;Object.defineProperty(mr,"__esModule",{value:!0});const Wr=Hr;Wr.code='require("ajv/dist/runtime/uri").default',mr.default=Wr,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=O;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=M;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=Kt,s=Jt,o=ie,n=Wt,i=M,l=We,c=ne,d=z,u=ur,m=mr,p=(e,t)=>new RegExp(e,t);p.code="new RegExp";const f=["removeAdditional","useDefaults","coerceTypes"],h=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function g(e){var t,r,a,s,o,n,i,l,c,d,u,f,h,v,y,g,_,$,b,w,k,S,E,P,j;const x=e.strict,C=null===(t=e.code)||void 0===t?void 0:t.optimize,N=!0===C||void 0===C?1:C||0,R=null!==(a=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==a?a:p,O=null!==(s=e.uriResolver)&&void 0!==s?s:m.default;return{strictSchema:null===(n=null!==(o=e.strictSchema)&&void 0!==o?o:x)||void 0===n||n,strictNumbers:null===(l=null!==(i=e.strictNumbers)&&void 0!==i?i:x)||void 0===l||l,strictTypes:null!==(d=null!==(c=e.strictTypes)&&void 0!==c?c:x)&&void 0!==d?d:"log",strictTuples:null!==(f=null!==(u=e.strictTuples)&&void 0!==u?u:x)&&void 0!==f?f:"log",strictRequired:null!==(v=null!==(h=e.strictRequired)&&void 0!==h?h:x)&&void 0!==v&&v,code:e.code?{...e.code,optimize:N,regExp:R}:{optimize:N,regExp:R},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(g=e.loopEnum)&&void 0!==g?g:200,meta:null===(_=e.meta)||void 0===_||_,messages:null===($=e.messages)||void 0===$||$,inlineRefs:null===(b=e.inlineRefs)||void 0===b||b,schemaId:null!==(w=e.schemaId)&&void 0!==w?w:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(S=e.validateSchema)||void 0===S||S,validateFormats:null===(E=e.validateFormats)||void 0===E||E,unicodeRegExp:null===(P=e.unicodeRegExp)||void 0===P||P,int32range:null===(j=e.int32range)||void 0===j||j,uriResolver:O}}class _{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...g(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new i.ValueScope({scope:{},prefixes:h,es5:t,lines:r}),this.logger=function(e){if(!1===e)return P;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const a=e.validateFormats;e.validateFormats=!1,this.RULES=(0,o.getRules)(),$.call(this,v,e,"NOT SUPPORTED"),$.call(this,y,e,"DEPRECATED","warn"),this._metaOpts=E.call(this),e.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=a}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let a=u;"id"===r&&(a={...u},a.id=a.$id,delete a.$id),t&&e&&this.addMetaSchema(a,a[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const a=r(t);return"$async"in r||(this.errors=r.errors),a}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return a.call(this,e,t);async function a(e,t){await o.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||n.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await a.call(this,{$ref:e},!0)}async function n(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return i.call(this,t),await l.call(this,t.missingSchema),n.call(this,e)}}function i({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const r=await c.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,a=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,a);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,l.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,a,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const a=this.validate(r,e);if(!a&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return a}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,a=new n.SchemaEnv({schema:{},schemaId:r});if(t=n.resolveSchema.call(this,a,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,l.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(x.call(this,r,t),!t)return(0,d.eachItem)(r,e=>C.call(this,e)),this;R.call(this,t);const a={...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)};return(0,d.eachItem)(r,0===a.type.length?e=>C.call(this,e,a):e=>a.type.forEach(t=>C.call(this,e,a,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const a of t){const t=a.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:a}=t.definition,o=s[e];a&&o&&(s[e]=T(o))}}return e}_removeAllSchemas(e,t){for(const r in e){const a=e[r];t&&!t.test(r)||("string"==typeof a?delete e[r]:a&&!a.meta&&(this._cache.delete(a.schema),delete e[r]))}}_addSchema(e,t,r,a=this.opts.validateSchema,s=this.opts.addUsedSchema){let o;const{schemaId:i}=this.opts;if("object"==typeof e)o=e[i];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(void 0!==c)return c;r=(0,l.normalizeId)(o||r);const d=l.getSchemaRefs.call(this,e,r);return c=new n.SchemaEnv({schema:e,schemaId:i,meta:t,baseId:r,localRefs:d}),this._cache.set(c.schema,c),s&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=c),a&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):n.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{n.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,r,a="error"){for(const s in e){const o=s;o in t&&this.logger[a](`${r}: option ${s}. ${e[o]}`)}}function b(e){return e=(0,l.normalizeId)(e),this.schemas[e]||this.refs[e]}function w(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function k(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function E(){const e={...this.opts};for(const t of f)delete e[t];return e}_.ValidationError=a.default,_.MissingRefError=s.default,e.default=_;const P={log(){},warn(){},error(){}};const j=/^[a-z_$][a-z0-9_$:-]*$/i;function x(e,t){const{RULES:r}=this;if((0,d.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!j.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function C(e,t,r){var a;const s=null==t?void 0:t.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let n=s?o.post:o.rules.find(({type:e})=>e===r);if(n||(n={type:r,rules:[]},o.rules.push(n)),o.keywords[e]=!0,!t)return;const i={keyword:e,definition:{...t,type:(0,c.getJSONTypes)(t.type),schemaType:(0,c.getJSONTypes)(t.schemaType)}};t.before?N.call(this,n,i,t.before):n.rules.push(i),o.all[e]=i,null===(a=t.implements)||void 0===a||a.forEach(e=>this.addKeyword(e))}function N(e,t,r){const a=e.rules.findIndex(e=>e.keyword===r);a>=0?e.rules.splice(a,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function R(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=T(t)),e.validateSchema=this.compile(t,!0))}const I={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function T(e){return{anyOf:[e,I]}}}(R);var Qr={},Zr={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});const Yr={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Xr.default=Yr;var ea={};Object.defineProperty(ea,"__esModule",{value:!0}),ea.callRef=ea.getValidate=void 0;const ta=Jt,ra=Ne,aa=M,sa=X,oa=Wt,na=z,ia={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:a}=e,{baseId:s,schemaEnv:o,validateName:n,opts:i,self:l}=a,{root:c}=o;if(("#"===r||"#/"===r)&&s===c.baseId)return function(){if(o===c)return ca(e,n,o,o.$async);const r=t.scopeValue("root",{ref:c});return ca(e,aa._`${r}.validate`,c,c.$async)}();const d=oa.resolveRef.call(l,c,s,r);if(void 0===d)throw new ta.default(a.opts.uriResolver,s,r);return d instanceof oa.SchemaEnv?function(t){const r=la(e,t);ca(e,r,t,t.$async)}(d):function(a){const s=t.scopeValue("schema",!0===i.code.source?{ref:a,code:(0,aa.stringify)(a)}:{ref:a}),o=t.name("valid"),n=e.subschema({schema:a,dataTypes:[],schemaPath:aa.nil,topSchemaRef:s,errSchemaPath:r},o);e.mergeEvaluated(n),e.ok(o)}(d)}};function la(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):aa._`${r.scopeValue("wrapper",{ref:t})}.validate`}function ca(e,t,r,a){const{gen:s,it:o}=e,{allErrors:n,schemaEnv:i,opts:l}=o,c=l.passContext?sa.default.this:aa.nil;function d(e){const t=aa._`${e}.errors`;s.assign(sa.default.vErrors,aa._`${sa.default.vErrors} === null ? ${t} : ${sa.default.vErrors}.concat(${t})`),s.assign(sa.default.errors,aa._`${sa.default.vErrors}.length`)}function u(e){var t;if(!o.opts.unevaluated)return;const a=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==o.props)if(a&&!a.dynamicProps)void 0!==a.props&&(o.props=na.mergeEvaluated.props(s,a.props,o.props));else{const t=s.var("props",aa._`${e}.evaluated.props`);o.props=na.mergeEvaluated.props(s,t,o.props,aa.Name)}if(!0!==o.items)if(a&&!a.dynamicItems)void 0!==a.items&&(o.items=na.mergeEvaluated.items(s,a.items,o.items));else{const t=s.var("items",aa._`${e}.evaluated.items`);o.items=na.mergeEvaluated.items(s,t,o.items,aa.Name)}}a?function(){if(!i.$async)throw new Error("async schema referenced by sync schema");const r=s.let("valid");s.try(()=>{s.code(aa._`await ${(0,ra.callValidateCode)(e,t,c)}`),u(t),n||s.assign(r,!0)},e=>{s.if(aa._`!(${e} instanceof ${o.ValidationError})`,()=>s.throw(e)),d(e),n||s.assign(r,!1)}),e.ok(r)}():e.result((0,ra.callValidateCode)(e,t,c),()=>u(t),()=>d(t))}ea.getValidate=la,ea.callRef=ca,ea.default=ia,Object.defineProperty(Zr,"__esModule",{value:!0});const da=ea,ua=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Xr.default,da.default];Zr.default=ua;var ma={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});const fa=M,ha=fa.operators,va={maximum:{okStr:"<=",ok:ha.LTE,fail:ha.GT},minimum:{okStr:">=",ok:ha.GTE,fail:ha.LT},exclusiveMaximum:{okStr:"<",ok:ha.LT,fail:ha.GTE},exclusiveMinimum:{okStr:">",ok:ha.GT,fail:ha.LTE}},ya={message:({keyword:e,schemaCode:t})=>fa.str`must be ${va[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>fa._`{comparison: ${va[e].okStr}, limit: ${t}}`},ga={keyword:Object.keys(va),type:"number",schemaType:"number",$data:!0,error:ya,code(e){const{keyword:t,data:r,schemaCode:a}=e;e.fail$data(fa._`${r} ${va[t].fail} ${a} || isNaN(${r})`)}};pa.default=ga;var _a={};Object.defineProperty(_a,"__esModule",{value:!0});const $a=M,ba={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>$a.str`must be multiple of ${e}`,params:({schemaCode:e})=>$a._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:a,it:s}=e,o=s.opts.multipleOfPrecision,n=t.let("res"),i=o?$a._`Math.abs(Math.round(${n}) - ${n}) > 1e-${o}`:$a._`${n} !== parseInt(${n})`;e.fail$data($a._`(${a} === 0 || (${n} = ${r}/${a}, ${i}))`)}};_a.default=ba;var wa={},ka={};function Sa(e){const t=e.length;let r,a=0,s=0;for(;s<t;)a++,r=e.charCodeAt(s++),r>=55296&&r<=56319&&s<t&&(r=e.charCodeAt(s),56320==(64512&r)&&s++);return a}Object.defineProperty(ka,"__esModule",{value:!0}),ka.default=Sa,Sa.code='require("ajv/dist/runtime/ucs2length").default',Object.defineProperty(wa,"__esModule",{value:!0});const Ea=M,Pa=z,ja=ka,xa={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Ea.str`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>Ea._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:a,it:s}=e,o="maxLength"===t?Ea.operators.GT:Ea.operators.LT,n=!1===s.opts.unicode?Ea._`${r}.length`:Ea._`${(0,Pa.useFunc)(e.gen,ja.default)}(${r})`;e.fail$data(Ea._`${n} ${o} ${a}`)}};wa.default=xa;var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});const Na=Ne,Ra=M,Oa={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Ra.str`must match pattern "${e}"`,params:({schemaCode:e})=>Ra._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:a,schemaCode:s,it:o}=e,n=o.opts.unicodeRegExp?"u":"",i=r?Ra._`(new RegExp(${s}, ${n}))`:(0,Na.usePattern)(e,a);e.fail$data(Ra._`!${i}.test(${t})`)}};Ca.default=Oa;var Ia={};Object.defineProperty(Ia,"__esModule",{value:!0});const Ta=M,Ma={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Ta.str`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>Ta._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:a}=e,s="maxProperties"===t?Ta.operators.GT:Ta.operators.LT;e.fail$data(Ta._`Object.keys(${r}).length ${s} ${a}`)}};Ia.default=Ma;var Da={};Object.defineProperty(Da,"__esModule",{value:!0});const Aa=Ne,za=M,Va=z,qa={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>za.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>za._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:a,data:s,$data:o,it:n}=e,{opts:i}=n;if(!o&&0===r.length)return;const l=r.length>=i.loopRequired;if(n.allErrors?function(){if(l||o)e.block$data(za.nil,c);else for(const t of r)(0,Aa.checkReportMissingProp)(e,t)}():function(){const n=t.let("missing");if(l||o){const r=t.let("valid",!0);e.block$data(r,()=>function(r,o){e.setParams({missingProperty:r}),t.forOf(r,a,()=>{t.assign(o,(0,Aa.propertyInData)(t,s,r,i.ownProperties)),t.if((0,za.not)(o),()=>{e.error(),t.break()})},za.nil)}(n,r)),e.ok(r)}else t.if((0,Aa.checkMissingProp)(e,r,n)),(0,Aa.reportMissingProp)(e,n),t.else()}(),i.strictRequired){const t=e.parentSchema.properties,{definedProperties:a}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!a.has(e)){const t=`required property "${e}" is not defined at "${n.schemaEnv.baseId+n.errSchemaPath}" (strictRequired)`;(0,Va.checkStrictMode)(n,t,n.opts.strictRequired)}}function c(){t.forOf("prop",a,r=>{e.setParams({missingProperty:r}),t.if((0,Aa.noPropertyInData)(t,s,r,i.ownProperties),()=>e.error())})}}};Da.default=qa;var Ua={};Object.defineProperty(Ua,"__esModule",{value:!0});const Fa=M,La={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>Fa.str`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>Fa._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:a}=e,s="maxItems"===t?Fa.operators.GT:Fa.operators.LT;e.fail$data(Fa._`${r}.length ${s} ${a}`)}};Ua.default=La;var Ka={},Ga={};Object.defineProperty(Ga,"__esModule",{value:!0});const Ja=Qe;Ja.code='require("ajv/dist/runtime/equal").default',Ga.default=Ja,Object.defineProperty(Ka,"__esModule",{value:!0});const Ba=ne,Ha=M,Wa=z,Qa=Ga,Za={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>Ha.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>Ha._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:a,schema:s,parentSchema:o,schemaCode:n,it:i}=e;if(!a&&!s)return;const l=t.let("valid"),c=o.items?(0,Ba.getSchemaTypes)(o.items):[];function d(a,s){const o=t.name("item"),n=(0,Ba.checkDataTypes)(c,o,i.opts.strictNumbers,Ba.DataType.Wrong),d=t.const("indices",Ha._`{}`);t.for(Ha._`;${a}--;`,()=>{t.let(o,Ha._`${r}[${a}]`),t.if(n,Ha._`continue`),c.length>1&&t.if(Ha._`typeof ${o} == "string"`,Ha._`${o} += "_"`),t.if(Ha._`typeof ${d}[${o}] == "number"`,()=>{t.assign(s,Ha._`${d}[${o}]`),e.error(),t.assign(l,!1).break()}).code(Ha._`${d}[${o}] = ${a}`)})}function u(a,s){const o=(0,Wa.useFunc)(t,Qa.default),n=t.name("outer");t.label(n).for(Ha._`;${a}--;`,()=>t.for(Ha._`${s} = ${a}; ${s}--;`,()=>t.if(Ha._`${o}(${r}[${a}], ${r}[${s}])`,()=>{e.error(),t.assign(l,!1).break(n)})))}e.block$data(l,function(){const a=t.let("i",Ha._`${r}.length`),s=t.let("j");e.setParams({i:a,j:s}),t.assign(l,!0),t.if(Ha._`${a} > 1`,()=>(c.length>0&&!c.some(e=>"object"===e||"array"===e)?d:u)(a,s))},Ha._`${n} === false`),e.ok(l)}};Ka.default=Za;var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});const Ya=M,es=z,ts=Ga,rs={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>Ya._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:a,schemaCode:s,schema:o}=e;a||o&&"object"==typeof o?e.fail$data(Ya._`!${(0,es.useFunc)(t,ts.default)}(${r}, ${s})`):e.fail(Ya._`${o} !== ${r}`)}};Xa.default=rs;var as={};Object.defineProperty(as,"__esModule",{value:!0});const ss=M,os=z,ns=Ga,is={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>ss._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:a,schema:s,schemaCode:o,it:n}=e;if(!a&&0===s.length)throw new Error("enum must have non-empty array");const i=s.length>=n.opts.loopEnum;let l;const c=()=>null!=l?l:l=(0,os.useFunc)(t,ns.default);let d;if(i||a)d=t.let("valid"),e.block$data(d,function(){t.assign(d,!1),t.forOf("v",o,e=>t.if(ss._`${c()}(${r}, ${e})`,()=>t.assign(d,!0).break()))});else{if(!Array.isArray(s))throw new Error("ajv implementation error");const e=t.const("vSchema",o);d=(0,ss.or)(...s.map((t,a)=>function(e,t){const a=s[t];return"object"==typeof a&&null!==a?ss._`${c()}(${r}, ${e}[${t}])`:ss._`${r} === ${a}`}(e,a)))}e.pass(d)}};as.default=is,Object.defineProperty(ma,"__esModule",{value:!0});const ls=_a,cs=wa,ds=Ca,us=Ia,ms=Da,ps=Ua,fs=Ka,hs=Xa,vs=as,ys=[pa.default,ls.default,cs.default,ds.default,us.default,ms.default,ps.default,fs.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},hs.default,vs.default];ma.default=ys;var gs={},_s={};Object.defineProperty(_s,"__esModule",{value:!0}),_s.validateAdditionalItems=void 0;const $s=M,bs=z,ws={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>$s.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>$s._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:a}=t;Array.isArray(a)?ks(e,a):(0,bs.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function ks(e,t){const{gen:r,schema:a,data:s,keyword:o,it:n}=e;n.items=!0;const i=r.const("len",$s._`${s}.length`);if(!1===a)e.setParams({len:t.length}),e.pass($s._`${i} <= ${t.length}`);else if("object"==typeof a&&!(0,bs.alwaysValidSchema)(n,a)){const a=r.var("valid",$s._`${i} <= ${t.length}`);r.if((0,$s.not)(a),()=>function(a){r.forRange("i",t.length,i,t=>{e.subschema({keyword:o,dataProp:t,dataPropType:bs.Type.Num},a),n.allErrors||r.if((0,$s.not)(a),()=>r.break())})}(a)),e.ok(a)}}_s.validateAdditionalItems=ks,_s.default=ws;var Ss={},Es={};Object.defineProperty(Es,"__esModule",{value:!0}),Es.validateTuple=void 0;const Ps=M,js=z,xs=Ne,Cs={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Ns(e,"additionalItems",t);r.items=!0,(0,js.alwaysValidSchema)(r,t)||e.ok((0,xs.validateArray)(e))}};function Ns(e,t,r=e.schema){const{gen:a,parentSchema:s,data:o,keyword:n,it:i}=e;!function(e){const{opts:a,errSchemaPath:s}=i,o=r.length,l=o===e.minItems&&(o===e.maxItems||!1===e[t]);if(a.strictTuples&&!l){const e=`"${n}" is ${o}-tuple, but minItems or maxItems/${t} are not specified or different at path "${s}"`;(0,js.checkStrictMode)(i,e,a.strictTuples)}}(s),i.opts.unevaluated&&r.length&&!0!==i.items&&(i.items=js.mergeEvaluated.items(a,r.length,i.items));const l=a.name("valid"),c=a.const("len",Ps._`${o}.length`);r.forEach((t,r)=>{(0,js.alwaysValidSchema)(i,t)||(a.if(Ps._`${c} > ${r}`,()=>e.subschema({keyword:n,schemaProp:r,dataProp:r},l)),e.ok(l))})}Es.validateTuple=Ns,Es.default=Cs,Object.defineProperty(Ss,"__esModule",{value:!0});const Rs=Es,Os={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Rs.validateTuple)(e,"items")};Ss.default=Os;var Is={};Object.defineProperty(Is,"__esModule",{value:!0});const Ts=M,Ms=z,Ds=Ne,As=_s,zs={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>Ts.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>Ts._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:a}=e,{prefixItems:s}=r;a.items=!0,(0,Ms.alwaysValidSchema)(a,t)||(s?(0,As.validateAdditionalItems)(e,s):e.ok((0,Ds.validateArray)(e)))}};Is.default=zs;var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});const qs=M,Us=z,Fs={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?qs.str`must contain at least ${e} valid item(s)`:qs.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?qs._`{minContains: ${e}}`:qs._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:s,it:o}=e;let n,i;const{minContains:l,maxContains:c}=a;o.opts.next?(n=void 0===l?1:l,i=c):n=1;const d=t.const("len",qs._`${s}.length`);if(e.setParams({min:n,max:i}),void 0===i&&0===n)return void(0,Us.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==i&&n>i)return(0,Us.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,Us.alwaysValidSchema)(o,r)){let t=qs._`${d} >= ${n}`;return void 0!==i&&(t=qs._`${t} && ${d} <= ${i}`),void e.pass(t)}o.items=!0;const u=t.name("valid");function m(){const e=t.name("_valid"),r=t.let("count",0);p(e,()=>t.if(e,()=>function(e){t.code(qs._`${e}++`),void 0===i?t.if(qs._`${e} >= ${n}`,()=>t.assign(u,!0).break()):(t.if(qs._`${e} > ${i}`,()=>t.assign(u,!1).break()),1===n?t.assign(u,!0):t.if(qs._`${e} >= ${n}`,()=>t.assign(u,!0)))}(r)))}function p(r,a){t.forRange("i",0,d,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:Us.Type.Num,compositeRule:!0},r),a()})}void 0===i&&1===n?p(u,()=>t.if(u,()=>t.break())):0===n?(t.let(u,!0),void 0!==i&&t.if(qs._`${s}.length > 0`,m)):(t.let(u,!1),m()),e.result(u,()=>e.reset())}};Vs.default=Fs;var Ls={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=M,r=z,a=Ne;e.error={message:({params:{property:e,depsCount:r,deps:a}})=>t.str`must have ${1===r?"property":"properties"} ${a} when property ${e} is present`,params:({params:{property:e,depsCount:r,deps:a,missingProperty:s}})=>t._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${r},
    deps: ${a}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const a in e){if("__proto__"===a)continue;(Array.isArray(e[a])?t:r)[a]=e[a]}return[t,r]}(e);o(e,t),n(e,r)}};function o(e,r=e.schema){const{gen:s,data:o,it:n}=e;if(0===Object.keys(r).length)return;const i=s.let("missing");for(const l in r){const c=r[l];if(0===c.length)continue;const d=(0,a.propertyInData)(s,o,l,n.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),n.allErrors?s.if(d,()=>{for(const t of c)(0,a.checkReportMissingProp)(e,t)}):(s.if(t._`${d} && (${(0,a.checkMissingProp)(e,c,i)})`),(0,a.reportMissingProp)(e,i),s.else())}}function n(e,t=e.schema){const{gen:s,data:o,keyword:n,it:i}=e,l=s.name("valid");for(const c in t)(0,r.alwaysValidSchema)(i,t[c])||(s.if((0,a.propertyInData)(s,o,c,i.opts.ownProperties),()=>{const t=e.subschema({keyword:n,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>s.var(l,!0)),e.ok(l))}e.validatePropertyDeps=o,e.validateSchemaDeps=n,e.default=s}(Ls);var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});const Gs=M,Js=z,Bs={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>Gs._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:a,it:s}=e;if((0,Js.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",a,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},o),t.if((0,Gs.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};Ks.default=Bs;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});const Ws=Ne,Qs=M,Zs=X,Xs=z,Ys={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>Qs._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:s,errsCount:o,it:n}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:i,opts:l}=n;if(n.props=!0,"all"!==l.removeAdditional&&(0,Xs.alwaysValidSchema)(n,r))return;const c=(0,Ws.allSchemaProperties)(a.properties),d=(0,Ws.allSchemaProperties)(a.patternProperties);function u(e){t.code(Qs._`delete ${s}[${e}]`)}function m(a){if("all"===l.removeAdditional||l.removeAdditional&&!1===r)u(a);else{if(!1===r)return e.setParams({additionalProperty:a}),e.error(),void(i||t.break());if("object"==typeof r&&!(0,Xs.alwaysValidSchema)(n,r)){const r=t.name("valid");"failing"===l.removeAdditional?(p(a,r,!1),t.if((0,Qs.not)(r),()=>{e.reset(),u(a)})):(p(a,r),i||t.if((0,Qs.not)(r),()=>t.break()))}}}function p(t,r,a){const s={keyword:"additionalProperties",dataProp:t,dataPropType:Xs.Type.Str};!1===a&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,r)}t.forIn("key",s,r=>{c.length||d.length?t.if(function(r){let s;if(c.length>8){const e=(0,Xs.schemaRefOrVal)(n,a.properties,"properties");s=(0,Ws.isOwnProperty)(t,e,r)}else s=c.length?(0,Qs.or)(...c.map(e=>Qs._`${r} === ${e}`)):Qs.nil;return d.length&&(s=(0,Qs.or)(s,...d.map(t=>Qs._`${(0,Ws.usePattern)(e,t)}.test(${r})`))),(0,Qs.not)(s)}(r),()=>m(r)):m(r)}),e.ok(Qs._`${o} === ${Zs.default.errors}`)}};Hs.default=Ys;var eo={};Object.defineProperty(eo,"__esModule",{value:!0});const to=O,ro=Ne,ao=z,so=Hs,oo={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:s,it:o}=e;"all"===o.opts.removeAdditional&&void 0===a.additionalProperties&&so.default.code(new to.KeywordCxt(o,so.default,"additionalProperties"));const n=(0,ro.allSchemaProperties)(r);for(const u of n)o.definedProperties.add(u);o.opts.unevaluated&&n.length&&!0!==o.props&&(o.props=ao.mergeEvaluated.props(t,(0,ao.toHash)(n),o.props));const i=n.filter(e=>!(0,ao.alwaysValidSchema)(o,r[e]));if(0===i.length)return;const l=t.name("valid");for(const u of i)c(u)?d(u):(t.if((0,ro.propertyInData)(t,s,u,o.opts.ownProperties)),d(u),o.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(u),e.ok(l);function c(e){return o.opts.useDefaults&&!o.compositeRule&&void 0!==r[e].default}function d(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},l)}}};eo.default=oo;var no={};Object.defineProperty(no,"__esModule",{value:!0});const io=Ne,lo=M,co=z,uo=z,mo={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:s,it:o}=e,{opts:n}=o,i=(0,io.allSchemaProperties)(r),l=i.filter(e=>(0,co.alwaysValidSchema)(o,r[e]));if(0===i.length||l.length===i.length&&(!o.opts.unevaluated||!0===o.props))return;const c=n.strictSchema&&!n.allowMatchingProperties&&s.properties,d=t.name("valid");!0===o.props||o.props instanceof lo.Name||(o.props=(0,uo.evaluatedPropsToName)(t,o.props));const{props:u}=o;function m(e){for(const t in c)new RegExp(e).test(t)&&(0,co.checkStrictMode)(o,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function p(r){t.forIn("key",a,a=>{t.if(lo._`${(0,io.usePattern)(e,r)}.test(${a})`,()=>{const s=l.includes(r);s||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:a,dataPropType:uo.Type.Str},d),o.opts.unevaluated&&!0!==u?t.assign(lo._`${u}[${a}]`,!0):s||o.allErrors||t.if((0,lo.not)(d),()=>t.break())})})}!function(){for(const e of i)c&&m(e),o.allErrors?p(e):(t.var(d,!0),p(e),t.if(d))}()}};no.default=mo;var po={};Object.defineProperty(po,"__esModule",{value:!0});const fo=z,ho={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:a}=e;if((0,fo.alwaysValidSchema)(a,r))return void e.fail();const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};po.default=ho;var vo={};Object.defineProperty(vo,"__esModule",{value:!0});const yo={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ne.validateUnion,error:{message:"must match a schema in anyOf"}};vo.default=yo;var go={};Object.defineProperty(go,"__esModule",{value:!0});const _o=M,$o=z,bo={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>_o._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:a,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&a.discriminator)return;const o=r,n=t.let("valid",!1),i=t.let("passing",null),l=t.name("_valid");e.setParams({passing:i}),t.block(function(){o.forEach((r,a)=>{let o;(0,$o.alwaysValidSchema)(s,r)?t.var(l,!0):o=e.subschema({keyword:"oneOf",schemaProp:a,compositeRule:!0},l),a>0&&t.if(_o._`${l} && ${n}`).assign(n,!1).assign(i,_o._`[${i}, ${a}]`).else(),t.if(l,()=>{t.assign(n,!0),t.assign(i,a),o&&e.mergeEvaluated(o,_o.Name)})})}),e.result(n,()=>e.reset(),()=>e.error(!0))}};go.default=bo;var wo={};Object.defineProperty(wo,"__esModule",{value:!0});const ko=z,So={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((t,r)=>{if((0,ko.alwaysValidSchema)(a,t))return;const o=e.subschema({keyword:"allOf",schemaProp:r},s);e.ok(s),e.mergeEvaluated(o)})}};wo.default=So;var Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});const Po=M,jo=z,xo={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>Po.str`must match "${e.ifClause}" schema`,params:({params:e})=>Po._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:a}=e;void 0===r.then&&void 0===r.else&&(0,jo.checkStrictMode)(a,'"if" without "then" and "else" is ignored');const s=Co(a,"then"),o=Co(a,"else");if(!s&&!o)return;const n=t.let("valid",!0),i=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},i);e.mergeEvaluated(t)}(),e.reset(),s&&o){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(i,l("then",r),l("else",r))}else s?t.if(i,l("then")):t.if((0,Po.not)(i),l("else"));function l(r,a){return()=>{const s=e.subschema({keyword:r},i);t.assign(n,i),e.mergeValidEvaluated(s,n),a?t.assign(a,Po._`${r}`):e.setParams({ifClause:r})}}e.pass(n,()=>e.error(!0))}};function Co(e,t){const r=e.schema[t];return void 0!==r&&!(0,jo.alwaysValidSchema)(e,r)}Eo.default=xo;var No={};Object.defineProperty(No,"__esModule",{value:!0});const Ro=z,Oo={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,Ro.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};No.default=Oo,Object.defineProperty(gs,"__esModule",{value:!0});const Io=_s,To=Ss,Mo=Es,Do=Is,Ao=Vs,zo=Ls,Vo=Ks,qo=Hs,Uo=eo,Fo=no,Lo=po,Ko=vo,Go=go,Jo=wo,Bo=Eo,Ho=No;gs.default=function(e=!1){const t=[Lo.default,Ko.default,Go.default,Jo.default,Bo.default,Ho.default,Vo.default,qo.default,zo.default,Uo.default,Fo.default];return e?t.push(To.default,Do.default):t.push(Io.default,Mo.default),t.push(Ao.default),t};var Wo={},Qo={};Object.defineProperty(Qo,"__esModule",{value:!0});const Zo=M,Xo={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>Zo.str`must match format "${e}"`,params:({schemaCode:e})=>Zo._`{format: ${e}}`},code(e,t){const{gen:r,data:a,$data:s,schema:o,schemaCode:n,it:i}=e,{opts:l,errSchemaPath:c,schemaEnv:d,self:u}=i;l.validateFormats&&(s?function(){const s=r.scopeValue("formats",{ref:u.formats,code:l.code.formats}),o=r.const("fDef",Zo._`${s}[${n}]`),i=r.let("fType"),c=r.let("format");r.if(Zo._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,()=>r.assign(i,Zo._`${o}.type || "string"`).assign(c,Zo._`${o}.validate`),()=>r.assign(i,Zo._`"string"`).assign(c,o)),e.fail$data((0,Zo.or)(!1===l.strictSchema?Zo.nil:Zo._`${n} && !${c}`,function(){const e=d.$async?Zo._`(${o}.async ? await ${c}(${a}) : ${c}(${a}))`:Zo._`${c}(${a})`,r=Zo._`(typeof ${c} == "function" ? ${e} : ${c}.test(${a}))`;return Zo._`${c} && ${c} !== true && ${i} === ${t} && !${r}`}()))}():function(){const s=u.formats[o];if(!s)return void function(){if(!1===l.strictSchema)return void u.logger.warn(e());throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${c}"`}}();if(!0===s)return;const[n,i,m]=function(e){const t=e instanceof RegExp?(0,Zo.regexpCode)(e):l.code.formats?Zo._`${l.code.formats}${(0,Zo.getProperty)(o)}`:void 0,a=r.scopeValue("formats",{key:o,ref:e,code:t});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,Zo._`${a}.validate`];return["string",e,a]}(s);n===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!d.$async)throw new Error("async format in sync schema");return Zo._`await ${m}(${a})`}return"function"==typeof i?Zo._`${m}(${a})`:Zo._`${m}.test(${a})`}())}())}};Qo.default=Xo,Object.defineProperty(Wo,"__esModule",{value:!0});const Yo=[Qo.default];Wo.default=Yo;var en={};Object.defineProperty(en,"__esModule",{value:!0}),en.contentVocabulary=en.metadataVocabulary=void 0,en.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],en.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"],Object.defineProperty(Qr,"__esModule",{value:!0});const tn=ma,rn=gs,an=Wo,sn=en,on=[Zr.default,tn.default,(0,rn.default)(),an.default,sn.metadataVocabulary,sn.contentVocabulary];Qr.default=on;var nn,ln,cn={},dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.DiscrError=void 0,(ln=nn||(dn.DiscrError=nn={})).Tag="tag",ln.Mapping="mapping",Object.defineProperty(cn,"__esModule",{value:!0});const un=M,mn=dn,pn=Wt,fn=Jt,hn=z,vn={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===mn.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>un._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:a,parentSchema:s,it:o}=e,{oneOf:n}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const i=a.propertyName;if("string"!=typeof i)throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!n)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),c=t.const("tag",un._`${r}${(0,un.getProperty)(i)}`);function d(r){const a=t.name("valid"),s=e.subschema({keyword:"oneOf",schemaProp:r},a);return e.mergeEvaluated(s,un.Name),a}t.if(un._`typeof ${c} == "string"`,()=>function(){const r=function(){var e;const t={},r=l(s);let a=!0;for(let s=0;s<n.length;s++){let t=n[s];if((null==t?void 0:t.$ref)&&!(0,hn.schemaHasRulesButRef)(t,o.self.RULES)){const e=t.$ref;if(t=pn.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,e),t instanceof pn.SchemaEnv&&(t=t.schema),void 0===t)throw new fn.default(o.opts.uriResolver,o.baseId,e)}const d=null===(e=null==t?void 0:t.properties)||void 0===e?void 0:e[i];if("object"!=typeof d)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${i}"`);a=a&&(r||l(t)),c(d,s)}if(!a)throw new Error(`discriminator: "${i}" must be required`);return t;function l({required:e}){return Array.isArray(e)&&e.includes(i)}function c(e,t){if(e.const)d(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${i}" must have "const" or "enum"`);for(const r of e.enum)d(r,t)}}function d(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${i}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(un._`${c} === ${e}`),t.assign(l,d(r[e]));t.else(),e.error(!1,{discrError:mn.DiscrError.Mapping,tag:c,tagName:i}),t.endIf()}(),()=>e.error(!1,{discrError:mn.DiscrError.Tag,tag:c,tagName:i})),e.ok(l)}};cn.default=vn;const yn={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};!function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=R,a=Qr,s=cn,o=yn,n=["/properties"],i="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(o,n):o;this.addMetaSchema(e,i,!1),this.refs["http://json-schema.org/schema"]=i}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(i)?i:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var c=O;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var d=M;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var u=Kt;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return u.default}});var m=Jt;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})}(N,N.exports);var gn=N.exports;const _n=C(gn);var $n={exports:{}},bn={};!function(e){function t(e,t){return{validate:e,compare:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0,e.fullFormats={date:t(s,o),time:t(i(!0),l),"date-time":t(u(!0),m),"iso-time":t(i(),c),"iso-date-time":t(u(),p),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&h.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if($.test(e))return!1;try{return new RegExp(e),!0}catch(t){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return v.lastIndex=0,v.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=g&&e>=y}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:_},double:{type:"number",validate:_},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,m),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,p),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(e){const t=r.exec(e);if(!t)return!1;const s=+t[1],o=+t[2],n=+t[3];return o>=1&&o<=12&&n>=1&&n<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(s)?29:a[o])}function o(e,t){if(e&&t)return e>t?1:e<t?-1:0}const n=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function i(e){return function(t){const r=n.exec(t);if(!r)return!1;const a=+r[1],s=+r[2],o=+r[3],i=r[4],l="-"===r[5]?-1:1,c=+(r[6]||0),d=+(r[7]||0);if(c>23||d>59||e&&!i)return!1;if(a<=23&&s<=59&&o<60)return!0;const u=s-d*l,m=a-c*l-(u<0?1:0);return(23===m||-1===m)&&(59===u||-1===u)&&o<61}}function l(e,t){if(!e||!t)return;const r=new Date("2020-01-01T"+e).valueOf(),a=new Date("2020-01-01T"+t).valueOf();return r&&a?r-a:void 0}function c(e,t){if(!e||!t)return;const r=n.exec(e),a=n.exec(t);return r&&a?(e=r[1]+r[2]+r[3])>(t=a[1]+a[2]+a[3])?1:e<t?-1:0:void 0}const d=/t|\s/i;function u(e){const t=i(e);return function(e){const r=e.split(d);return 2===r.length&&s(r[0])&&t(r[1])}}function m(e,t){if(!e||!t)return;const r=new Date(e).valueOf(),a=new Date(t).valueOf();return r&&a?r-a:void 0}function p(e,t){if(!e||!t)return;const[r,a]=e.split(d),[s,n]=t.split(d),i=o(r,s);return void 0!==i?i||l(a,n):void 0}const f=/\/|:/,h=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const v=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;const y=-2147483648,g=2**31-1;function _(){return!0}const $=/[^\\]\\Z/}(bn);var wn={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=gn,r=M,a=r.operators,s={formatMaximum:{okStr:"<=",ok:a.LTE,fail:a.GT},formatMinimum:{okStr:">=",ok:a.GTE,fail:a.LT},formatExclusiveMaximum:{okStr:"<",ok:a.LT,fail:a.GTE},formatExclusiveMinimum:{okStr:">",ok:a.GT,fail:a.LTE}},o={message:({keyword:e,schemaCode:t})=>r.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${s[e].okStr}, limit: ${t}}`};e.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:o,code(e){const{gen:a,data:o,schemaCode:n,keyword:i,it:l}=e,{opts:c,self:d}=l;if(!c.validateFormats)return;const u=new t.KeywordCxt(l,d.RULES.all.format.definition,"format");function m(e){return r._`${e}.compare(${o}, ${n}) ${s[i].fail} 0`}u.$data?function(){const t=a.scopeValue("formats",{ref:d.formats,code:c.code.formats}),s=a.const("fmt",r._`${t}[${u.schemaCode}]`);e.fail$data((0,r.or)(r._`typeof ${s} != "object"`,r._`${s} instanceof RegExp`,r._`typeof ${s}.compare != "function"`,m(s)))}():function(){const t=u.schema,s=d.formats[t];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw new Error(`"${i}": format "${t}" does not define "compare" function`);const o=a.scopeValue("formats",{key:t,ref:s,code:c.code.formats?r._`${c.code.formats}${(0,r.getProperty)(t)}`:void 0});e.fail$data(m(o))}()},dependencies:["format"]};e.default=t=>(t.addKeyword(e.formatLimitDefinition),t)}(wn),function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=bn,a=wn,s=M,o=new s.Name("fullFormats"),n=new s.Name("fastFormats"),i=(e,t={keywords:!0})=>{if(Array.isArray(t))return l(e,t,r.fullFormats,o),e;const[s,i]="fast"===t.mode?[r.fastFormats,n]:[r.fullFormats,o];return l(e,t.formats||r.formatNames,s,i),t.keywords&&(0,a.default)(e),e};function l(e,t,r,a){var o,n;null!==(o=(n=e.opts.code).formats)&&void 0!==o||(n.formats=s._`require("ajv-formats/dist/formats").${a}`);for(const s of t)e.addFormat(s,r[s])}i.get=(e,t="full")=>{const a=("fast"===t?r.fastFormats:r.fullFormats)[e];if(!a)throw new Error(`Unknown format "${e}"`);return a},e.exports=t=i,Object.defineProperty(t,"__esModule",{value:!0}),t.default=i}($n,$n.exports);const kn=C($n.exports),Sn={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://auditomatic.org/schemas/export-v1.json",title:"AudiomaticLite Export Format v1.0",description:"Standard export format for AudiomaticLite experimental data",type:"object",properties:{auditomatic_export:{type:"object",properties:{format_version:{type:"string",const:"1.0.0"},instrument_version:{type:"string",pattern:"^auditomatic-lite-v\\d+\\.\\d+\\.\\d+$"},export_timestamp:{type:"string",format:"date-time"},experiment:{$ref:"#/$defs/Experiment"},execution:{$ref:"#/$defs/Execution"},measurements:{type:"array",items:{$ref:"#/$defs/Measurement"}},integrity:{$ref:"#/$defs/Integrity"}},required:["format_version","instrument_version","export_timestamp","experiment","execution","measurements","integrity"],additionalProperties:!1}},required:["auditomatic_export"],additionalProperties:!1,$defs:{Experiment:{type:"object",properties:{design_id:{type:"integer"},name:{type:"string"},description:{type:"string"},prompt_template:{type:"string"},variables:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},variable_list_refs:{type:"object",additionalProperties:{type:"object",properties:{name:{type:"string"},id:{type:"integer"},checksum:{type:"string"}},required:["name","id","checksum"]}},output_format:{type:"string",enum:["text","json"]},output_type:{type:"string"},extract_pattern:{oneOf:[{type:"string"},{type:"object",properties:{match:{type:"string"},replace:{type:"string"}},required:["match"]}]},refusal_words:{type:"array",items:{type:"string"}},reject_refusal_words:{type:"boolean"},created_at:{type:"string",format:"date-time"},updated_at:{type:"string",format:"date-time"}},required:["design_id","name","prompt_template","variables","created_at","updated_at"]},Execution:{type:"object",properties:{run_id:{type:"integer"},run_name:{type:"string"},started_at:{type:"string",format:"date-time"},completed_at:{type:["string","null"],format:"date-time"},model_configuration:{type:"object",properties:{models:{type:"array",items:{type:"string"},minItems:1},parameters:{type:"object",properties:{temperature:{type:"number",minimum:0,maximum:2},max_tokens:{type:"integer",minimum:1},concurrency:{type:"integer",minimum:1}},required:["temperature","max_tokens","concurrency"]}},required:["models","parameters"]},total_tasks:{type:"integer",minimum:0},completed_tasks:{type:"integer",minimum:0},error_count:{type:"integer",minimum:0},status:{type:"string",enum:["draft","ready","pending","running","paused","completed","stopped","error"]}},required:["run_id","run_name","started_at","model_configuration","total_tasks","completed_tasks","error_count","status"]},Measurement:{type:"object",properties:{task_id:{type:"integer"},model:{type:"string"},variable_assignment:{type:"object",additionalProperties:{type:"string"}},prompt:{type:"string"},raw_response:{type:["string","null"]},extracted_value:{type:["string","null"]},parsed_results:{type:["object","null"]},response_time_ms:{type:["integer","null"],minimum:0},token_usage:{type:["object","null"],properties:{prompt_tokens:{type:"integer",minimum:0},completion_tokens:{type:"integer",minimum:0},total_tokens:{type:"integer",minimum:0}},required:["prompt_tokens","completion_tokens","total_tokens"]},timestamp:{type:"string",format:"date-time"},status:{type:"string",enum:["pending","processing","completed","error","cancelled"]},error:{type:["string","null"]},api_call_log:{type:["object","null"],description:"Complete API request/response log for research transparency"}},required:["task_id","model","variable_assignment","prompt","timestamp","status"]},Integrity:{type:"object",properties:{measurement_count:{type:"integer",minimum:0},checksum:{type:"string",pattern:"^sha256:[a-f0-9]{64}$"},validation_errors:{type:"array",items:{type:"string"}},completeness_check:{type:"object",properties:{expected_tasks:{type:"integer"},actual_tasks:{type:"integer"},missing_tasks:{type:"array",items:{type:"object",properties:{model:{type:"string"},variables:{type:"object"}}}}},required:["expected_tasks","actual_tasks","missing_tasks"]}},required:["measurement_count","checksum","validation_errors","completeness_check"]}}},En={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://auditomatic.org/schemas/design-export-v1.json",title:"AudiomaticLite Design Export Format v1.0",description:"Standard export format for individual experimental designs",type:"object",properties:{auditomatic_design_export:{type:"object",properties:{format_version:{type:"string",const:"1.0.0"},instrument_version:{type:"string",pattern:"^auditomatic-lite-v\\d+\\.\\d+\\.\\d+$"},export_timestamp:{type:"string",format:"date-time"},design:{$ref:"#/$defs/Design"},variable_lists:{type:"array",items:{$ref:"#/$defs/VariableList"}},integrity:{$ref:"#/$defs/Integrity"}},required:["format_version","instrument_version","export_timestamp","design","variable_lists","integrity"],additionalProperties:!1}},required:["auditomatic_design_export"],additionalProperties:!1,$defs:{Design:{type:"object",properties:{id:{type:["integer","null"]},name:{type:"string"},description:{type:"string"},prompt_template:{type:"string"},variables:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},variable_list_refs:{type:"object",additionalProperties:{type:["integer","string"]}},attribute_keys:{type:"object",additionalProperties:{type:"array",items:{type:"string"}}},output_format:{type:"string",enum:["text","json"]},output_type:{type:"string"},extract_pattern:{oneOf:[{type:"string"},{type:"object",properties:{match:{type:"string"},replace:{type:"string"}},required:["match"]}]},refusal_words:{type:"array",items:{type:"string"}},reject_refusal_words:{type:"boolean"},created_at:{type:"string",format:"date-time"},updated_at:{type:"string",format:"date-time"}},required:["name","prompt_template","variables","created_at","updated_at"]},VariableList:{type:"object",properties:{id:{type:["integer","null"]},name:{type:"string"},description:{type:"string"},values:{type:"array",items:{type:"string"}},category:{type:"string",enum:["general","attributed"]},attribute_keys:{type:"array",items:{type:"string"}},attributed_items:{type:"array",items:{type:"object",properties:{value:{type:"string"},attributes:{type:"object",additionalProperties:{type:"string"}}},required:["value","attributes"]}},created_at:{type:"string",format:"date-time"},updated_at:{type:"string",format:"date-time"},checksum:{type:"string",pattern:"^sha256:[a-f0-9]{64}$"}},required:["name","values","created_at","updated_at","checksum"]},Integrity:{type:"object",properties:{design_checksum:{type:"string",pattern:"^sha256:[a-f0-9]{64}$"},variable_lists_count:{type:"integer",minimum:0},total_variable_combinations:{type:"integer",minimum:1},validation_errors:{type:"array",items:{type:"string"}}},required:["design_checksum","variable_lists_count","total_variable_combinations","validation_errors"]}}};const Pn=new class{constructor(){t(this,"ajv"),t(this,"initialized",!1),this.ajv=new _n({allErrors:!0,verbose:!1,strict:!1,validateSchema:!1});try{kn(this.ajv),this.ajv.addSchema(Sn,"export-v1"),this.ajv.addSchema(En,"design-export-v1"),this.initialized=!0}catch(e){console.warn("Schema validator initialization failed:",e),this.initialized=!1}}validateRunExport(e){if(!this.initialized)return{valid:!1,errors:["Schema validator not initialized - validation skipped"]};const t=this.ajv.getSchema("export-v1");if(!t)return{valid:!1,errors:["Schema not found: export-v1"]};try{const r=t(e);return{valid:r,errors:r?[]:this.formatErrors(t.errors||[])}}catch(r){return{valid:!1,errors:[`Validation error: ${r instanceof Error?r.message:"Unknown error"}`]}}}validateDesignExport(e){if(!this.initialized)return{valid:!1,errors:["Schema validator not initialized - validation skipped"]};const t=this.ajv.getSchema("design-export-v1");if(!t)return{valid:!1,errors:["Schema not found: design-export-v1"]};try{const r=t(e);return{valid:r,errors:r?[]:this.formatErrors(t.errors||[])}}catch(r){return{valid:!1,errors:[`Validation error: ${r instanceof Error?r.message:"Unknown error"}`]}}}validateExport(e){return e&&"object"==typeof e&&"auditomatic_export"in e?this.validateRunExport(e):e&&"object"==typeof e&&"auditomatic_design_export"in e?this.validateDesignExport(e):{valid:!1,errors:["Unknown export format - missing auditomatic_export or auditomatic_design_export root property"]}}formatErrors(e){return e.map(e=>{const t=e.instancePath||"root",r=e.message||"validation failed";return"required"===e.keyword?`Missing required property: ${t}/${e.params.missingProperty}`:"type"===e.keyword?`Invalid type at ${t}: expected ${e.params.type}, got ${typeof e.data}`:"enum"===e.keyword?`Invalid value at ${t}: must be one of [${e.params.allowedValues.join(", ")}]`:"format"===e.keyword?`Invalid format at ${t}: ${r}`:`Validation error at ${t}: ${r}`})}getSchemaInfo(){return{availableSchemas:["export-v1","design-export-v1"],ajvVersion:"8.17.1"}}};async function jn(e){const t=JSON.stringify(e,null,0),r=(new TextEncoder).encode(t),a=await crypto.subtle.digest("SHA-256",r);return`sha256:${Array.from(new Uint8Array(a)).map(e=>e.toString(16).padStart(2,"0")).join("")}`}function xn(e){const t=[];try{const a=(r=e,Pn.validateExport(r));a.valid||t.push(...a.errors.map(e=>`Schema validation: ${e}`))}catch(a){t.push(`Schema validation failed: ${a instanceof Error?a.message:"Unknown error"}`)}var r;if("auditomatic_export"in e){const r=e.auditomatic_export;r.measurements.length!==r.integrity.measurement_count&&t.push(`Measurement count mismatch: expected ${r.integrity.measurement_count}, got ${r.measurements.length}`);const{expected_tasks:a,actual_tasks:s}=r.integrity.completeness_check;s!==r.measurements.length&&t.push(`Task count inconsistency: integrity reports ${s}, but found ${r.measurements.length} measurements`);const o=new Set(r.execution.model_configuration.models),n=new Set(r.measurements.map(e=>e.model));for(const e of n)o.has(e)||t.push(`Model '${e}' used in measurements but not declared in configuration`);const i=new Date(r.export_timestamp);isNaN(i.getTime())&&t.push("Invalid export_timestamp format"),r.integrity.checksum.startsWith("sha256:")&&71===r.integrity.checksum.length||t.push('Invalid checksum format - must be "sha256:" followed by 64 hex characters')}return t}function Cn(e,t,r="application/json"){const a=new Blob([e],{type:r}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)}function Nn(){const e=async(e,t)=>{const r=new Set;e.forEach(e=>{Object.keys(e.variables||{}).forEach(e=>{r.add(e)})});const a=Array.from(r).sort(),s=["Task ID","Model","Status","Response Time (ms)",...a,"Raw Response","Extracted Value","Error","Timestamp"],o=e.map(e=>[e.id||"",e.model,e.status,e.response_time||"",...a.map(t=>e.variables?.[t]||""),e.result||"",e.parsed_results?JSON.stringify(e.parsed_results):"",e.error||"",e.created_at]),n=e=>{let t=String(e);return t.match(/^[=+\-@]/)&&(t="'"+t),`"${t.replace(/"/g,'""')}"`};Cn([s.join(","),...o.map(e=>e.map(n).join(","))].join("\n"),t?`results_run_${t}_${(new Date).toISOString().slice(0,10)}.csv`:`results_filtered_${(new Date).toISOString().slice(0,10)}.csv`,"text/csv")};return{exportCSV:e,exportJSON:async(e,t,r)=>{const a={format:"legacy_results_export",run_id:t,exported_at:(new Date).toISOString(),total_tasks:e.length,filters_applied:r,tasks:e},s=t?`results_legacy_run_${t}_${(new Date).toISOString().slice(0,10)}.json`:`results_legacy_filtered_${(new Date).toISOString().slice(0,10)}.json`;Cn(JSON.stringify(a,null,2),s,"application/json")},exportStandardizedJSON:async(e,t,r)=>{if(!t)throw new Error("Standardized export requires a specific run ID");try{const[a,s,o]=await Promise.all([S.runs.get(t),S.runs.get(t).then(e=>e?S.designs.get(e.design_id):null),S.variable_lists.toArray()]);if(!a||!s)throw new Error("Run or design data not found");const n=new Map(o.map(e=>[e.id,e])),i={};if(s.variable_list_refs)for(const[e,t]of Object.entries(s.variable_list_refs)){const r="number"==typeof t?t:parseInt(t.toString()),a=n.get(r);if(a){const t=await jn(a);i[e]={name:a.name,id:a.id,checksum:t}}}const l=e.map(e=>{let t=e.api_call_log;if("completed"===e.status&&e.api_call_log){const r=e.api_call_log;r.request?.url&&r.request?.method&&r.request?.body&&r.response?.body||(console.warn(`Task ${e.id} has incomplete API call log - reproducibility may be compromised`),t={...r,metadata:{...r.metadata,_warning:"Incomplete API call log - missing required fields for reproducibility"}})}return{task_id:e.id,model:e.model,variable_assignment:e.variables,prompt:e.prompt,raw_response:e.result||null,extracted_value:e.parsed_results?JSON.stringify(e.parsed_results):null,parsed_results:e.parsed_results||null,response_time_ms:e.response_time||null,token_usage:e.usage||null,timestamp:e.created_at,status:e.status,error:e.error||null,api_call_log:t}}),c=function(e,t,r,a){const s={...e.variables};if(e.variable_list_refs)for(const[i,l]of Object.entries(e.variable_list_refs)){const e="number"==typeof l?l:parseInt(l.toString()),t=Object.values(r).find(t=>t.id===e);t&&("attributed"===t.category&&t.attributed_items?s[i]=t.attributed_items.map(e=>e.value):s[i]=t.values)}const o=Object.values(s),n=a?.repetitions_per_prompt||1;return 0===o.length?t.length*n:o.reduce((e,t)=>e*t.length,1)*t.length*n}(s,a.models,Object.fromEntries(n),{repetitions_per_prompt:a.parameters.repetitions_per_prompt}),d=await S.tasks.where("run_id").equals(t).toArray(),u=function(e,t,r,a){const s=[],o={...e.variables};if(e.variable_list_refs)for(const[c,d]of Object.entries(e.variable_list_refs)){const e="number"==typeof d?d:parseInt(d.toString()),t=Object.values(r).find(t=>t.id===e);t&&("attributed"===t.category&&t.attributed_items?o[c]=t.attributed_items.map(e=>e.value):o[c]=t.values)}const n=Object.keys(o),i=Object.values(o);if(0===i.length){for(const e of t)a.some(t=>t.model===e)||s.push({model:e,variables:{}});return s}const l=function e(t,r=[],a=0){if(a===t.length)return[r];const s=[];for(const o of t[a])s.push(...e(t,[...r,o],a+1));return s}(i);for(const c of t)for(const e of l){const t={};n.forEach((r,a)=>{t[r]=e[a]}),a.some(e=>e.model===c&&Object.entries(t).every(([t,r])=>e.variables[t]===r))||s.push({model:c,variables:t})}return s}(s,a.models,Object.fromEntries(n),d),m=await jn(l),p={auditomatic_export:{format_version:"1.0.0",instrument_version:"auditomatic-lite-v1.0.0",export_timestamp:(new Date).toISOString(),experiment:{design_id:s.id,name:s.name,description:s.description,prompt_template:s.prompt_template,variables:s.variables,variable_list_refs:i,output_format:s.output_format,output_type:s.output_type,extract_pattern:s.extract_pattern,refusal_words:s.refusal_words,reject_refusal_words:s.reject_refusal_words,created_at:s.created_at,updated_at:s.updated_at},execution:{run_id:a.id,run_name:a.name,started_at:a.created_at,completed_at:a.completed_at||null,model_configuration:{models:a.models,parameters:a.parameters},total_tasks:a.total_tasks,completed_tasks:a.completed_tasks,error_count:a.error_count,status:a.status},measurements:l,integrity:{measurement_count:l.length,checksum:m,validation_errors:[],completeness_check:{expected_tasks:c,actual_tasks:l.length,missing_tasks:u}}}};r&&Object.keys(r).length>0&&(p.auditomatic_export.export_metadata={filtered:!0,filters_applied:r,original_task_count:d.length});const f=xn(p);if(p.auditomatic_export.integrity.validation_errors=f,f.length>0)throw new Error(`Export validation failed with ${f.length} error(s):\n${f.join("\n")}`);const h=function(e,t,r,a){const s=a||new Date,o=s.toISOString().slice(0,10).replace(/-/g,""),n=s.toISOString().slice(11,19).replace(/:/g,""),i=t.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");switch(e){case"run":return`${i}_${o}_${n}_run${r||""}.json`;case"design":return`${i}_design${r||""}_${o}.json`;case"full-db":return`auditomatic_full_export_${o}_${n}.json`;default:return`auditomatic_export_${o}_${n}.json`}}("run",s.name,a.id,new Date);return Cn(JSON.stringify(p,null,2),h,"application/json"),function(e,t,r,a,s=[],o){return{success:e,filename:t,recordCount:r,checksum:a,validationErrors:s,warning:o}}(!0,h,l.length,m,f,void 0)}catch(a){throw new Error(`Failed to create standardized export: ${a instanceof Error?a.message:"Unknown error"}`)}},exportExcel:async(t,r)=>{await e(t,r)}}}const Rn={class:"pivot-table-wrapper"},On=E(r({__name:"PivotTable",props:{tasks:{}},emits:["cell-click"],setup(e,{emit:t}){const r=e,c=t,{exportCSV:d}=Nn(),u=a({rowField:"",columnField:"model",valueField:"match_1",aggregation:"mean"});function m(e){u.value=e}function p(e){e.cell&&c("cell-click",{row:e.row,column:e.column,tasks:e.cell.tasks})}async function f(){await d(r.tasks,null)}return(e,t)=>(o(),s("div",Rn,[t[1]||(t[1]=n("div",{class:"pivot-header"},[n("h3",null,"Pivot Table Analysis"),n("p",{class:"pivot-description"}," Analyze your results by grouping data across different dimensions and aggregating values. ")],-1)),i(j,{tasks:e.tasks,config:u.value,"max-table-rows":1e4,"show-totals":!0,"hide-view-toggle":!1,onConfigChange:m,onCellClick:p},null,8,["tasks","config"]),n("div",{class:"export-controls"},[n("button",{class:"export-btn",onClick:f},t[0]||(t[0]=[n("svg",{class:"icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n("polyline",{points:"7 10 12 15 17 10"}),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),l(" Export Pivot Data ")]))])]))}}),[["__scopeId","data-v-4fe8c0b3"]]),In={class:"filters-section"},Tn={class:"filters-header"},Mn={class:"filters-grid"},Dn={class:"filter-group"},An=["value"],zn={class:"filter-group"},Vn=["value"],qn=["value"],Un={class:"filter-group"},Fn=["value"],Ln=["value","onChange"],Kn={value:""},Gn=["value"],Jn=E(r({__name:"ResultsFilters",props:{filters:{},uniqueModels:{},availableVariables:{},getVariableValues:{type:Function}},emits:["update-filter","update-variable-filter","reset-filters"],setup(e,{emit:t}){const r=t,a=(e,t)=>{r("update-filter",e,t)};return(e,t)=>(o(),s("div",In,[n("div",Tn,[t[4]||(t[4]=n("h3",null,"Filters & Search",-1)),n("button",{class:"btn btn-secondary btn-sm",onClick:t[0]||(t[0]=t=>e.$emit("reset-filters"))}," Reset All ")]),n("div",Mn,[n("div",Dn,[t[5]||(t[5]=n("label",null,"Search Results:",-1)),n("input",{value:e.filters.search,type:"text",class:"form-control",placeholder:"Search in results content...",onInput:t[1]||(t[1]=e=>a("search",e.target.value))},null,40,An)]),n("div",zn,[t[7]||(t[7]=n("label",null,"Model:",-1)),n("select",{value:e.filters.model,class:"form-control",onChange:t[2]||(t[2]=e=>a("model",e.target.value))},[t[6]||(t[6]=n("option",{value:""}," All Models ",-1)),(o(!0),s(c,null,d(e.uniqueModels,e=>(o(),s("option",{key:e,value:e},u(e),9,qn))),128))],40,Vn)]),n("div",Un,[t[9]||(t[9]=n("label",null,"Status:",-1)),n("select",{value:e.filters.status,class:"form-control",onChange:t[3]||(t[3]=e=>a("status",e.target.value))},t[8]||(t[8]=[n("option",{value:""}," All Statuses ",-1),n("option",{value:"completed"}," Completed ",-1),n("option",{value:"error"}," Error ",-1),n("option",{value:"processing"}," Processing ",-1)]),40,Fn)]),(o(!0),s(c,null,d(e.availableVariables,t=>(o(),s("div",{key:t,class:"filter-group"},[n("label",null,u(t)+":",1),n("select",{value:e.filters.variables[t]||"",class:"form-control",onChange:e=>((e,t)=>{r("update-variable-filter",e,t)})(t,e.target.value)},[n("option",Kn," All "+u(t),1),(o(!0),s(c,null,d(e.getVariableValues(t),e=>(o(),s("option",{key:e,value:e},u(e),9,Gn))),128))],40,Ln)]))),128))])]))}}),[["__scopeId","data-v-7f90c34c"]]),Bn={class:"table-view"},Hn={class:"table-section"},Wn={class:"table-header"},Qn={class:"table-controls"},Zn={class:"results-count"},Xn={class:"export-buttons"},Yn={class:"table-container"},ei={class:"results-table"},ti=["onClick"],ri={class:"model-name"},ai=["onClick"],si={class:"variables-compact"},oi={class:"var-key"},ni={class:"var-value"},ii={class:"status-cell"},li=["title"],ci=["onClick"],di=["title"],ui={class:"raw-text"},mi=["onClick"],pi={class:"parsed-content"},fi={key:0,class:"parsed-items"},hi={class:"parsed-key"},vi={key:1,class:"no-parsing"},yi={class:"time-cell"},gi={class:"timing-info"},_i={class:"response-time"},$i={key:0,class:"timestamp"},bi={class:"actions-cell"},wi=["onClick"],ki=E(r({__name:"ResultsTable",props:{tasks:{},resultsCount:{},getSortIcon:{type:Function}},emits:["export-csv","export-json","export-excel","sort-by","view-task"],setup(e,{emit:t}){const r=t,a=(e,t)=>!e||e.length<=t?e:e.substring(0,t)+"...",i=e=>null==e?"null":"boolean"==typeof e?e?"true":"false":"number"==typeof e?e.toString():"object"==typeof e?JSON.stringify(e):String(e),l=e=>null==e?"value-null":"boolean"==typeof e?e?"value-true":"value-false":"number"==typeof e?"value-number":"object"==typeof e?"value-object":"value-string";return(e,t)=>(o(),s("div",Bn,[n("div",Hn,[n("div",Wn,[t[6]||(t[6]=n("h3",null,"Results Data",-1)),n("div",Qn,[n("span",Zn,u(e.resultsCount),1),n("div",Xn,[n("button",{class:"btn btn-secondary btn-sm",onClick:t[0]||(t[0]=e=>r("export-csv"))}," 📄 CSV "),n("button",{class:"btn btn-secondary btn-sm",onClick:t[1]||(t[1]=e=>r("export-json"))}," 📋 JSON "),n("button",{class:"btn btn-secondary btn-sm",onClick:t[2]||(t[2]=e=>r("export-excel"))}," 📊 Excel ")])])]),n("div",Yn,[n("table",ei,[n("thead",null,[n("tr",null,[n("th",{class:"sortable",onClick:t[3]||(t[3]=e=>r("sort-by","model"))}," Model "+u(e.getSortIcon("model")),1),t[7]||(t[7]=n("th",{class:"variables-header"}," Variables ",-1)),n("th",{class:"sortable",onClick:t[4]||(t[4]=e=>r("sort-by","status"))}," Status "+u(e.getSortIcon("status")),1),t[8]||(t[8]=n("th",null,"Raw Response",-1)),t[9]||(t[9]=n("th",null,"Parsed Results",-1)),n("th",{class:"sortable",onClick:t[5]||(t[5]=e=>r("sort-by","response_time"))}," Time "+u(e.getSortIcon("response_time")),1),t[10]||(t[10]=n("th",null,"Actions",-1))])]),n("tbody",null,[(o(!0),s(c,null,d(e.tasks,e=>{return o(),s("tr",{key:e.id,class:"data-row"},[n("td",{class:"model-cell clickable",onClick:t=>r("view-task",e)},[n("span",ri,u(e.model),1)],8,ti),n("td",{class:"variables-cell clickable",onClick:t=>r("view-task",e)},[n("div",si,[(o(!0),s(c,null,d(e.variables,(e,t)=>(o(),s("div",{key:t,class:"variable-compact"},[n("span",oi,u(t)+":",1),n("span",ni,u(a(String(e),20)),1)]))),128))])],8,ai),n("td",ii,[n("span",{class:p(["status-badge",`status-${e.status}`])},u(e.status),3),e.error?(o(),s("div",{key:0,class:"error-indicator",title:e.error}," ⚠️ ",8,li)):m("",!0)]),n("td",{class:"raw-response-cell clickable",onClick:t=>r("view-task",e)},[n("div",{class:"response-content",title:e.result},[n("pre",ui,u(a(e.result||e.error||"No result",150)),1)],8,di)],8,ci),n("td",{class:"parsed-results-cell clickable",onClick:t=>r("view-task",e)},[n("div",pi,[e.parsed_results?(o(),s("div",fi,[(o(!0),s(c,null,d(e.parsed_results,(e,t)=>(o(),s("div",{key:t,class:"parsed-item"},[n("span",hi,u(t)+":",1),n("span",{class:p(["parsed-value",l(e)])},u(i(e)),3)]))),128))])):(o(),s("span",vi,"No parsing"))])],8,mi),n("td",yi,[n("div",gi,[n("div",_i,u(e.response_time||"-")+"ms ",1),e.created_at?(o(),s("div",$i,u((t=e.created_at,new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}))),1)):m("",!0)])]),n("td",bi,[n("button",{class:"btn btn-sm btn-outline",onClick:t=>r("view-task",e)}," 📋 ",8,wi)])]);var t}),128))])])])])]))}}),[["__scopeId","data-v-872dcf2f"]]),Si={class:"summary-view"},Ei={class:"summary-cards"},Pi={class:"summary-card"},ji={class:"card-content"},xi={class:"card-value"},Ci={class:"card-percentage"},Ni={class:"summary-card"},Ri={class:"card-content"},Oi={class:"card-value"},Ii={class:"card-percentage"},Ti={class:"summary-card"},Mi={class:"card-content"},Di={class:"card-value"},Ai={class:"card-sublabel"},zi={class:"summary-card"},Vi={class:"card-content"},qi={class:"card-value"},Ui={class:"card-sublabel"},Fi={class:"summary-card cost-card"},Li={class:"card-content"},Ki={class:"card-value cost-value"},Gi={class:"card-sublabel"},Ji={class:"summary-charts"},Bi={class:"chart-section"},Hi={class:"model-breakdown"},Wi={class:"model-name"},Qi={class:"model-bar"},Zi={class:"model-percentage"},Xi={class:"model-count"},Yi={class:"chart-section"},el={class:"variable-breakdown"},tl={class:"variable-values"},rl={class:"value-name"},al={class:"value-count"},sl={class:"value-bar"},ol=E(r({__name:"SummaryCards",props:{successCount:{},errorCount:{},successRate:{},errorRate:{},avgResponseTime:{},minMaxResponseTime:{},totalTasks:{},uniqueModelCount:{},totalCost:{},avgCostPerTask:{},modelStats:{},variableStats:{},getModelColor:{type:Function}},setup:e=>(e,t)=>(o(),s("div",Si,[n("div",Ei,[n("div",Pi,[t[1]||(t[1]=n("div",{class:"card-icon"}," 📈 ",-1)),n("div",ji,[n("div",xi,u(e.successCount),1),t[0]||(t[0]=n("div",{class:"card-label"}," Successful ",-1)),n("div",Ci,u(e.successRate)+"% ",1)])]),n("div",Ni,[t[3]||(t[3]=n("div",{class:"card-icon"}," ⚠️ ",-1)),n("div",Ri,[n("div",Oi,u(e.errorCount),1),t[2]||(t[2]=n("div",{class:"card-label"}," Failed ",-1)),n("div",Ii,u(e.errorRate)+"% ",1)])]),n("div",Ti,[t[5]||(t[5]=n("div",{class:"card-icon"}," ⏱️ ",-1)),n("div",Mi,[n("div",Di,u(e.avgResponseTime)+"ms ",1),t[4]||(t[4]=n("div",{class:"card-label"}," Avg Response Time ",-1)),n("div",Ai,u(e.minMaxResponseTime),1)])]),n("div",zi,[t[7]||(t[7]=n("div",{class:"card-icon"}," 🎯 ",-1)),n("div",Vi,[n("div",qi,u(e.totalTasks),1),t[6]||(t[6]=n("div",{class:"card-label"}," Total Tasks ",-1)),n("div",Ui,u(e.uniqueModelCount)+" models ",1)])]),n("div",Fi,[t[9]||(t[9]=n("div",{class:"card-icon"}," 💰 ",-1)),n("div",Li,[n("div",Ki," $"+u(e.totalCost),1),t[8]||(t[8]=n("div",{class:"card-label"}," Total Cost ",-1)),n("div",Gi,u(e.avgCostPerTask)+" per task ",1)])])]),n("div",Ji,[n("div",Bi,[t[10]||(t[10]=n("h3",null,"Success Rate by Model",-1)),n("div",Hi,[(o(!0),s(c,null,d(e.modelStats,t=>(o(),s("div",{key:t.name,class:"model-stat"},[n("div",Wi,u(t.name),1),n("div",Qi,[n("div",{class:"model-bar-fill",style:f({width:t.successRate+"%",backgroundColor:e.getModelColor(t.successRate)})},null,4)]),n("div",Zi,u(t.successRate.toFixed(1))+"% ",1),n("div",Xi," ("+u(t.successful)+"/"+u(t.total)+") ",1)]))),128))])]),n("div",Yi,[t[11]||(t[11]=n("h3",null,"Variable Distribution",-1)),n("div",el,[(o(!0),s(c,null,d(e.variableStats,e=>(o(),s("div",{key:e.name,class:"variable-stat"},[n("h4",null,u(e.name),1),n("div",tl,[(o(!0),s(c,null,d(e.values,t=>(o(),s("div",{key:t.value,class:"value-stat"},[n("span",rl,u(t.value),1),n("span",al,u(t.count)+" tasks",1),n("div",sl,[n("div",{class:"value-bar-fill",style:f({width:t.count/e.total*100+"%"})},null,4)])]))),128))])]))),128))])])])]))}),[["__scopeId","data-v-97a6bf5b"]]),nl={class:"run-name"},il={class:"design-name"},ll={class:"created-date"},cl={class:"progress-info"},dl={key:0},ul={class:"models-info"},ml={class:"actions"},pl=["disabled"],fl=E(r({__name:"RunSelectionRow",props:{run:{},isSelected:{type:Boolean}},emits:["select","view-results","delete"],setup(e){const t=e,r=a("...");h(async()=>{if(t.run.design_id){const e=await S.designs.get(t.run.design_id);r.value=e?.name||"Unknown"}});const i=v(()=>"completed"===t.run.status||"stopped"===t.run.status),c=v(()=>{if(!t.run.completed_tasks||0===t.run.completed_tasks)return null;const e=t.run.completed_tasks-(t.run.error_count||0);return Math.round(e/t.run.completed_tasks*100)}),d=e=>{const t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/864e5);return 0===a?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):1===a?"Yesterday":a<7?`${a}d ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return(e,t)=>(o(),s("div",{class:p(["run-row",{incomplete:!i.value,selected:e.isSelected}]),onClick:t[1]||(t[1]=t=>e.$emit("view-results",e.run))},[n("div",{class:p(["status-dot",`status-${e.run.status}`])},null,2),n("div",nl,u(e.run.name),1),n("div",il,u(r.value),1),n("div",ll,u(d(e.run.created_at)),1),n("div",cl,[l(u(e.run.completed_tasks||0)+"/"+u(e.run.total_tasks||0)+" ",1),null!==c.value?(o(),s("span",dl,"("+u(c.value)+"%)",1)):m("",!0)]),n("div",ul,u(e.run.models.length)+" models ",1),n("div",ml,[n("button",{class:"action-btn",disabled:"running"===e.run.status,title:"Delete",onClick:t[0]||(t[0]=y(t=>e.$emit("delete",e.run),["stop"]))}," 🗑️ ",8,pl)])],2))}}),[["__scopeId","data-v-52caea50"]]),hl={class:"run-selection-container"},vl={class:"grid-header"},yl={class:"filter-controls"},gl={class:"toggle-control"},_l=["checked"],$l={class:"sort-control"},bl=["value"],wl={class:"grid-info"},kl={class:"run-count"},Sl={key:0,class:"loading-state"},El={key:1,class:"empty-state"},Pl={key:0},jl={key:1},xl={key:2,class:"runs-list"},Cl=E(r({__name:"RunSelectionGrid",props:{runs:{},filteredRuns:{},loading:{type:Boolean},selectedRunId:{},showIncompleteRuns:{type:Boolean},sortBy:{},hasIncompleteRuns:{type:Boolean}},emits:["select-run","view-results","edit-run","delete-run","update:show-incomplete","update:sort-by"],setup:e=>(e,t)=>(o(),s("div",hl,[n("div",vl,[n("div",yl,[n("label",gl,[n("input",{type:"checkbox",checked:e.showIncompleteRuns,onChange:t[0]||(t[0]=t=>e.$emit("update:show-incomplete",t.target.checked))},null,40,_l),t[3]||(t[3]=n("span",null,"Show incomplete runs",-1))]),n("div",$l,[t[5]||(t[5]=n("label",null,"Sort by:",-1)),n("select",{value:e.sortBy,onChange:t[1]||(t[1]=t=>e.$emit("update:sort-by",t.target.value))},t[4]||(t[4]=[g('<option value="created_at" data-v-953cccfe> Most Recent </option><option value="name" data-v-953cccfe> Name </option><option value="updated_at" data-v-953cccfe> Last Updated </option><option value="status" data-v-953cccfe> Status </option><option value="completion" data-v-953cccfe> Completion % </option>',5)]),40,bl)])]),n("div",wl,[n("span",kl,u(e.filteredRuns.length)+" runs",1)])]),e.loading?(o(),s("div",Sl,t[6]||(t[6]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading runs...",-1)]))):0===e.filteredRuns.length?(o(),s("div",El,[e.showIncompleteRuns?(o(),s("p",Pl," No runs found ")):(o(),s("p",jl," No completed runs found ")),!e.showIncompleteRuns&&e.hasIncompleteRuns?(o(),s("button",{key:2,class:"btn btn-secondary",onClick:t[2]||(t[2]=t=>e.$emit("update:show-incomplete",!0))}," Show incomplete runs ")):m("",!0)])):(o(),s("div",xl,[(o(!0),s(c,null,d(e.filteredRuns,t=>(o(),_(fl,{key:t.id,run:t,"is-selected":e.selectedRunId===t.id,onSelect:r=>e.$emit("select-run",t),onViewResults:r=>e.$emit("view-results",t),onEdit:r=>e.$emit("edit-run",t),onDelete:r=>e.$emit("delete-run",t)},null,8,["run","is-selected","onSelect","onViewResults","onEdit","onDelete"]))),128))]))]))}),[["__scopeId","data-v-953cccfe"]]);const Nl={class:"results-view"},Rl={key:0,class:"run-selection-view"},Ol={key:1,class:"analysis-view"},Il={class:"breadcrumb"},Tl={class:"breadcrumb-current"},Ml={class:"header"},Dl={class:"header-controls"},Al={class:"view-mode-toggle"},zl={key:0,class:"loading-state"},Vl={key:1,class:"no-results"},ql={key:2,class:"results-container"},Ul={key:0},Fl={key:1,class:"pivot-view"},Ll={key:2},Kl={class:"modal-content"},Gl={class:"modal-header"},Jl={class:"modal-body"},Bl={class:"cell-tasks"},Hl={class:"task-result"},Wl=["onClick"],Ql=E(r({__name:"ResultsView",setup(e){const t=$(),r=b(),f=P(),g=a("run-selection"),E=a(null),j=a(null),C=a([]),N=a([]),R=a(!1),O=a(!1),I=a(null),T=a("summary"),M=a(null),{showIncompleteRuns:D,sortBy:A,setSortBy:z,filteredRuns:V,hasIncompleteRuns:q}=function(e){const t=a(!1),r=a("created_at"),s=a("desc"),o=v(()=>{let a=e.value;return t.value||(a=a.filter(e=>"completed"===e.status||"stopped"===e.status)),[...a].sort((e,t)=>{let a,o;switch(r.value){case"created_at":a=new Date(e.created_at).getTime(),o=new Date(t.created_at).getTime();break;case"updated_at":a=new Date(e.updated_at||e.created_at).getTime(),o=new Date(t.updated_at||t.created_at).getTime();break;case"name":a=e.name.toLowerCase(),o=t.name.toLowerCase();break;case"status":const r={error:0,running:1,paused:2,completed:3,stopped:4,pending:5,ready:6,draft:7};a=r[e.status]??8,o=r[t.status]??8;break;case"completion":a=e.total_tasks?e.completed_tasks/e.total_tasks:0,o=t.total_tasks?t.completed_tasks/t.total_tasks:0;break;default:return 0}return"desc"===s.value?o<a?-1:o>a?1:0:a<o?-1:a>o?1:0})}),n=v(()=>e.value.some(e=>"completed"!==e.status&&"stopped"!==e.status));return{showIncompleteRuns:t,sortBy:r,sortOrder:s,filteredRuns:o,hasIncompleteRuns:n,setSortBy:e=>{r.value===e?s.value="asc"===s.value?"desc":"asc":(r.value=e,s.value="name"===e?"asc":"desc")},toggleShowIncomplete:()=>{t.value=!t.value}}}(C),{uniqueModels:U,availableVariables:F,successCount:L,errorCount:K,successRate:G,errorRate:J,avgResponseTime:B,minMaxResponseTime:H,modelStats:W,variableStats:Q,getModelColor:Z}=function(e){const t=v(()=>[...new Set(e.value.map(e=>e.model))].sort()),r=v(()=>{const t=new Set;return e.value.forEach(e=>{e.variables&&Object.keys(e.variables).forEach(e=>t.add(e))}),Array.from(t).sort()}),a=v(()=>e.value.filter(e=>"completed"===e.status).length),s=v(()=>e.value.filter(e=>"error"===e.status).length),o=v(()=>0===e.value.length?0:Math.round(a.value/e.value.length*100)),n=v(()=>0===e.value.length?0:Math.round(s.value/e.value.length*100)),i=v(()=>{const t=e.value.filter(e=>"completed"===e.status&&e.response_time);if(0===t.length)return 0;const r=t.reduce((e,t)=>e+(t.response_time||0),0);return Math.round(r/t.length)}),l=v(()=>{const t=e.value.filter(e=>e.response_time&&e.response_time>0).map(e=>e.response_time);return 0===t.length?"-":`${Math.min(...t)}-${Math.max(...t)}ms`}),c=v(()=>t.value.map(t=>{const r=e.value.filter(e=>e.model===t),a=r.filter(e=>"completed"===e.status).length,s=r.length;return{name:t,successful:a,total:s,successRate:s>0?a/s*100:0}}).sort((e,t)=>t.successRate-e.successRate)),d=v(()=>r.value.map(t=>{const r=new Map;let a=0;e.value.forEach(e=>{if(e.variables&&e.variables[t]){const s=String(e.variables[t]);r.set(s,(r.get(s)||0)+1),a++}});const s=Array.from(r.entries()).map(([e,t])=>({value:e,count:t})).sort((e,t)=>t.count-e.count).slice(0,10);return{name:t,values:s,total:a}}));return{uniqueModels:t,availableVariables:r,successCount:a,errorCount:s,successRate:o,errorRate:n,avgResponseTime:i,minMaxResponseTime:l,modelStats:c,variableStats:d,getModelColor:e=>e>=80?"#10b981":e>=60?"#fbbf24":"#ef4444"}}(N),{filters:X,filteredTasks:Y,getVariableValues:ee,resetFilters:te,sortBy:re,getSortIcon:ae}=function(e){const t=a({search:"",model:"",status:"",variables:{}}),r=a(""),s=a("asc"),o=v(()=>{let a=[...e.value];if(t.value.search){const e=t.value.search.toLowerCase();a=a.filter(t=>(t.result||"").toLowerCase().includes(e)||(t.error||"").toLowerCase().includes(e)||t.model.toLowerCase().includes(e))}return t.value.model&&(a=a.filter(e=>e.model===t.value.model)),t.value.status&&(a=a.filter(e=>e.status===t.value.status)),Object.entries(t.value.variables).forEach(([e,t])=>{t&&(a=a.filter(r=>r.variables&&String(r.variables[e])===t))}),r.value&&a.sort((e,t)=>{let a,o;switch(r.value){case"model":a=e.model,o=t.model;break;case"status":a=e.status,o=t.status;break;case"response_time":a=e.response_time||0,o=t.response_time||0;break;default:return 0}return a<o?"asc"===s.value?-1:1:a>o?"asc"===s.value?1:-1:0}),a});return{filters:t,filteredTasks:o,getVariableValues:t=>{const r=new Set;return e.value.forEach(e=>{e.variables&&e.variables[t]&&r.add(String(e.variables[t]))}),Array.from(r).sort()},resetFilters:()=>{t.value={search:"",model:"",status:"",variables:{}}},sortBy:e=>{r.value===e?s.value="asc"===s.value?"desc":"asc":(r.value=e,s.value="asc")},getSortIcon:e=>r.value!==e?"":"asc"===s.value?"↑":"↓"}}(N),{resetPagination:se}=function(e,t=50){const r=a(1),s=v(()=>Math.ceil(e.value.length/t)),o=v(()=>{const a=(r.value-1)*t,s=a+t;return e.value.slice(a,s)});return{currentPage:r,totalPages:s,paginatedTasks:o,resetPagination:()=>{r.value=1}}}(Y),{exportCSV:oe,exportJSON:ne,exportExcel:ie}=Nn(),{modelStats:le,getModelColor:ce}=function(e){const t=v(()=>e.value.filter(e=>"completed"===e.status&&!e.error).length),r=v(()=>e.value.filter(e=>"error"===e.status||e.error).length),a=v(()=>e.value.length),s=v(()=>a.value>0?t.value/a.value*100:0),o=v(()=>a.value>0?r.value/a.value*100:0),n=v(()=>e.value.filter(e=>e.response_time&&e.response_time>0).map(e=>e.response_time)),i=v(()=>0===n.value.length?0:n.value.reduce((e,t)=>e+t,0)/n.value.length),l=v(()=>0===n.value.length?{min:0,max:0}:{min:Math.min(...n.value),max:Math.max(...n.value)}),c=v(()=>e.value.reduce((e,t)=>e+(t.api_call_log?.cost_estimate?.estimated_cost_usd||0),0)),d=v(()=>a.value>0?c.value/a.value:0),u=v(()=>{const t=e.value.reduce((e,t)=>{const r=t.model||"Unknown";return e[r]||(e[r]=[]),e[r].push(t),e},{});return Object.entries(t).map(([e,t])=>{const r=t.filter(e=>"completed"===e.status&&!e.error),a=t.filter(e=>"error"===e.status||e.error),s=t.filter(e=>e.response_time&&e.response_time>0).map(e=>e.response_time),o=s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0,n=t.reduce((e,t)=>e+(t.usage?.total_tokens||0),0),i=t.reduce((e,t)=>e+(t.api_call_log?.cost_estimate?.estimated_cost_usd||0),0);return{name:e,tasks:t.length,successCount:r.length,errorCount:a.length,successRate:t.length>0?r.length/t.length*100:0,avgResponseTime:o,totalTokens:n,estimatedCost:i}}).sort((e,t)=>t.tasks-e.tasks)}),m=v(()=>{const e=Math.max(...u.value.map(e=>e.avgResponseTime));return Math.max(e,l.value.max)}),p=v(()=>({success:{count:t.value,rate:s.value,trend:s.value>=80?"positive":s.value>=60?"neutral":"negative"},error:{count:r.value,rate:o.value,trend:o.value<=5?"positive":o.value<=20?"neutral":"negative"},timing:{count:i.value,rate:i.value,min:l.value.min,max:l.value.max},cost:{count:c.value,rate:d.value,total:c.value,perTask:d.value}}));return{successCount:t,errorCount:r,totalTasks:a,successRate:s,errorRate:o,avgResponseTime:i,minMaxResponseTime:l,maxResponseTime:m,totalEstimatedCost:c,costPerTask:d,modelStats:u,metricsCards:p,getModelColor:e=>{const t=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"];let r=0;for(let a=0;a<e.length;a++)r=e.charCodeAt(a)+((r<<5)-r);return t[Math.abs(r)%t.length]}}}(N);!function(e,t){v(()=>e.value.map(e=>({label:e.name.split("-")[0],value:e.successRate,color:t(e.name),percentage:e.successRate}))),v(()=>e.value.map(e=>({label:e.name.split("-")[0],value:e.avgResponseTime,color:t(e.name)}))),v(()=>{const r=e.value.reduce((e,t)=>e+t.estimatedCost,0);return e.value.filter(e=>e.estimatedCost>0).map(e=>({label:e.name.split("-")[0],value:e.estimatedCost,color:t(e.name),percentage:r>0?e.estimatedCost/r*100:0})).sort((e,t)=>t.value-e.value).slice(0,5)}),v(()=>{const r=e.value.reduce((e,t)=>e+t.tasks,0);return e.value.map(e=>({label:e.name.split("-")[0],value:e.tasks,color:t(e.name),percentage:r>0?e.tasks/r*100:0}))}),v(()=>{const t=e.value.flatMap(e=>Array(e.tasks).fill(e.avgResponseTime));if(0===t.length)return[];const r=Math.max(...t)/5,a=Array.from({length:5},(e,t)=>({range:`${(t*r).toFixed(1)}-${((t+1)*r).toFixed(1)}s`,count:0,percentage:0}));return t.forEach(e=>{const t=Math.min(Math.floor(e/r),4);a[t].count++}),a.forEach(e=>{e.percentage=e.count/t.length*100}),a})}(le,ce);const de=v(()=>N.value.reduce((e,t)=>e+(t.api_call_log?.cost_estimate?.estimated_cost_usd||0),0).toFixed(4)),ue=v(()=>{const e=parseFloat(de.value);return N.value.length>0?(e/N.value.length).toFixed(6):"0.000000"});async function me(){O.value=!0;try{await f.loadRuns();const{runs:e}=w(f);C.value=e.value}catch(e){console.error("Error loading runs:",e)}finally{O.value=!1}}function pe(e){E.value=e.id,j.value=e}async function fe(e){pe(e),g.value="analysis",await async function(){if(E.value){R.value=!0;try{N.value=await S.tasks.where("run_id").equals(E.value).toArray(),te(),se()}catch(e){console.error("Error loading results:",e)}finally{R.value=!1}}}(),r.replace(`/results/${e.id}`)}function he(){g.value="run-selection",E.value=null,j.value=null,N.value=[],r.replace("/results")}async function ve(e){r.push(`/runs/edit/${e.id}`)}async function ye(e){if(confirm(`Are you sure you want to delete run "${e.name}"?`))try{await S.runs.delete(e.id),await me()}catch(t){console.error("Error deleting run:",t),alert("Failed to delete run")}}h(async()=>{if(await me(),t.params.id){const e=Number(t.params.id),r=C.value.find(t=>t.id===e);r&&await fe(r)}});const ge=(e,t)=>{X.value[e]=t,se()},_e=(e,t)=>{X.value.variables[e]=t,se()},$e=()=>{oe(Y.value,E.value)},be=()=>{ne(Y.value,E.value,X.value)},we=()=>{ie(Y.value,E.value)};function ke(e){I.value=e}function Se(e){M.value=e}async function Ee(){if(!E.value||!j.value)return;const e={metadata:{exported_at:(new Date).toISOString(),auditomatic_version:"2.0.0",export_type:"complete_run",reproducible_hash:btoa(JSON.stringify({design_id:j.value.design_id,parameters:j.value.parameters}))},run:{id:j.value.id,name:j.value.name,design_id:j.value.design_id,status:j.value.status,created_at:j.value.created_at,updated_at:j.value.updated_at,parameters:j.value.parameters},experiment:{total_tasks:N.value.length,completed_tasks:L.value,failed_tasks:K.value,success_rate:G.value,error_rate:J.value,avg_response_time:B.value,models_used:U.value,variables:F.value},results:{tasks:N.value.map(e=>({id:e.id,model:e.model,status:e.status,variables:e.variables,prompt:e.prompt,result:e.result,error:e.error,parsed_results:e.parsed_results,response_time:e.response_time,created_at:e.created_at,completed_at:e.completed_at,api_call_log:e.api_call_log})),summary_statistics:{by_model:W.value,by_variable:Q.value}},cost_analysis:{total_cost:de.value,avg_cost_per_task:ue.value,cost_by_model:W.value.map(e=>({model:e.name,total_cost:N.value.filter(t=>t.model===e.name&&t.api_call_log?.cost_estimate).reduce((e,t)=>e+(t.api_call_log?.cost_estimate.estimated_cost_usd||0),0).toFixed(4)}))},verification:{total_tasks:N.value.length,tasks_with_api_logs:N.value.filter(e=>e.api_call_log).length,tasks_with_results:N.value.filter(e=>e.result).length,tasks_with_errors:N.value.filter(e=>e.error).length,estimated_total_cost:de.value}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`run-${j.value.id}-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}return(e,t)=>(o(),s("div",Nl,["run-selection"===g.value?(o(),s("div",Rl,[t[8]||(t[8]=n("div",{class:"header"},[n("h2",null,"Results")],-1)),i(Cl,{runs:C.value,"filtered-runs":k(V),loading:O.value,"selected-run-id":E.value,"show-incomplete-runs":k(D),"sort-by":k(A),"has-incomplete-runs":k(q),onSelectRun:pe,onViewResults:fe,onEditRun:ve,onDeleteRun:ye,"onUpdate:showIncomplete":t[0]||(t[0]=e=>D.value=e),"onUpdate:sortBy":t[1]||(t[1]=e=>k(z)(e))},null,8,["runs","filtered-runs","loading","selected-run-id","show-incomplete-runs","sort-by","has-incomplete-runs"])])):"analysis"===g.value&&j.value?(o(),s("div",Ol,[n("nav",Il,[n("button",{class:"breadcrumb-link",onClick:he}," ← Results Overview "),t[9]||(t[9]=n("span",{class:"breadcrumb-separator"},"/",-1)),n("span",Tl,u(j.value.name),1)]),n("div",Ml,[n("h2",null,u(j.value.name),1),n("div",Dl,[n("div",Al,[n("button",{class:p(["btn","btn-sm",{active:"summary"===T.value}]),onClick:t[2]||(t[2]=e=>T.value="summary")}," 📊 Summary ",2),n("button",{class:p(["btn","btn-sm",{active:"pivot"===T.value}]),onClick:t[3]||(t[3]=e=>T.value="pivot")}," 📈 Pivot ",2),n("button",{class:p(["btn","btn-sm",{active:"table"===T.value}]),onClick:t[4]||(t[4]=e=>T.value="table")}," 📋 Raw Data ",2)]),N.value.length>0?(o(),s("button",{key:0,class:"btn btn-primary btn-sm export-run-btn",onClick:Ee}," 📤 Export Run ")):m("",!0)])]),R.value?(o(),s("div",zl,t[10]||(t[10]=[n("div",{class:"spinner"},null,-1),n("p",null,"Loading results...",-1)]))):0===N.value.length?(o(),s("div",Vl,t[11]||(t[11]=[n("div",{class:"empty-icon"}," ❌ ",-1),n("h3",null,"No results found",-1),n("p",null,"This run doesn't have any completed tasks or results to analyze.",-1)]))):(o(),s("div",ql,["summary"===T.value?(o(),s("div",Ul,[i(ol,{"success-count":k(L),"error-count":k(K),"success-rate":k(G),"error-rate":k(J),"avg-response-time":k(B),"min-max-response-time":k(H),"total-tasks":N.value.length,"unique-model-count":k(U).length,"total-cost":de.value,"avg-cost-per-task":ue.value,"model-stats":k(W),"variable-stats":k(Q),"get-model-color":k(Z)},null,8,["success-count","error-count","success-rate","error-rate","avg-response-time","min-max-response-time","total-tasks","unique-model-count","total-cost","avg-cost-per-task","model-stats","variable-stats","get-model-color"])])):m("",!0),"pivot"===T.value?(o(),s("div",Fl,[i(On,{tasks:k(Y),onCellClick:Se},null,8,["tasks"])])):m("",!0),"table"===T.value?(o(),s("div",Ll,[i(Jn,{filters:k(X),"unique-models":k(U),"available-variables":k(F),"get-variable-values":k(ee),onUpdateFilter:ge,onUpdateVariableFilter:_e,onResetFilters:k(te)},null,8,["filters","unique-models","available-variables","get-variable-values","onResetFilters"]),i(ki,{tasks:k(Y),"results-count":`${k(Y).length} of ${N.value.length} results`,"get-sort-icon":k(ae),onExportCsv:$e,onExportJson:be,onExportExcel:we,onSortBy:k(re),onViewTask:ke},null,8,["tasks","results-count","get-sort-icon","onSortBy"])])):m("",!0)]))])):m("",!0),I.value?(o(),_(x,{key:2,task:I.value,onClose:t[5]||(t[5]=e=>I.value=null)},null,8,["task"])):m("",!0),M.value?(o(),s("div",{key:3,class:"modal-overlay",onClick:t[7]||(t[7]=y(e=>M.value=null,["self"]))},[n("div",Kl,[n("div",Gl,[n("h3",null,u(M.value.row)+" × "+u(M.value.column),1),n("button",{class:"close-btn",onClick:t[6]||(t[6]=e=>M.value=null)}," × ")]),n("div",Jl,[n("p",null,[n("strong",null,u(M.value.tasks.length),1),t[12]||(t[12]=l(" tasks in this cell:"))]),n("div",Bl,[(o(!0),s(c,null,d(M.value.tasks,e=>{return o(),s("div",{key:e.id,class:"cell-task"},[n("span",{class:p(["task-status",`status-${e.status}`])},u(e.status),3),n("span",Hl,u((t=e.result||e.error||"No result",r=80,t.length<=r?t:t.substring(0,r)+"...")),1),n("button",{class:"btn btn-sm btn-outline",onClick:t=>function(e){M.value=null,I.value=e}(e)}," View ",8,Wl)]);var t,r}),128))])])])])):m("",!0)]))}}),[["__scopeId","data-v-716a2106"]]);export{Ql as default};
