const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Bihjmbxo.js","assets/core-DucnQ6i4.js"])))=>i.map(i=>d[i]);
import{a as c,_ as g}from"./index-C_Jm4ddV.js";const T=typeof window<"u"&&(window.__TAURI_INTERNALS__||window.__TAURI__);let s=fetch,r=null,n=!1;T?r=g(()=>import("./index-Bihjmbxo.js"),__vite__mapDeps([0,1])).then(e=>{s=e.fetch,n=!0,c.info("ðŸ¦€ Tauri HTTP client loaded for CORS bypass")}).catch(e=>{c.warn("Failed to load Tauri HTTP plugin, using browser fetch:",e),s=fetch,n=!0}):n=!0;async function y(){return n||r&&(await r,r=null),s}async function i(e,o={}){var f,h;const p=`http://localhost:11434${e}`,l=window.location.protocol==="https:",w=await y(),u=o.timeout||3e4,m=new AbortController,d=setTimeout(()=>m.abort(),u);try{const a=await w(p,{...o,signal:m.signal,headers:{"Content-Type":"application/json",...o.headers}});return clearTimeout(d),a}catch(a){clearTimeout(d);const t=new Error;throw t.isHttps=l,a.name==="AbortError"?(t.type="timeout",t.message="Request to Ollama timed out",t.details=`The request took longer than ${u/1e3} seconds`):(f=a.message)!=null&&f.includes("Failed to fetch")||(h=a.message)!=null&&h.includes("NetworkError")?l?(t.type="cors",t.message="Cannot connect to Ollama from HTTPS site",t.details="Browser security prevents HTTPS sites from accessing local HTTP services. To use Ollama: 1) Download the desktop app, 2) Run Auditomatic locally, or 3) Configure Ollama with OLLAMA_ORIGINS=*"):(t.type="network",t.message="Cannot connect to Ollama",t.details="Make sure Ollama is running on your computer (http://localhost:11434)"):(t.type="unknown",t.message=a.message||"Unknown error connecting to Ollama",t.details=a.stack),c.warn("Ollama fetch error",{type:t.type,endpoint:e,isHttps:l,originalError:a.message}),t}}async function E(){try{return{available:(await i("/api/tags",{timeout:5e3})).ok}}catch(e){return{available:!1,error:e}}}async function I(){try{return await i("/api/tags",{method:"GET",headers:{Accept:"application/json"}}),{hasIssue:!1}}catch{return{hasIssue:!0,error:"Either Ollama is not running or CORS is not properly configured. Ensure Ollama is running and add OLLAMA_ORIGINS=* to your Ollama service configuration."}}}async function k(){const e=await i("/api/tags");if(!e.ok)throw new Error(`Failed to fetch models: ${e.status} ${e.statusText}`);return e.json()}async function A(e){const o=await i("/api/delete",{method:"DELETE",body:JSON.stringify({name:e})});if(!o.ok)throw new Error(`Failed to delete model: ${o.status} ${o.statusText}`)}export{E as checkOllamaConnection,A as deleteOllamaModel,I as detectOllamaIssue,k as fetchOllamaModels,i as ollamaFetch};
