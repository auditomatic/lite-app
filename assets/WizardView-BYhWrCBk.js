import{e as s,I as Se,f as j,c as T,v as L,x as u,y as I,j as d,A as R,i as e,G as S,ap as je,B as _,h as k,C as ee,F as te,aO as Qe,$ as Ye,aP as Ce,k as Q,ae as ue,z as y,as as ie,r as F,t as J,a as q,W as Je,ax as Z,J as Xe,aB as Ze,aQ as $e,ay as et,av as tt,d as H,ar as ce,D as X,aR as st,ad as ot,w as de,aS as Me,ak as nt,aT as Oe,a7 as it,aU as at,an as lt,Y as rt,Q as dt}from"./index-BjcyMJf8.js";import{useWizardFlow as se}from"./wizard-flow-DgOIOpj9.js";import{W as xe}from"./WarningOutlined-B613K_vE.js";import{u as Ae}from"./useV4Models-LvYBsRZc.js";import{O as ut}from"./OllamaModelManagerV3-C4zDFvG8.js";import{S as ct}from"./SaveOutlined-D7qSgBP_.js";import{E as pt}from"./ExportOutlined-X0bZF9jj.js";import"./useV4LiveQuery-CHMCjA-b.js";import"./FilterOutlined-Bx336SD8.js";import"./ollama-fetch-C70W6BgS.js";import"./UnorderedListOutlined-ChVOZG4D.js";var vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};function ke(P){for(var m=1;m<arguments.length;m++){var i=arguments[m]!=null?Object(arguments[m]):{},l=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(i).filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable}))),l.forEach(function(f){mt(P,f,i[f])})}return P}function mt(P,m,i){return m in P?Object.defineProperty(P,m,{value:i,enumerable:!0,configurable:!0,writable:!0}):P[m]=i,P}var ne=function(m,i){var l=ke({},m,i.attrs);return s(Se,ke({},l,{icon:vt}),null)};ne.displayName="MinusCircleOutlined";ne.inheritAttrs=!1;var ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 736c0-111.6-65.4-208-160-252.9V317.3c0-15.1-5.3-29.7-15.1-41.2L536.5 95.4C530.1 87.8 521 84 512 84s-18.1 3.8-24.5 11.4L335.1 276.1a63.97 63.97 0 00-15.1 41.2v165.8C225.4 528 160 624.4 160 736h156.5c-2.3 7.2-3.5 15-3.5 23.8 0 22.1 7.6 43.7 21.4 60.8a97.2 97.2 0 0043.1 30.6c23.1 54 75.6 88.8 134.5 88.8 29.1 0 57.3-8.6 81.4-24.8 23.6-15.8 41.9-37.9 53-64a97 97 0 0043.1-30.5 97.52 97.52 0 0021.4-60.8c0-8.4-1.1-16.4-3.1-23.8H864zM762.3 621.4c9.4 14.6 17 30.3 22.5 46.6H700V558.7a211.6 211.6 0 0162.3 62.7zM388 483.1V318.8l124-147 124 147V668H388V483.1zM239.2 668c5.5-16.3 13.1-32 22.5-46.6 16.3-25.2 37.5-46.5 62.3-62.7V668h-84.8zm388.9 116.2c-5.2 3-11.2 4.2-17.1 3.4l-19.5-2.4-2.8 19.4c-5.4 37.9-38.4 66.5-76.7 66.5-38.3 0-71.3-28.6-76.7-66.5l-2.8-19.5-19.5 2.5a27.7 27.7 0 01-17.1-3.5c-8.7-5-14.1-14.3-14.1-24.4 0-10.6 5.9-19.4 14.6-23.8h231.3c8.8 4.5 14.6 13.3 14.6 23.8-.1 10.2-5.5 19.6-14.2 24.5zM464 400a48 48 0 1096 0 48 48 0 10-96 0z"}}]},name:"rocket",theme:"outlined"};function we(P){for(var m=1;m<arguments.length;m++){var i=arguments[m]!=null?Object(arguments[m]):{},l=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(l=l.concat(Object.getOwnPropertySymbols(i).filter(function(f){return Object.getOwnPropertyDescriptor(i,f).enumerable}))),l.forEach(function(f){gt(P,f,i[f])})}return P}function gt(P,m,i){return m in P?Object.defineProperty(P,m,{value:i,enumerable:!0,configurable:!0,writable:!0}):P[m]=i,P}var pe=function(m,i){var l=we({},m,i.attrs);return s(Se,we({},l,{icon:ft}),null)};pe.displayName="RocketOutlined";pe.inheritAttrs=!1;const yt={class:"header-content"},ht={class:"wizard-progress"},_t={class:"progress-mobile"},kt={class:"step-counter"},wt={class:"progress-desktop"},bt={class:"content-wrapper"},St={class:"navigation-wrapper"},Ct={class:"btn-text"},$t=j({__name:"WizardContainer",props:{currentStep:{},totalSteps:{},canGoNext:{type:Boolean},canGoBack:{type:Boolean},completedSteps:{}},emits:["next","back","close","complete"],setup(P){const m=P,i=T(()=>m.currentStep===2||m.currentStep===3||m.currentStep===4),l=["Welcome","Security","Providers","Configure","Environment","Complete"];function f(){switch(m.currentStep){case 0:return"Get Started";case 1:return"Continue";case 2:return"Finish Setup";default:return"Continue"}}return(w,C)=>{const x=I("a-button"),c=I("a-progress"),A=I("a-step"),N=I("a-steps"),r=I("a-layout-header"),h=I("a-layout-content"),n=I("a-layout-footer"),$=I("a-layout");return d(),L($,{class:"wizard-layout"},{default:u(()=>[s(r,{class:"wizard-header"},{default:u(()=>[e("div",yt,[s(x,{class:"wizard-close",type:"text",shape:"circle",size:"small",onClick:C[0]||(C[0]=v=>w.$emit("close"))},{icon:u(()=>[s(S(je))]),_:1}),e("div",ht,[e("div",_t,[e("span",kt,_(w.currentStep+1)+" of "+_(w.totalSteps),1),s(c,{percent:Math.round((w.currentStep+1)/w.totalSteps*100),"show-info":!1,size:"small","stroke-color":"var(--color-primary)"},null,8,["percent"])]),e("div",wt,[s(N,{current:w.currentStep,size:"small",responsive:!1},{default:u(()=>[(d(),k(te,null,ee(l,(v,g)=>s(A,{key:g,title:v},null,8,["title"])),64))]),_:1},8,["current"])])])])]),_:1}),s(h,{class:"wizard-content"},{default:u(()=>[e("div",bt,[Qe(w.$slots,"default",{},void 0,!0)])]),_:3}),i.value?R("",!0):(d(),L(n,{key:0,class:"wizard-footer"},{default:u(()=>[e("div",St,[w.canGoBack?(d(),L(x,{key:0,class:"nav-back",onClick:C[1]||(C[1]=v=>w.$emit("back"))},{default:u(()=>[s(S(Ye)),C[4]||(C[4]=e("span",{class:"btn-text"},"Back",-1))]),_:1,__:[4]})):R("",!0),C[6]||(C[6]=e("div",{class:"nav-spacer"},null,-1)),w.currentStep<w.totalSteps-1?(d(),L(x,{key:1,type:"primary",class:"nav-next",onClick:C[2]||(C[2]=v=>w.$emit("next")),disabled:!w.canGoNext},{default:u(()=>[e("span",Ct,_(f()),1),s(S(Ce))]),_:1},8,["disabled"])):(d(),L(x,{key:2,type:"primary",class:"nav-complete",onClick:C[3]||(C[3]=v=>w.$emit("complete"))},{default:u(()=>[C[5]||(C[5]=e("span",{class:"btn-text"},"Get Started",-1)),s(S(pe))]),_:1,__:[5]}))])]),_:1}))]),_:3})}}}),Mt=Q($t,[["__scopeId","data-v-16ee363f"]]),Ot={class:"wizard-welcome"},xt={class:"feature-showcase"},At={class:"feature-grid"},Pt={class:"feature-icon"},It={class:"feature-content"},zt=j({__name:"WizardWelcome",emits:["continue"],setup(P){const m=[{icon:"🌐",title:"Browser Compatibility",description:"Chrome and Firefox are preferred. Safari support is limited.",isWarning:!0},{icon:"⚠️",title:"Experimental Beta",description:"Features may change. Export your data regularly.",isWarning:!0},{icon:"💰",title:"Cost Tracking",description:"Real-time cost estimation with environmental impact tracking.",isWarning:!0},{icon:"🌍",title:"Environmental Impact",description:"CO₂, water & energy usage shown alongside costs.",isWarning:!0},{icon:"💾",title:"Local Storage",description:"All data stored locally in your browser - complete privacy"},{icon:"🤖",title:"Multi-Provider",description:"Test across OpenAI, Anthropic, OpenRouter, Ollama, and more"},{icon:"📝",title:"Design Templates",description:"Create prompt templates with variables for systematic testing"},{icon:"🔄",title:"Variable Lists",description:"Define test values that get substituted into prompts automatically"},{icon:"🧪",title:"Run Trials",description:"Test multiple models and configurations in parallel"},{icon:"📊",title:"Analyze Results",description:"View live progress, compare responses, and export data"},{icon:"⚡",title:"High Performance",description:"Optimized for large datasets with virtual scrolling"},{icon:"🔒",title:"Secure API Keys",description:"Optional encryption for API keys with master password protection"}];return(i,l)=>(d(),k("div",Ot,[l[0]||(l[0]=e("div",{class:"welcome-header"},[e("h1",null,"Welcome to Auditomatic Lite"),e("p",{class:"tagline"},"Browser-Based Testing for Multiple LLM Providers")],-1)),e("div",xt,[e("div",At,[(d(),k(te,null,ee(m,f=>e("div",{key:f.title,class:ue(["feature-card",{"warning-card":f.isWarning}])},[e("div",Pt,_(f.icon),1),e("div",It,[e("h3",null,_(f.title),1),e("p",null,_(f.description),1)])],2)),64))])]),l[1]||(l[1]=e("div",{class:"welcome-actions"},[e("p",{class:"help-text"}," Ready to get started? We'll guide you through setting up security and AI providers. "),e("div",{class:"continue-hint"},[y(" 👇 Click "),e("strong",null,'"Get Started"'),y(" below to continue ")])],-1))]))}}),Rt=Q(zt,[["__scopeId","data-v-d83610b2"]]),Tt={class:"wizard-security"},Wt={key:0,class:"security-setup-required"},Et={class:"security-explanation"},Dt={class:"explanation-section"},Ft={class:"combined-warning"},Nt={class:"platform-specific-risks"},Bt={key:0},Lt={key:1},Ut={class:"setup-action"},qt={key:1,class:"security-configured"},Gt={class:"completion-header"},Kt={class:"current-settings"},Vt={class:"setting-item"},Ht={class:"setting-value"},jt={key:0,class:"setting-item"},Qt={class:"configured-actions"},Yt=j({__name:"WizardSecurity",emits:["security-ready"],setup(P,{emit:m}){const i=m,l=ie(),f=F(!1),w=T(()=>l.secureSettings.hasSetupApiKeySecurity()),C=T(()=>l.hasMasterPassword.value),x=T(()=>typeof window>"u"?!1:window.__TAURI__!==void 0||window.__TAURI_INTERNALS__!==void 0);function c(){const h=l.secureSettings.getDefaultSecurityMode();return{encrypted:"🔒 Encrypted",session:"⚠️ Session Only",plaintext:"📝 Plaintext"}[h]||h}function A(){f.value=!0,q.info("Triggering security setup from wizard")}function N(){f.value=!1}function r(h){f.value=!1,q.info("Security setup completed in wizard",{mode:h.mode}),localStorage.setItem("wizard-security-completed","true"),i("security-ready")}return J(()=>{if(q.info("Wizard security step mounted",{hasSetupSecurity:w.value,defaultMode:l.secureSettings.getDefaultSecurityMode()}),w.value){const h=l.secureSettings.getDefaultSecurityMode();localStorage.setItem("wizard-security-completed","true"),q.info("Security already configured, showing status",{mode:h})}}),(h,n)=>{const $=I("a-button");return d(),k("div",Tt,[w.value?(d(),k("div",qt,[e("div",Gt,[s(S(Z),{class:"completion-icon"}),n[6]||(n[6]=e("h3",null,"Security Already Configured",-1))]),e("div",Kt,[e("div",Vt,[n[7]||(n[7]=e("span",{class:"setting-label"},"Default Security Mode:",-1)),e("span",Ht,_(c()),1)]),C.value?(d(),k("div",jt,n[8]||(n[8]=[e("span",{class:"setting-label"},"Master Password:",-1),e("span",{class:"setting-value"},"✅ Configured",-1)]))):R("",!0)]),e("div",Qt,[s($,{type:"default",onClick:A},{default:u(()=>[s(S(Xe)),n[9]||(n[9]=y(" Change Security Settings "))]),_:1,__:[9]}),s($,{type:"primary",onClick:n[0]||(n[0]=v=>h.$emit("security-ready"))},{default:u(()=>[n[10]||(n[10]=y(" Continue to API Keys ")),s(S(Ce))]),_:1,__:[10]})])])):(d(),k("div",Wt,[n[5]||(n[5]=e("div",{class:"setup-info"},[e("div",{class:"info-card"},[e("div",{class:"card-icon"},"🔐"),e("div",{class:"card-content"},[e("h3",null,"API Key Security Setup Required"),e("p",null," Before adding API keys, you need to choose your security preferences. This is a one-time setup that affects all your API keys. ")])])],-1)),e("div",Et,[e("div",Dt,[e("div",Ft,[n[2]||(n[2]=e("h4",null,"🚨 Why API Key Security Matters",-1)),n[3]||(n[3]=e("p",null,[e("strong",null,"Your API key lets anyone charge your OpenAI/Anthropic/OpenRouter account."),y(" Without proper protection, malicious actors could access and misuse your API keys. ")],-1)),e("div",Nt,[e("h5",null,_(x.value?"💻 Desktop Security Risks:":"🌐 Browser Security Risks:"),1),x.value?(d(),k("p",Bt," If your key is stored unencrypted, anyone who hacks or has access to your computer could steal your API keys. Desktop apps provide better security than browsers, but unprotected keys are still vulnerable to malware and unauthorized access. ")):(d(),k("p",Lt,n[1]||(n[1]=[y(" Anyone with access to this computer could access your browser's storage. Many browser extensions can also access your browser's storage. If you click a phishing link, someone could steal your API key. "),e("br",null,null,-1),e("br",null,null,-1),y(" While this is unlikely, we provide three levels of security. We also recommend creating a new key with a small spending limit specifically for Auditomatic. For added browser security, "),e("a",{href:"https://support.healthsci.queensu.ca/support/solutions/articles/151000178968-separating-web-browser-profiles",target:"_blank",rel:"noopener noreferrer"},"create a separate profile",-1),y(" in your browser for Auditomatic. ")])))])])])]),e("div",Ut,[s($,{type:"primary",size:"large",onClick:A},{default:u(()=>[s(S(Je)),n[4]||(n[4]=y(" Configure Security Settings "))]),_:1,__:[4]})])])),s(Ze,{open:f.value,context:"wizard",onClose:N,onSuccess:r},null,8,["open"])])}}}),Jt=Q(Yt,[["__scopeId","data-v-abe43243"]]),Xt={class:"wizard-provider-selection"},Zt={key:0,class:"discovery-status"},es={key:1,class:"providers-list"},ts={class:"provider-option"},ss={class:"provider-details"},os={class:"provider-status"},ns={key:0,class:"ollama-help"},is={class:"provider-option"},as={class:"provider-details"},ls={class:"provider-status"},rs={class:"model-count"},ds={class:"provider-option"},us={class:"provider-details"},cs={class:"provider-status"},ps={class:"model-count"},vs={class:"provider-option"},ms={class:"provider-details"},fs={class:"provider-status"},gs={class:"model-count"},ys={class:"step-actions"},hs={class:"action-right"},_s=j({__name:"WizardProviderSelection",emits:["continue","skip"],setup(P,{emit:m}){const i=m,l=se(),f=F(!1),w=F(0),C=F(0),x=F(0),c=F(0),A=F("not-running"),N=T(()=>{switch(A.value){case"ready":return`${w.value} models installed`;case"no-models":return"Running but no models installed";case"not-running":return"Not running or CORS not configured"}}),r=F({ollama:!1,anthropic:!1,openrouter:!1,openai:!1}),h=T(()=>r.value.ollama||r.value.anthropic||r.value.openrouter||r.value.openai);async function n(){const M=await H.models.where("provider").equals("ollama-chat").count(),o=await H.models.where("provider").equals("anthropic").count(),G=await H.models.where("provider").equals("openrouter").count(),E=await H.models.where("provider").equals("openai-chat").count(),D=await H.models.where("provider").equals("openai-responses").count();if(w.value=M,C.value=o,x.value=G,c.value=Math.max(E,D),M>0)A.value="ready",r.value.ollama=!0;else try{(await fetch("http://localhost:11434/api/tags")).ok?A.value="no-models":A.value="not-running"}catch{A.value="not-running"}}async function $(){f.value=!0;try{const o=await ce().discoverModels({forceRefresh:!0});X.success(`Discovered ${o.totalModels} models`),await n()}catch(M){q.error("Discovery failed:",M),X.error("Failed to refresh model discovery")}finally{f.value=!1}}async function v(){if(!h.value){X.warning("Please select at least one provider");return}l.setSelectedProviders(r.value),i("continue")}function g(){i("skip")}return J(async()=>{await n()}),(M,o)=>{const G=I("a-checkbox"),E=I("a-button");return d(),k("div",Xt,[o[21]||(o[21]=e("div",{class:"step-header"},[e("h2",null,"Choose Your AI Providers"),e("p",{class:"step-description"}," We've discovered available models. Select which providers you want to configure. ")],-1)),f.value?(d(),k("div",Zt,[s(S($e),{spin:""}),o[4]||(o[4]=y(" Discovering available models... "))])):(d(),k("div",es,[e("label",ts,[s(G,{checked:r.value.ollama,"onUpdate:checked":o[0]||(o[0]=D=>r.value.ollama=D),disabled:A.value==="not-running"},{default:u(()=>[e("div",ss,[o[8]||(o[8]=e("span",{class:"provider-icon"},"🦙",-1)),e("div",null,[o[6]||(o[6]=e("strong",null,"Ollama",-1)),o[7]||(o[7]=e("span",{class:"provider-desc"},"Run models locally on your computer",-1)),e("div",os,[A.value==="ready"?(d(),L(S(Z),{key:0,class:"status-icon success"})):A.value==="not-running"?(d(),L(S(et),{key:1,class:"status-icon error"})):A.value==="no-models"?(d(),L(S(xe),{key:2,class:"status-icon warning"})):R("",!0),e("span",{class:ue(["status-text",A.value])},_(N.value),3)]),A.value==="not-running"?(d(),k("div",ns,o[5]||(o[5]=[e("div",{class:"help-line"},[y("1. Download from "),e("a",{href:"https://ollama.ai",target:"_blank",rel:"noopener noreferrer"},"ollama.ai")],-1),e("div",{class:"help-line"},[y("2. Set "),e("a",{href:"https://objectgraph.com/blog/ollama-cors/",target:"_blank",rel:"noopener noreferrer"},"OLLAMA_ORIGINS=*"),y(" for CORS")],-1)]))):R("",!0)])])]),_:1},8,["checked","disabled"])]),e("label",is,[s(G,{checked:r.value.openai,"onUpdate:checked":o[1]||(o[1]=D=>r.value.openai=D)},{default:u(()=>[e("div",as,[o[11]||(o[11]=e("span",{class:"provider-icon"},"🤖",-1)),e("div",null,[o[9]||(o[9]=e("strong",null,"OpenAI",-1)),o[10]||(o[10]=e("span",{class:"provider-desc"},"GPT-4 and GPT-3.5 models - API key required",-1)),e("div",ls,[e("span",rs,_(c.value)+" models available",1)])])])]),_:1},8,["checked"])]),e("label",ds,[s(G,{checked:r.value.openrouter,"onUpdate:checked":o[2]||(o[2]=D=>r.value.openrouter=D)},{default:u(()=>[e("div",us,[o[14]||(o[14]=e("span",{class:"provider-icon"},"🌐",-1)),e("div",null,[o[12]||(o[12]=e("strong",null,"OpenRouter",-1)),o[13]||(o[13]=e("span",{class:"provider-desc"},"100+ models from many providers - API key required",-1)),e("div",cs,[e("span",ps,_(x.value)+" models available",1)])])])]),_:1},8,["checked"])]),e("label",vs,[s(G,{checked:r.value.anthropic,"onUpdate:checked":o[3]||(o[3]=D=>r.value.anthropic=D)},{default:u(()=>[e("div",ms,[o[17]||(o[17]=e("span",{class:"provider-icon"},"🧠",-1)),e("div",null,[o[15]||(o[15]=e("strong",null,"Anthropic",-1)),o[16]||(o[16]=e("span",{class:"provider-desc"},"Access Claude models - API key required",-1)),e("div",fs,[e("span",gs,_(C.value)+" models available",1)])])])]),_:1},8,["checked"])])])),e("div",ys,[s(E,{onClick:$,size:"large",loading:f.value},{default:u(()=>[s(S(tt)),o[18]||(o[18]=y(" Refresh Discovery "))]),_:1,__:[18]},8,["loading"]),e("div",hs,[s(E,{onClick:g,size:"large"},{default:u(()=>o[19]||(o[19]=[y(" Skip Setup ")])),_:1,__:[19]}),s(E,{type:"primary",onClick:v,size:"large",disabled:!h.value||f.value},{default:u(()=>o[20]||(o[20]=[y(" Continue ")])),_:1,__:[20]},8,["disabled"])])])])}}}),ks=Q(_s,[["__scopeId","data-v-f56e7f48"]]),ws={class:"wizard-model-grid"},bs={class:"grid-header"},Ss={class:"grid-controls"},Cs={class:"models-list"},$s={class:"model-info"},Ms={class:"model-name"},Os={class:"model-meta"},xs={key:0,class:"context"},As={key:1,class:"model-cost"},Ps={class:"grid-footer"},Is=j({__name:"WizardModelGrid",props:{providerId:{},providerName:{},selectedModels:{}},emits:["update:selectedModels"],setup(P,{emit:m}){const i=P,l=m,{modelsByProvider:f}=Ae(),w=T(()=>f.value[i.providerId]||[]),C=F(""),x=T(()=>{const v=C.value.toLowerCase();return v?w.value.filter(g=>g.modelId.toLowerCase().includes(v)||g.displayName.toLowerCase().includes(v)):w.value});function c(v){return i.selectedModels.includes(v)}function A(v){const g=[...i.selectedModels],M=g.indexOf(v);M>=0?g.splice(M,1):g.push(v),l("update:selectedModels",g)}function N(){l("update:selectedModels",x.value.map(v=>v.id))}function r(){l("update:selectedModels",[])}function h(){if(["openai-chat","openai-responses","anthropic"].includes(i.providerId)){const M=w.value.filter(o=>o.enabled).map(o=>o.id);if(M.length>0){l("update:selectedModels",M);return}}const g=w.value.filter(M=>{const o=M.modelId.toLowerCase();return o.includes("nano")||o.includes("mini")||o.includes("haiku")||o.includes("3.5")||o.includes("mistral")||o.includes("llama3")}).slice(0,5).map(M=>M.id);g.length===0?l("update:selectedModels",w.value.slice(0,5).map(M=>M.id)):l("update:selectedModels",g)}function n(v){return v>=1e6?`${(v/1e6).toFixed(1)}M`:v>=1e3?`${(v/1e3).toFixed(0)}K`:`${v}`}function $(v){var G,E;const g=(G=v.capabilities)==null?void 0:G.inputCostPerToken,M=(E=v.capabilities)==null?void 0:E.outputCostPerToken;if(!g&&!M)return null;const o=((g||0)+(M||0))/2*1e6;return o===0?null:o<.01?o.toFixed(4):o<1?o.toFixed(2):o.toFixed(0)}return J(()=>{i.selectedModels.length===0&&h()}),(v,g)=>{const M=I("a-input-search"),o=I("a-button"),G=I("a-button-group"),E=I("a-checkbox");return d(),k("div",ws,[e("div",bs,[e("h3",null,"Select "+_(v.providerName)+" Models",1),e("div",Ss,[s(M,{value:C.value,"onUpdate:value":g[0]||(g[0]=D=>C.value=D),placeholder:"Search models...",size:"small",style:{width:"200px"}},null,8,["value"]),s(G,{size:"small"},{default:u(()=>[s(o,{onClick:N},{default:u(()=>g[1]||(g[1]=[y("Select All")])),_:1,__:[1]}),s(o,{onClick:r},{default:u(()=>g[2]||(g[2]=[y("Select None")])),_:1,__:[2]}),s(o,{onClick:h},{default:u(()=>g[3]||(g[3]=[y("Defaults")])),_:1,__:[3]})]),_:1})])]),g[4]||(g[4]=e("div",{class:"description-row"},[e("p",{class:"header-description"}," Choose which models appear in the UI. You can always enable/disable more models in the Models tab. ")],-1)),e("div",Cs,[(d(!0),k(te,null,ee(x.value,D=>(d(),k("label",{key:D.id,class:"model-item"},[s(E,{checked:c(D.id),onChange:U=>A(D.id)},{default:u(()=>{var U;return[e("div",$s,[e("code",Ms,_(D.modelId),1),e("span",Os,[(U=D.capabilities)!=null&&U.contextWindow?(d(),k("span",xs,_(n(D.capabilities.contextWindow)),1)):R("",!0),$(D)?(d(),k("span",As," $"+_($(D))+"/1M ",1)):R("",!0)])])]}),_:2},1032,["checked","onChange"])]))),128))]),e("div",Ps,[e("span",null,_(v.selectedModels.length)+" models selected",1)])])}}}),zs=Q(Is,[["__scopeId","data-v-cd6e7b82"]]),Rs={class:"openrouter-settings"},Ts={class:"privacy-warning"},Ws={class:"settings-options"},Es={class:"setting-option"},Ds={class:"setting-option"},Fs={class:"model-preview"},Ns={class:"preview-list"},Bs={key:0,class:"preview-item hidden"},Ls={key:1,class:"preview-item hidden"},Us={key:2,class:"preview-item shown"},qs={class:"settings-actions"},Gs=j({__name:"WizardOpenRouterSettings",emits:["save","cancel"],setup(P,{emit:m}){const i=m,l=F({hideOpenRouterFree:!0,hideOpenRouterAuto:!0}),f=T(()=>l.value.hideOpenRouterFree||l.value.hideOpenRouterAuto);async function w(){await H.settings.get("main")?await H.settings.update("main",{hideOpenRouterFree:l.value.hideOpenRouterFree,hideOpenRouterAuto:l.value.hideOpenRouterAuto}):await H.settings.add({id:"main",version:1,initialized:!0,hideOpenRouterFree:l.value.hideOpenRouterFree,hideOpenRouterAuto:l.value.hideOpenRouterAuto}),i("save",l.value)}function C(){i("cancel")}return(x,c)=>{const A=I("a-checkbox"),N=I("a-button");return d(),k("div",Rs,[e("div",Ts,[s(S(xe),{class:"warning-icon"}),c[2]||(c[2]=e("div",{class:"warning-content"},[e("h4",null,"About Free Models"),e("p",null,[y(" OpenRouter offers some models for free. However, "),e("strong",null,"your prompts and responses may be sold, publicly released, and used to train models"),y(". Free models are rate-limited and should not be used for sensitive data. ")])],-1))]),e("div",Ws,[e("label",Es,[s(A,{checked:l.value.hideOpenRouterFree,"onUpdate:checked":c[0]||(c[0]=r=>l.value.hideOpenRouterFree=r)},{default:u(()=>c[3]||(c[3]=[e("div",{class:"option-content"},[e("strong",null,"Hide free models"),e("span",{class:"option-desc"},"Free models may use your data for training")],-1)])),_:1,__:[3]},8,["checked"])]),e("label",Ds,[s(A,{checked:l.value.hideOpenRouterAuto,"onUpdate:checked":c[1]||(c[1]=r=>l.value.hideOpenRouterAuto=r)},{default:u(()=>c[4]||(c[4]=[e("div",{class:"option-content"},[e("strong",null,"Hide Auto Router"),e("span",{class:"option-desc"},"Auto Router automatically selects models, making costs unpredictable")],-1)])),_:1,__:[4]},8,["checked"])])]),e("div",Fs,[e("h4",null,"Models that will be "+_(f.value?"hidden":"shown")+":",1),e("div",Ns,[l.value.hideOpenRouterFree?(d(),k("div",Bs,[s(S(ne)),c[5]||(c[5]=y(" All free models (pricing = $0) "))])):R("",!0),l.value.hideOpenRouterAuto?(d(),k("div",Ls,[s(S(ne)),c[6]||(c[6]=y(" openrouter/auto (meta-model router) "))])):R("",!0),f.value?R("",!0):(d(),k("div",Us,[s(S(Z)),c[7]||(c[7]=y(" All OpenRouter models will be shown "))]))])]),e("div",qs,[s(N,{onClick:C,size:"large"},{default:u(()=>c[8]||(c[8]=[y(" Cancel ")])),_:1,__:[8]}),s(N,{type:"primary",onClick:w,size:"large"},{default:u(()=>c[9]||(c[9]=[y(" Save Settings ")])),_:1,__:[9]})])])}}}),Ks=Q(Gs,[["__scopeId","data-v-0c2211de"]]),Vs={class:"wizard-provider-config"},Hs={class:"provider-header"},js={class:"provider-icon"},Qs={key:0,class:"api-key-stage"},Ys={class:"help-link"},Js=["href"],Xs={class:"stage-actions"},Zs={key:1,class:"ollama-check-stage"},eo={class:"ollama-info"},to={class:"ollama-manager-wrapper"},so={class:"stage-actions"},oo={key:2,class:"ollama-endpoints-stage"},no={class:"endpoint-selection"},io={class:"endpoint-option"},ao={class:"endpoint-option"},lo={class:"endpoint-note"},ro={class:"stage-actions"},uo={key:3,class:"openai-endpoints-stage"},co={class:"endpoint-selection"},po={class:"endpoint-option"},vo={class:"endpoint-option"},mo={class:"endpoint-note"},fo={class:"stage-actions"},go={key:4,class:"model-select-stage"},yo={class:"model-select-option"},ho={class:"model-name"},_o={key:0,class:"model-cost"},ko={key:0,class:"test-preview"},wo={class:"test-info"},bo={class:"info-item"},So={class:"info-item"},Co={key:0},$o={key:1},Mo={class:"stage-actions"},Oo={key:5,class:"testing-stage"},xo={class:"test-status"},Ao={key:6,class:"results-stage"},Po={class:"test-details"},Io={class:"detail-item"},zo={class:"response-text"},Ro={class:"detail-item"},To={class:"detail-item"},Wo={key:0,class:"detail-item"},Eo={key:7,class:"openrouter-settings-stage"},Do={key:8,class:"models-stage"},Fo={class:"stage-actions"},No="Hello! Respond with a one-word greeting.",be=16,Bo=j({__name:"WizardProviderConfig",emits:["continue","complete"],setup(P,{emit:m}){const i=m,l=se(),f=ie(),w=f.secureSettings,C=st(),{modelsByProvider:x}=Ae(),c=ot(),A=T(()=>{try{const a=c.estimateTokens(No);return typeof a=="number"&&a>0?a:10}catch(a){return q.warn("Token calculation failed:",a),10}}),N=new it(a=>C.startTrialWithStreaming(a)),r=F("api-key"),h=F(""),n=F(""),$=F([]),v=F(""),g=F(["ollama-chat"]),M=F(["openai-responses"]),o=F(null),G=T(()=>[...x.value[K.value]||[]].sort((p,O)=>{var W,V;const b=(W=p.capabilities)==null?void 0:W.inputCostPerToken,z=(V=O.capabilities)==null?void 0:V.inputCostPerToken;return b!==void 0&&z!==void 0?b-z:b!==void 0&&z===void 0?-1:b===void 0&&z!==void 0?1:(p.displayName||p.modelId).localeCompare(O.displayName||O.modelId)}).map(p=>{var O,b;return{id:p.id,modelId:p.modelId,name:p.displayName||p.modelId,inputCost:(O=p.capabilities)!=null&&O.inputCostPerToken?p.capabilities.inputCostPerToken*1e6:void 0,outputCost:(b=p.capabilities)!=null&&b.outputCostPerToken?p.capabilities.outputCostPerToken*1e6:void 0}})),E=F({success:!1}),D={"openai-chat":"gpt-4.1-nano-2025-04-14","openai-responses":"gpt-4.1-nano-2025-04-14",anthropic:"claude-3-haiku-20240307",openrouter:"mistralai/mistral-nemo","ollama-chat":"llama3.2"},U=T(()=>l.currentProviderId||""),K=T(()=>{const a=U.value;switch(a){case"ollama":return"ollama-chat";case"openai":return"openai-chat";case"anthropic":return"anthropic";case"openrouter":return"openrouter";default:return a}}),oe=T(()=>v.value||D[K.value]||"unknown"),ve=T(()=>{if(!v.value)return null;try{const t=(x.value[K.value]||[]).find(V=>V.modelId===v.value);if(!(t!=null&&t.capabilities))return null;const p=t.capabilities.inputCostPerToken,O=t.capabilities.outputCostPerToken;if(typeof p!="number"||typeof O!="number")return"Free";const b=A.value*p,z=be*O,W=b+z;return!Number.isFinite(W)||W<0?null:W===0?"Free":`$${me(W)}`}catch(a){return q.warn("Cost calculation failed:",a),null}});function Pe(a,t){var b,z;const p=a.toLowerCase();return(((b=t.label)==null?void 0:b.toLowerCase())||((z=t.value)==null?void 0:z.toLowerCase())||"").includes(p)}function me(a){if(a===0)return"0.000000";if(a<1e-6){const t=Math.floor(Math.log10(a)),p=Math.max(6,Math.abs(t)+1);return a.toFixed(p)}return a.toFixed(6)}const ae=T(()=>{const a=U.value;return{ollama:{name:"Ollama",icon:"🦙",group:"ollama"},anthropic:{name:"Anthropic",icon:"🧠",group:"anthropic"},openrouter:{name:"OpenRouter",icon:"🌐",group:"openrouter"},openai:{name:"OpenAI",icon:"🤖",group:"openai"}}[a]||{name:"Unknown",icon:"❓",group:"unknown"}}),Y=T(()=>ae.value.name),Ie=T(()=>ae.value.icon),fe=T(()=>ae.value.group),ze=T(()=>{const a=l.providerQueue;return l.currentProviderIndex<a.length-1});function Re(){return{anthropic:"https://console.anthropic.com/account/keys",openrouter:"https://openrouter.ai/keys",openai:"https://platform.openai.com/api-keys",ollama:"https://ollama.com"}[U.value]||"#"}function Te(a){var O,b;const t=((O=a.message)==null?void 0:O.toLowerCase())||"",p=a.status||((b=a.response)==null?void 0:b.status);return t==="timeout"?"Test timed out after 30 seconds. The API may be overloaded or slow.":t.includes("network")||t.includes("fetch")||t.includes("connection")?"Network connection failed. Check your internet connection and try again.":p===401||t.includes("unauthorized")||t.includes("api key")||t.includes("authentication")?"Invalid API key. Please check your API key and try again.":p===429||t.includes("rate limit")||t.includes("too many requests")?"Rate limit exceeded. Please wait a moment and try again.":p===402||t.includes("quota")||t.includes("billing")||t.includes("usage")?"Account quota exceeded. Please check your billing status.":p===404||t.includes("model")&&t.includes("not found")?"Selected model is not available. Please try a different model.":p>=500||t.includes("server error")||t.includes("internal error")?"Server error. The API service may be temporarily unavailable.":`Connection failed: ${a.message||"Unknown error"}`}async function ge(){const a=U.value;if(!h.value.trim()){n.value="API key is required";return}const t=f.secureSettings.hasSetupApiKeySecurity()?f.secureSettings.getDefaultSecurityMode():"plaintext";await w.setApiKey(fe.value,h.value.trim(),t),a==="openrouter"?r.value="openrouter-settings":r.value="model-select"}async function We(){var a,t;o.value&&o.value.abort(),o.value=new AbortController,r.value="testing",n.value="";try{const p=U.value;let O=K.value;p==="ollama"&&g.value.length>0?O=g.value[0]:p==="openai"&&M.value.length>0&&(O=M.value[0]);const b={provider:O,modelId:oe.value,temperature:.7,stream:!1};O==="openai-chat"?b.max_completion_tokens=16:O==="openai-responses"?b.max_output_tokens=16:O==="anthropic"||O==="openrouter"?b.max_tokens=16:O==="ollama-chat"&&(b.num_predict=16);const z=new Promise((V,re)=>{setTimeout(()=>re(new Error("TIMEOUT")),3e4)}),W=await Promise.race([N.executePlaygroundCall("Hello! Respond with a one-word greeting.",b),z]);if(W.ok){const V=W.value;E.value={success:!0,response:V.content||"Test successful",latency:V.latency,cost:((a=V.cost)==null?void 0:a.total)||0}}else throw W.error;r.value="results"}catch(p){if(p.name==="AbortError"||(t=p.message)!=null&&t.includes("abort"))return;E.value={success:!1,error:Te(p)},r.value="results"}}function Ee(){const a=U.value;a==="ollama"?r.value="ollama-endpoints":a==="openai"?r.value="openai-endpoints":r.value="api-key"}function le(){l.setProviderConfig(U.value,{testStatus:"skipped",enabledModels:[]}),l.nextProvider()?ye():i("complete")}async function De(){const t={"openai-chat":"openai-defaults","openai-responses":"openai-defaults",anthropic:"anthropic-defaults"}[K.value];if(t)try{await at().applyList(t),await new Promise(O=>setTimeout(O,100))}catch(p){q.error(`Failed to apply ${t} list:`,p)}await Be(),r.value="models"}function Fe(){r.value="model-select"}function Ne(){r.value="api-key"}async function Be(){const a=x.value[K.value]||[];if($.value=a.filter(t=>t.enabled).map(t=>t.id),$.value.length===0){const t=a.slice(0,5).map(p=>p.id);$.value=t}}async function Le(){const a=U.value;let t=[];a==="ollama"?t=g.value:a==="openai"?t=M.value:t=[K.value];const p=new Set($.value.map(z=>{const W=z.indexOf(":");return W>-1?z.substring(W+1):z}));for(const z of t)await H.models.where("provider").equals(z).modify(W=>{W.enabled=p.has(W.modelId),W.userModified=!0});const O=[];a==="ollama"?O.push("ollama-chat","ollama-generate"):a==="openai"&&O.push("openai-chat","openai-responses");const b=O.filter(z=>!t.includes(z));for(const z of b)await H.models.where("provider").equals(z).modify(W=>{W.enabled=!1,W.userModified=!0});l.setProviderConfig(U.value,{apiKey:h.value,testStatus:"success",testResponse:{content:E.value.response||"",latency:E.value.latency||0,model:oe.value},enabledModels:$.value}),l.nextProvider()?ye():i("complete")}function ye(){o.value&&(o.value.abort(),o.value=null);const a=U.value;if(a==="ollama"){const t=x.value["ollama-chat"]||[];r.value=t.length>0?"ollama-endpoints":"ollama-check"}else a==="openai"?r.value="openai-endpoints":r.value="api-key";h.value="",$.value=[],v.value="",E.value={success:!1},n.value="",g.value=["ollama-chat"],M.value=["openai-responses"]}function Ue(){var O;const a=x.value[K.value]||[];if(a.length===0)return;const t=D[K.value],p=a.find(b=>b.modelId===t);v.value=(p==null?void 0:p.modelId)||((O=a[0])==null?void 0:O.modelId)||""}function qe(){if(g.value.length===0){X.warning("Please select at least one Ollama endpoint");return}l.setSelectedEndpoints({...l.selectedEndpoints,ollama:g.value}),r.value="model-select"}async function Ge(){if(M.value.length===0){X.warning("Please select at least one OpenAI endpoint");return}l.setSelectedEndpoints({...l.selectedEndpoints,openai:M.value}),r.value="api-key"}async function he(){await ce().discoverModels({forceRefresh:!0}),(x.value["ollama-chat"]||[]).length>0?r.value="ollama-endpoints":X.info("Refreshing models... This may take a moment.")}async function Ke(){await he()}return de(()=>l.currentProviderId,async a=>{if(a){const t=a;if(t!=="ollama"&&t!=="openai"){const p=await w.getApiKey(t);p&&(h.value=p)}}}),de([()=>x.value[K.value],()=>K.value],([a,t],[,p])=>{a&&a.length>0&&(!v.value||t!==p)&&Ue()},{immediate:!0}),de(()=>x.value["ollama-chat"],a=>{U.value==="ollama"&&r.value==="ollama-check"&&a&&a.length>0&&(r.value="ollama-endpoints")},{immediate:!1}),J(async()=>{const a=U.value;if(a==="ollama"){(x.value["ollama-chat"]||[]).length>0?r.value="ollama-endpoints":r.value="ollama-check";return}if(a==="openai"){r.value="openai-endpoints";const p=await w.getApiKey(a);p&&(h.value=p);return}r.value="api-key";const t=await w.getApiKey(fe.value);t&&(h.value=t)}),Me(()=>{o.value&&o.value.abort()}),(a,t)=>{const p=I("a-input-password"),O=I("a-form-item"),b=I("a-button"),z=I("a-checkbox"),W=I("a-checkbox-group"),V=I("a-alert"),re=I("a-select-option"),Ve=I("a-select"),_e=I("a-result"),He=I("a-space");return d(),k("div",Vs,[e("div",Hs,[e("span",js,_(Ie.value),1),e("h2",null,"Configure "+_(Y.value),1)]),r.value==="api-key"?(d(),k("div",Qs,[s(O,{label:"API Key","validate-status":n.value?"error":"",help:n.value},{default:u(()=>[s(p,{value:h.value,"onUpdate:value":t[0]||(t[0]=B=>h.value=B),size:"large",placeholder:`Enter your ${Y.value} API key`,onKeyup:nt(ge,["enter"])},null,8,["value","placeholder"])]),_:1},8,["validate-status","help"]),e("div",Ys,[e("a",{href:Re(),target:"_blank"},[s(S(Oe)),y(" How to get "+_(Y.value)+" API key ",1)],8,Js)]),e("div",Xs,[s(b,{onClick:le,size:"large"},{default:u(()=>[y(" Skip "+_(Y.value),1)]),_:1}),s(b,{type:"primary",onClick:ge,size:"large",disabled:!h.value.trim()},{default:u(()=>t[7]||(t[7]=[y(" Continue ")])),_:1,__:[7]},8,["disabled"])])])):R("",!0),r.value==="ollama-check"?(d(),k("div",Zs,[e("div",eo,[t[10]||(t[10]=e("h3",null,"Ollama Needs Models",-1)),t[11]||(t[11]=e("p",null,"Ollama is running but no models are installed. Use the model manager below to install models:",-1)),e("div",to,[s(ut,{onModelsUpdated:Ke})]),e("div",so,[s(b,{onClick:le,size:"large"},{default:u(()=>t[8]||(t[8]=[y(" Skip Ollama ")])),_:1,__:[8]}),s(b,{type:"primary",onClick:he,size:"large"},{default:u(()=>t[9]||(t[9]=[y(" Continue with Installed Models ")])),_:1,__:[9]})])])])):R("",!0),r.value==="ollama-endpoints"?(d(),k("div",oo,[e("div",no,[t[15]||(t[15]=e("h3",null,"Select Ollama Endpoints",-1)),t[16]||(t[16]=e("p",{class:"description"}," Choose which Ollama endpoints to enable. If unsure, we recommend using just the Chat endpoint. ",-1)),s(W,{value:g.value,"onUpdate:value":t[1]||(t[1]=B=>g.value=B),class:"endpoint-options"},{default:u(()=>[e("div",io,[s(z,{value:"ollama-chat"},{default:u(()=>t[12]||(t[12]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Chat Endpoint (Recommended)"),e("div",{class:"endpoint-desc"},"Standard chat completions API - works with most models")],-1)])),_:1,__:[12]})]),e("div",ao,[s(z,{value:"ollama-generate"},{default:u(()=>t[13]||(t[13]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Generate Endpoint (Advanced)"),e("div",{class:"endpoint-desc"},"Raw generation API - for advanced use cases")],-1)])),_:1,__:[13]})])]),_:1},8,["value"]),e("div",lo,[s(V,{type:"info",message:"Models you select will be enabled for all chosen endpoints","show-icon":""})]),e("div",ro,[s(b,{type:"primary",size:"large",onClick:qe},{default:u(()=>t[14]||(t[14]=[y(" Continue to Model Selection ")])),_:1,__:[14]})])])])):R("",!0),r.value==="openai-endpoints"?(d(),k("div",uo,[e("div",co,[t[20]||(t[20]=e("h3",null,"Select OpenAI Endpoints",-1)),t[21]||(t[21]=e("p",{class:"description"}," Choose which OpenAI endpoints to enable. Both work with all OpenAI models. ",-1)),s(W,{value:M.value,"onUpdate:value":t[2]||(t[2]=B=>M.value=B),class:"endpoint-options"},{default:u(()=>[e("div",po,[s(z,{value:"openai-chat"},{default:u(()=>t[17]||(t[17]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Chat Completions API"),e("div",{class:"endpoint-desc"},"Traditional OpenAI endpoint - widely supported")],-1)])),_:1,__:[17]})]),e("div",vo,[s(z,{value:"openai-responses"},{default:u(()=>t[18]||(t[18]=[e("div",{class:"endpoint-info"},[e("div",{class:"endpoint-name"},"Responses API (Recommended)"),e("div",{class:"endpoint-desc"},"Newer endpoint with better error handling and structured outputs")],-1)])),_:1,__:[18]})])]),_:1},8,["value"]),e("div",mo,[s(V,{type:"info",message:"Models you select will be enabled for all chosen endpoints","show-icon":""})]),e("div",fo,[s(b,{type:"primary",size:"large",onClick:Ge},{default:u(()=>t[19]||(t[19]=[y(" Continue to Model Selection ")])),_:1,__:[19]})])])])):R("",!0),r.value==="model-select"?(d(),k("div",go,[e("h3",null,"Select a model to test "+_(Y.value),1),t[28]||(t[28]=e("p",null,"Choose which model to use for testing the connection:",-1)),s(Ve,{value:v.value,"onUpdate:value":t[3]||(t[3]=B=>v.value=B),size:"large",placeholder:"Select a model to test",style:{width:"100%"},"show-search":"","filter-option":Pe},{default:u(()=>[(d(!0),k(te,null,ee(G.value,B=>(d(),L(re,{key:B.id,value:B.modelId},{default:u(()=>[e("div",yo,[e("code",ho,_(B.name),1),B.inputCost!==void 0&&B.outputCost!==void 0?(d(),k("span",_o," $"+_(B.inputCost.toFixed(4))+"/1M in, $"+_(B.outputCost.toFixed(4))+"/1M out ",1)):R("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),v.value?(d(),k("div",ko,[t[25]||(t[25]=e("h4",null,"Test Details",-1)),e("div",wo,[t[24]||(t[24]=e("div",{class:"info-item"},[e("strong",null,"Prompt:"),e("code",{class:"prompt-text"},"Hello! Respond with a one-word greeting.")],-1)),e("div",bo,[t[22]||(t[22]=e("strong",null,"Estimated tokens:",-1)),e("span",null,_(A.value)+" input, "+_(be)+" output (capped)",1)]),e("div",So,[t[23]||(t[23]=e("strong",null,"Estimated cost:",-1)),ve.value?(d(),k("span",Co,_(ve.value),1)):(d(),k("span",$o,"Free (local model)"))])])])):R("",!0),e("div",Mo,[s(b,{onClick:Ee,size:"large"},{default:u(()=>t[26]||(t[26]=[y(" Back ")])),_:1,__:[26]}),s(b,{type:"primary",onClick:We,size:"large",disabled:!v.value},{default:u(()=>t[27]||(t[27]=[y(" Test Connection ")])),_:1,__:[27]},8,["disabled"])])])):R("",!0),r.value==="testing"?(d(),k("div",Oo,[e("div",xo,[s(S($e),{spin:"",class:"test-spinner"}),e("p",null,"Testing connection with "+_(oe.value)+"...",1),t[29]||(t[29]=e("p",{class:"test-detail"},"Sending test prompt...",-1))])])):R("",!0),r.value==="results"?(d(),k("div",Ao,[E.value.success?(d(),L(_e,{key:0,status:"success",title:`${Y.value} Connected Successfully!`},{extra:u(()=>[e("div",Po,[e("div",Io,[t[30]||(t[30]=e("strong",null,"Response:",-1)),e("div",zo,_(E.value.response),1)]),e("div",Ro,[t[31]||(t[31]=e("strong",null,"Model:",-1)),y(" "+_(oe.value),1)]),e("div",To,[t[32]||(t[32]=e("strong",null,"Latency:",-1)),y(" "+_(E.value.latency)+"ms ",1)]),E.value.cost!==void 0&&E.value.cost>0?(d(),k("div",Wo,[t[33]||(t[33]=e("strong",null,"Actual Cost:",-1)),y(" $"+_(me(E.value.cost)),1)])):R("",!0)]),s(b,{type:"primary",onClick:De,size:"large"},{default:u(()=>t[34]||(t[34]=[y(" Select Models ")])),_:1,__:[34]})]),_:1},8,["title"])):(d(),L(_e,{key:1,status:"error",title:`${Y.value} Connection Failed`,"sub-title":E.value.error},{extra:u(()=>[s(He,null,{default:u(()=>[s(b,{onClick:t[4]||(t[4]=B=>r.value="api-key")},{default:u(()=>t[35]||(t[35]=[y(" Try Different Key ")])),_:1,__:[35]}),s(b,{onClick:le},{default:u(()=>[y(" Skip "+_(Y.value),1)]),_:1})]),_:1})]),_:1},8,["title","sub-title"]))])):R("",!0),r.value==="openrouter-settings"?(d(),k("div",Eo,[s(Ks,{onSave:Fe,onCancel:Ne})])):R("",!0),r.value==="models"?(d(),k("div",Do,[s(zs,{"provider-id":K.value,"provider-name":Y.value,"selected-models":$.value,"onUpdate:selectedModels":t[5]||(t[5]=B=>$.value=B)},null,8,["provider-id","provider-name","selected-models"]),e("div",Fo,[s(b,{onClick:t[6]||(t[6]=B=>r.value="results"),size:"large"},{default:u(()=>t[36]||(t[36]=[y(" Back ")])),_:1,__:[36]}),s(b,{type:"primary",onClick:Le,size:"large"},{default:u(()=>[y(_(ze.value?"Next Provider":"Complete Setup"),1)]),_:1})])])):R("",!0)])}}}),Lo=Q(Bo,[["__scopeId","data-v-e057ced6"]]),Uo={class:"wizard-environment"},qo={class:"metrics-options"},Go={class:"metric-card clickable"},Ko={class:"metric-card clickable"},Vo={class:"info-section"},Ho={class:"info-box"},jo={class:"step-actions"},Qo=j({__name:"WizardEnvironment",emits:["continue","back"],setup(P,{emit:m}){const i=m,l=se(),f=F({showWater:!0,showElectricity:!0});function w(){l.setEnvironmentalMetrics(f.value),i("continue")}function C(){i("back")}return J(()=>{f.value={showWater:l.environmentalMetrics.showWater,showElectricity:l.environmentalMetrics.showElectricity}}),(x,c)=>{const A=I("a-checkbox"),N=I("a-button");return d(),k("div",Uo,[c[8]||(c[8]=e("div",{class:"step-header"},[e("h2",null,"Environmental Impact Tracking"),e("p",{class:"step-description"}," Choose which environmental metrics to display alongside cost estimates ")],-1)),e("div",qo,[c[4]||(c[4]=e("div",{class:"metric-card always-on"},[e("div",{class:"metric-icon"},"🌍"),e("div",{class:"metric-info"},[e("h3",null,"CO₂ Emissions"),e("p",null,"Carbon dioxide emissions from model inference"),e("div",{class:"always-on-badge"},"Always Enabled")])],-1)),e("label",Go,[s(A,{checked:f.value.showWater,"onUpdate:checked":c[0]||(c[0]=r=>f.value.showWater=r),class:"metric-checkbox"},{default:u(()=>c[2]||(c[2]=[e("div",{class:"metric-content"},[e("div",{class:"metric-icon"},"💧"),e("div",{class:"metric-info"},[e("h3",null,"Water Usage"),e("p",null,"Water consumption for data center cooling")])],-1)])),_:1,__:[2]},8,["checked"])]),e("label",Ko,[s(A,{checked:f.value.showElectricity,"onUpdate:checked":c[1]||(c[1]=r=>f.value.showElectricity=r),class:"metric-checkbox"},{default:u(()=>c[3]||(c[3]=[e("div",{class:"metric-content"},[e("div",{class:"metric-icon"},"⚡"),e("div",{class:"metric-info"},[e("h3",null,"Energy Consumption"),e("p",null,"Electricity usage for model computation")])],-1)])),_:1,__:[3]},8,["checked"])])]),e("div",Vo,[e("div",Ho,[s(S(lt),{class:"info-icon"}),c[5]||(c[5]=e("div",{class:"info-content"},[e("h4",null,"Why track environmental impact?"),e("ul",null,[e("li",null,"AI models consume significant computational resources"),e("li",null,"Understanding environmental costs helps make informed decisions"),e("li",null,"Choose efficient models when appropriate for your use case"),e("li",null,"Consider batching requests to reduce overhead")])],-1))])]),e("div",jo,[s(N,{onClick:C,size:"large"},{default:u(()=>c[6]||(c[6]=[y(" Back ")])),_:1,__:[6]}),s(N,{type:"primary",onClick:w,size:"large"},{default:u(()=>c[7]||(c[7]=[y(" Continue ")])),_:1,__:[7]})])])}}}),Yo=Q(Qo,[["__scopeId","data-v-edfce270"]]),Jo={class:"wizard-complete"},Xo={class:"completion-header"},Zo={class:"success-animation"},en={class:"setup-summary"},tn={class:"summary-grid"},sn={class:"summary-card"},on={class:"card-content"},nn={class:"card-description"},an={class:"summary-card"},ln={class:"card-content"},rn={class:"card-description"},dn={class:"summary-card"},un={class:"card-content"},cn={class:"card-description"},pn={class:"summary-card"},vn={class:"card-content"},mn={class:"card-description"},fn={key:0},gn={class:"next-steps"},yn={class:"destination-options"},hn=["onClick"],_n={class:"destination-icon"},kn={class:"destination-content"},wn={class:"destination-title"},bn={class:"destination-description"},Sn={class:"destination-indicator"},Cn={class:"help-section"},$n={class:"help-item"},Mn={class:"help-item"},On={class:"help-item"},xn=j({__name:"WizardComplete",props:{environmentalMetrics:{},nextDestination:{}},emits:["destination-changed"],setup(P,{emit:m}){const i=P,l=m,f=se(),w=ie(),C=F(0),x=[{id:"playground",icon:"🎮",title:"Playground",description:"Quick testing with individual prompts and models"},{id:"models",icon:"🤖",title:"Models",description:"Browse and manage available AI models"},{id:"templates",icon:"📝",title:"Templates",description:"Create systematic prompt testing designs"},{id:"home",icon:"🏠",title:"Home",description:"Start from the main dashboard"}],c=T(()=>{const h=[];return i.environmentalMetrics.showWater&&h.push("Water"),i.environmentalMetrics.showElectricity&&h.push("Energy"),h.join(" & ")}),A=T(()=>{if(!w.secureSettings.hasSetupApiKeySecurity())return"Not configured";switch(w.secureSettings.getDefaultSecurityMode()){case"encrypted":return"Encrypted with master password";case"session":return"Session-only storage";case"plaintext":return"Plaintext storage";default:return"Not configured"}}),N=T(()=>{const n=Object.entries(f.providerConfigs).filter(([v,g])=>g.testStatus==="success");if(n.length===0)return"No providers configured";const $=n.map(([v])=>({"ollama-chat":"Ollama",anthropic:"Anthropic",openrouter:"OpenRouter","openai-chat":"OpenAI Chat","openai-responses":"OpenAI Responses"})[v]||v);return`${$.length} provider${$.length>1?"s":""}: ${$.join(", ")}`});function r(h){l("destination-changed",h)}return J(async()=>{const h=await H.models.where("enabled").equals(1).count();C.value=h}),(h,n)=>(d(),k("div",Jo,[e("div",Xo,[e("div",Zo,[s(S(Z),{class:"success-icon"})]),n[0]||(n[0]=e("h2",null,"Setup Complete!",-1)),n[1]||(n[1]=e("p",{class:"completion-message"}," You've successfully configured Auditomatic Lite. You're ready to start testing AI models. ",-1))]),e("div",en,[n[11]||(n[11]=e("h3",null,"What You've Set Up",-1)),e("div",tn,[e("div",sn,[n[3]||(n[3]=e("div",{class:"card-icon"},"🔒",-1)),e("div",on,[n[2]||(n[2]=e("div",{class:"card-title"},"Security",-1)),e("div",nn,_(A.value),1)])]),e("div",an,[n[5]||(n[5]=e("div",{class:"card-icon"},"🤖",-1)),e("div",ln,[n[4]||(n[4]=e("div",{class:"card-title"},"AI Providers",-1)),e("div",rn,_(N.value),1)])]),e("div",dn,[n[7]||(n[7]=e("div",{class:"card-icon"},"📊",-1)),e("div",un,[n[6]||(n[6]=e("div",{class:"card-title"},"Models Ready",-1)),e("div",cn,_(C.value)+" models enabled",1)])]),e("div",pn,[n[10]||(n[10]=e("div",{class:"card-icon"},"🌍",-1)),e("div",vn,[n[9]||(n[9]=e("div",{class:"card-title"},"Environmental Tracking",-1)),e("div",mn,[n[8]||(n[8]=y(" CO₂ tracking enabled ")),h.environmentalMetrics.showWater||h.environmentalMetrics.showElectricity?(d(),k("span",fn," + "+_(c.value),1)):R("",!0)])])])])]),e("div",gn,[n[12]||(n[12]=e("h3",null,"Where would you like to start?",-1)),e("div",yn,[(d(),k(te,null,ee(x,$=>e("div",{key:$.id,class:ue(["destination-card",{active:h.nextDestination===$.id}]),onClick:v=>r($.id)},[e("div",_n,_($.icon),1),e("div",kn,[e("div",wn,_($.title),1),e("div",bn,_($.description),1)]),e("div",Sn,[h.nextDestination===$.id?(d(),L(S(Z),{key:0})):R("",!0)])],10,hn)),64))])]),n[16]||(n[16]=rt('<div class="getting-started-tips" data-v-5ff77852><h4 data-v-5ff77852>💡 Getting Started Tips</h4><div class="tips-grid" data-v-5ff77852><div class="tip-item" data-v-5ff77852><span class="tip-number" data-v-5ff77852>1</span><span class="tip-text" data-v-5ff77852>Start with the Playground for quick model testing</span></div><div class="tip-item" data-v-5ff77852><span class="tip-number" data-v-5ff77852>2</span><span class="tip-text" data-v-5ff77852>Create Templates for systematic prompt testing</span></div><div class="tip-item" data-v-5ff77852><span class="tip-number" data-v-5ff77852>3</span><span class="tip-text" data-v-5ff77852>Use Variable Lists to test multiple inputs</span></div><div class="tip-item" data-v-5ff77852><span class="tip-number" data-v-5ff77852>4</span><span class="tip-text" data-v-5ff77852>Check Models page to browse available options</span></div></div></div>',1)),e("div",Cn,[e("div",$n,[s(S(Oe),{class:"help-icon"}),n[13]||(n[13]=e("span",null,"Need help? Check the getting started guide or hover over any ⓘ icon throughout the app.",-1))]),e("div",Mn,[s(S(ct),{class:"help-icon"}),n[14]||(n[14]=e("span",null,"All your data is stored locally in your browser for complete privacy.",-1))]),e("div",On,[s(S(pt),{class:"help-icon"}),n[15]||(n[15]=e("span",null,"Remember to export your data regularly as a backup.",-1))])])]))}}),An=Q(xn,[["__scopeId","data-v-5ff77852"]]),Pn={class:"wizard-fullscreen"},In=j({__name:"WizardView",setup(P){const m=dt(),i=se(),l=ie(),f=T(()=>l.secureSettings.hasSetupApiKeySecurity()),w=T(()=>{switch(i.currentStep){case 0:return!0;case 1:return f.value;case 2:return!0;case 3:return!0;case 4:return!0;case 5:return!1;default:return!1}});function C(){i.nextStep()}function x(){i.previousStep()}function c(){m.push("/")}async function A(){try{await l.secureSettings.legacy.setEnvironmentalCosts(!0),await i.completeWizard();const g=i.nextDestination;switch(g){case"playground":m.push("/playground");break;case"models":m.push("/models");break;case"templates":m.push("/templates");break;default:m.push("/")}q.info("Wizard completed successfully",{destination:g,environmentalMetrics:i.environmentalMetrics})}catch(g){q.error("Failed to complete wizard",g)}}async function N(){q.info("Security setup ready, running model discovery"),await ce().discoverModels({forceRefresh:!0}),i.nextStep(),q.info("Discovery complete, advancing to providers")}function r(){i.providerQueue.length>0?(i.startProviderConfiguration(),i.nextStep()):v()}function h(){q.info("Provider configuration continuing")}function n(){i.goToStep(4),q.info("All providers configured, moving to environment metrics")}function $(){i.goToStep(5),q.info("Environment metrics configured, moving to complete")}function v(){i.goToStep(5),q.info("Skipping to complete step")}return J(()=>{i.showWizard(),q.info("Wizard view mounted",{currentStep:i.currentStep,hasCompletedWizard:i.hasCompletedWizard})}),Me(()=>{i.hideWizard()}),(g,M)=>(d(),k("div",Pn,[s(Mt,{"data-wizard-active":"","current-step":S(i).currentStep,"total-steps":S(i).totalSteps,"can-go-next":w.value,"can-go-back":S(i).canGoBack,"completed-steps":S(i).completedSteps,onNext:C,onBack:x,onClose:c,onComplete:A},{default:u(()=>[S(i).currentStep===0?(d(),L(Rt,{key:0,onContinue:C})):S(i).currentStep===1?(d(),L(Jt,{key:1,onSecurityReady:N})):S(i).currentStep===2?(d(),L(ks,{key:2,onContinue:r,onSkip:v})):S(i).currentStep===3?(d(),L(Lo,{key:3,onContinue:h,onComplete:n})):S(i).currentStep===4?(d(),L(Yo,{key:4,onContinue:$,onBack:x})):S(i).currentStep===5?(d(),L(An,{key:5,"environmental-metrics":S(i).environmentalMetrics,"next-destination":S(i).nextDestination,onDestinationChanged:S(i).setNextDestination},null,8,["environmental-metrics","next-destination","onDestinationChanged"])):R("",!0)]),_:1},8,["current-step","total-steps","can-go-next","can-go-back","completed-steps"])]))}}),qn=Q(In,[["__scopeId","data-v-48ce0460"]]);export{qn as default};
