const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PythonExportModal.vue_vue_type_style_index_0_lang-CLsxOcCp.js","./designs-db-Cu90pWLg.js","./vendor-BxfGckcK.js","./db-COX2g2xv.js","./index-JX8mTFJZ.js","./index-DDdwWpse.css","./variables-db-DFlmKEoQ.js","./registry-aRYPBFJZ.js","./models-db-CmLn_MUd.js","./trials-db-By9dbEH8.js","./settings-db-BVOtWTBg.js","./ModelSelectionTable-Dq708mA7.js","./ModelSelectionTable-BLrMfBZ9.css","./PythonExportModal-ND3QJOLk.css"])))=>i.map(i=>d[i]);
import{_ as e,d as a,c as l,f as t,C as s,D as i,e as o,a as r}from"./index-JX8mTFJZ.js";import{d as n,c,a2 as d,W as u,B as p,Y as v,a3 as m,a5 as g,a6 as y,F as f,a4 as b,f as k,w as h,o as C,b as _,S as w,a9 as x,G as T,q as S,aa as P,af as I,a7 as A,k as E,U as D,X as j,u as F,Z as $}from"./vendor-BxfGckcK.js";import{u as z}from"./trials-db-By9dbEH8.js";import{u as M}from"./settings-db-BVOtWTBg.js";import{T as N,_ as L,a as O}from"./PythonExportModal.vue_vue_type_style_index_0_lang-CLsxOcCp.js";import{l as R}from"./db-COX2g2xv.js";import"./registry-aRYPBFJZ.js";import"./designs-db-Cu90pWLg.js";import"./variables-db-DFlmKEoQ.js";import"./models-db-CmLn_MUd.js";import"./ModelSelectionTable-Dq708mA7.js";const V={class:"api-call-modal"},U={class:"modal-header"},q={class:"modal-content"},J={class:"section"},K={class:"info-grid"},Y={class:"info-item"},B={class:"call-id"},G={class:"info-item"},W={class:"info-item"},H={class:"info-item"},X={key:0,class:"info-item"},Z={key:1,class:"info-item"},Q={key:2,class:"info-item"},ee={class:"section"},ae={class:"variables-detail"},le={class:"variable-value"},te={key:0,class:"attributes-section"},se={class:"attribute-items"},ie={class:"section"},oe={class:"prompt-display"},re={key:0,class:"section"},ne={key:0,class:"response-info"},ce={class:"info-grid"},de={class:"info-item"},ue={class:"info-item"},pe={key:1,class:"result-content"},ve={key:0,class:"error-result"},me={class:"error-message"},ge={key:1,class:"content-result"},ye={class:"content-display"},fe={class:"section"},be={class:"raw-data"},ke={key:1,class:"section"},he={class:"raw-data"},Ce={class:"modal-footer"},_e=e(n({__name:"APICallDetailModal",props:{apiCall:{},trial:{}},emits:["close"],setup(e){const a=e,l=c(()=>{if(!a.apiCall.request)return"No request data";const e=JSON.parse(JSON.stringify(a.apiCall.request));return e.headers&&Object.keys(e.headers).forEach(a=>{const l=a.toLowerCase();(l.includes("authorization")||l.includes("api-key")||l.includes("x-api-key")||l.includes("bearer"))&&(e.headers[a]="[REDACTED]")}),JSON.stringify(e,null,2)});function t(){return a.trial&&a.trial.configurationSnapshots[a.apiCall.configurationIndex]&&a.trial.configurationSnapshots[a.apiCall.configurationIndex].name||`Configuration ${a.apiCall.configurationIndex+1}`}function s(e){const a="string"==typeof e?new Date(e):e;return isNaN(a.getTime())?"Invalid date":a.toLocaleString()}async function i(){const e={id:a.apiCall.id,status:a.apiCall.status,configuration:t(),variables:a.apiCall.variables,variableAttributes:a.apiCall.variableAttributes,prompt:a.apiCall.prompt,request:JSON.parse(l.value),response:a.apiCall.response,result:a.apiCall.result,created:a.apiCall.created,completed:a.apiCall.completed},s=JSON.stringify(e,null,2);try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(s),void alert("Details copied to clipboard!");const e=document.createElement("textarea");e.value=s,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();const a=document.execCommand("copy");if(document.body.removeChild(e),!a)throw new Error("execCommand failed");alert("Details copied to clipboard!")}catch(i){console.error("Failed to copy to clipboard:",i),prompt("Copy this text manually:",s)}}return(e,a)=>{return u(),d("div",{class:"modal-overlay",onClick:a[2]||(a[2]=p(a=>e.$emit("close"),["self"]))},[v("div",V,[v("div",U,[a[3]||(a[3]=v("h2",null,"API Call Details",-1)),v("button",{class:"close-btn",onClick:a[0]||(a[0]=a=>e.$emit("close"))},"Ã—")]),v("div",q,[v("div",J,[a[11]||(a[11]=v("h3",null,"Overview",-1)),v("div",K,[v("div",Y,[a[4]||(a[4]=v("label",null,"Call ID:",-1)),v("span",B,g(e.apiCall.id),1)]),v("div",G,[a[5]||(a[5]=v("label",null,"Status:",-1)),v("span",{class:y(["status-badge",e.apiCall.status])},g(e.apiCall.status),3)]),v("div",W,[a[6]||(a[6]=v("label",null,"Configuration:",-1)),v("span",null,g(t()),1)]),v("div",H,[a[7]||(a[7]=v("label",null,"Created:",-1)),v("span",null,g(s(e.apiCall.created)),1)]),e.apiCall.completed?(u(),d("div",X,[a[8]||(a[8]=v("label",null,"Completed:",-1)),v("span",null,g(s(e.apiCall.completed)),1)])):m("",!0),e.apiCall.completed?(u(),d("div",Z,[a[9]||(a[9]=v("label",null,"Duration:",-1)),v("span",null,g((o=e.apiCall.completed.getTime()-e.apiCall.created.getTime(),o<1e3?`${o}ms`:`${(o/1e3).toFixed(1)}s`)),1)])):m("",!0),e.apiCall.response?.latencyMs?(u(),d("div",Q,[a[10]||(a[10]=v("label",null,"API Latency:",-1)),v("span",null,g(e.apiCall.response.latencyMs)+"ms",1)])):m("",!0)])]),v("div",ee,[a[13]||(a[13]=v("h3",null,"Variables",-1)),v("div",ae,[(u(!0),d(f,null,b(Object.entries(e.apiCall.variables),([e,a])=>(u(),d("div",{key:e,class:"variable-item"},[v("label",null,g(e)+":",1),v("span",le,g(a),1)]))),128))]),e.apiCall.variableAttributes&&Object.keys(e.apiCall.variableAttributes).length>0?(u(),d("div",te,[a[12]||(a[12]=v("h4",null,"Variable Attributes",-1)),(u(!0),d(f,null,b(Object.entries(e.apiCall.variableAttributes),([e,a])=>(u(),d("div",{key:e,class:"attribute-group"},[v("h5",null,g(e),1),v("div",se,[(u(!0),d(f,null,b(Object.entries(a),([e,a])=>(u(),d("div",{key:e,class:"attribute-item"},[v("label",null,g(e)+":",1),v("span",null,g(a),1)]))),128))])]))),128))])):m("",!0)]),v("div",ie,[a[14]||(a[14]=v("h3",null,"Resolved Prompt",-1)),v("div",oe,g(e.apiCall.prompt),1)]),e.apiCall.response||e.apiCall.result?(u(),d("div",re,[a[19]||(a[19]=v("h3",null,"Response",-1)),e.apiCall.response?(u(),d("div",ne,[v("div",ce,[v("div",de,[a[15]||(a[15]=v("label",null,"HTTP Status:",-1)),v("span",null,g(e.apiCall.response.status),1)]),v("div",ue,[a[16]||(a[16]=v("label",null,"Latency:",-1)),v("span",null,g(e.apiCall.response.latencyMs)+"ms",1)])])])):m("",!0),e.apiCall.result?(u(),d("div",pe,[!1===e.apiCall.result.success?(u(),d("div",ve,[a[17]||(a[17]=v("h4",null,"Error",-1)),v("div",me,g(e.apiCall.result.error),1)])):m("",!0),e.apiCall.result.content?(u(),d("div",ge,[a[18]||(a[18]=v("h4",null,"Content",-1)),v("div",ye,g(e.apiCall.result.content),1)])):m("",!0)])):m("",!0)])):m("",!0),v("div",fe,[a[20]||(a[20]=v("h3",null,"Raw Request",-1)),v("pre",be,g(l.value),1)]),e.apiCall.response?(u(),d("div",ke,[a[21]||(a[21]=v("h3",null,"Raw Response",-1)),v("pre",he,g(JSON.stringify(e.apiCall.response,null,2)),1)])):m("",!0)]),v("div",Ce,[v("button",{onClick:i,class:"copy-btn"},"Copy Details"),v("button",{onClick:a[1]||(a[1]=a=>e.$emit("close")),class:"close-btn-secondary"},"Close")])])]);var o}}}),[["__scopeId","data-v-7f4cdcda"]]),we={class:"execution-monitor"},xe={class:"monitor-header"},Te={class:"header-left"},Se={key:0,class:"progress-summary"},Pe={class:"progress-bar"},Ie={class:"progress-text"},Ae={key:0,class:"network-errors"},Ee={key:0,class:"header-stats"},De={class:"stat"},je={class:"stat pending"},Fe={class:"stat running"},$e={class:"stat completed"},ze={class:"stat failed"},Me={key:0,class:"monitor-filters"},Ne={class:"monitor-content"},Le={key:0,class:"empty-state"},Oe={key:1,class:"empty-state"},Re={class:"placeholder-content"},Ve={key:2,class:"results-table"},Ue={class:"table-body"},qe=["onClick"],Je={class:"col-status"},Ke={class:"col-config"},Ye={class:"config-name"},Be={class:"col-variables"},Ge={class:"variables-list"},We={class:"var-key"},He={class:"var-value"},Xe={key:0,class:"separator"},Ze={class:"col-response"},Qe={key:0,class:"response-placeholder"},ea={key:1,class:"response-placeholder"},aa={key:2,class:"response-error"},la={key:3,class:"response-content"},ta={key:4,class:"response-placeholder"},sa={class:"col-time"},ia={key:0,class:"time-info"},oa={class:"duration"},ra={key:0,class:"latency"},na={key:1,class:"time-placeholder"},ca={key:0,class:"load-more"},da=e(n({__name:"ExecutionMonitor",props:{trialId:{}},setup(e){const l=e,t=k(null),s=k([]),i=k("all"),o=k(""),r=k(null),n=k(100);let p=null,E=null;const D=c(()=>{const e={total:0,pending:0,running:0,completed:0,failed:0};return s.value.forEach(a=>{e.total++,e[a.status]++}),e}),j=c(()=>t.value&&0!==t.value.progress.total?t.value.progress.completed/t.value.progress.total*100:0),F=c(()=>{let e=s.value;if("all"!==i.value&&(e=e.filter(e=>e.status===i.value)),o.value.trim()){const a=o.value.toLowerCase();e=e.filter(e=>Object.values(e.variables).some(e=>e.toLowerCase().includes(a))||e.result?.content&&String(e.result.content).toLowerCase().includes(a)||e.result?.error&&e.result.error.toLowerCase().includes(a))}return e.sort((e,a)=>a.created.getTime()-e.created.getTime())}),$=c(()=>F.value.slice(0,n.value));function z(e,a){return e.length<=a?e:e.slice(0,a)+"..."}function M(){n.value+=50}function N(){p&&p.unsubscribe(),E&&E.unsubscribe(),p=R(()=>a.trials.get(l.trialId)).subscribe({next:e=>{t.value=e||null},error:e=>{console.error("Trial subscription error:",e)}}),E=R(()=>a.apiCalls.where("trialId").equals(l.trialId).toArray()).subscribe({next:e=>{s.value=e},error:e=>{console.error("API calls subscription error:",e)}})}return h(()=>l.trialId,e=>{e&&N()},{immediate:!0}),C(()=>{N()}),_(()=>{p&&p.unsubscribe(),E&&E.unsubscribe()}),(e,a)=>(u(),d("div",we,[v("div",xe,[v("div",Te,[v("h3",null,g(t.value?.name||"Select a trial to monitor"),1),t.value?(u(),d("div",Se,[v("div",Pe,[v("div",{class:"progress-fill",style:x({width:j.value+"%"})},null,4)]),v("span",Ie,[T(g(t.value.progress.completed)+" / "+g(t.value.progress.total)+" completed ",1),t.value.progress.networkErrors>0?(u(),d("span",Ae,"("+g(t.value.progress.networkErrors)+" network errors)",1)):m("",!0)])])):m("",!0)]),t.value?(u(),d("div",Ee,[v("span",De,g(D.value.total)+" total",1),v("span",je,g(D.value.pending)+" pending",1),v("span",Fe,g(D.value.running)+" running",1),v("span",$e,g(D.value.completed)+" completed",1),v("span",ze,g(D.value.failed)+" failed",1)])):m("",!0)]),t.value?(u(),d("div",Me,[S(v("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=e),class:"filter-select"},a[3]||(a[3]=[I('<option value="all" data-v-648f182b>All Statuses</option><option value="pending" data-v-648f182b>Pending</option><option value="running" data-v-648f182b>Running</option><option value="completed" data-v-648f182b>Completed</option><option value="failed" data-v-648f182b>Failed</option>',5)]),512),[[P,i.value]]),S(v("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),type:"text",placeholder:"Search variables or response...",class:"search-input"},null,512),[[A,o.value]])])):m("",!0),v("div",Ne,[t.value?0===F.value.length?(u(),d("div",Oe,[v("div",Re,[a[5]||(a[5]=v("h4",null,"No API Calls",-1)),v("p",null,g(0===D.value.total?"Start the trial to see API calls here.":"No API calls match the current filters."),1)])])):(u(),d("div",Ve,[a[6]||(a[6]=I('<div class="table-header" data-v-648f182b><div class="col-status" data-v-648f182b>Status</div><div class="col-config" data-v-648f182b>Config</div><div class="col-variables" data-v-648f182b>Variables</div><div class="col-response" data-v-648f182b>Response</div><div class="col-time" data-v-648f182b>Time</div></div>',1)),v("div",Ue,[(u(!0),d(f,null,b($.value,e=>{return u(),d("div",{key:e.id,class:y(["table-row",[e.status]]),onClick:a=>function(e){r.value=e}(e)},[v("div",Je,[v("span",{class:y(["status-badge",e.status])},g(e.status),3)]),v("div",Ke,[v("span",Ye,g((l=e.configurationIndex,t.value&&t.value.configurationSnapshots[l]&&t.value.configurationSnapshots[l].name||`Config ${l+1}`)),1)]),v("div",Be,[v("div",Ge,[(u(!0),d(f,null,b(Object.entries(e.variables),([a,l],t)=>(u(),d("span",{key:a,class:"variable-pair"},[v("span",We,g(a)+":",1),v("span",He,g(z(l,30)),1),t<Object.entries(e.variables).length-1?(u(),d("span",Xe,"â€¢")):m("",!0)]))),128))])]),v("div",Ze,["pending"===e.status?(u(),d("div",Qe," Waiting... ")):"running"===e.status?(u(),d("div",ea," Processing... ")):"failed"===e.status?(u(),d("div",aa,g(e.result?.error||"API call failed"),1)):e.result?.content?(u(),d("div",la,g(z(String(e.result.content),100)),1)):(u(),d("div",ta," No content "))]),v("div",sa,[e.completed?(u(),d("div",ia,[v("div",oa,g((a=e.completed.getTime()-e.created.getTime(),a<1e3?`${a}ms`:`${(a/1e3).toFixed(1)}s`)),1),e.response?(u(),d("div",ra,g(e.response.latencyMs)+"ms",1)):m("",!0)])):(u(),d("div",na,"â€”"))])],10,qe);var a,l}),128))]),F.value.length>n.value?(u(),d("div",ca,[v("button",{onClick:M,class:"load-more-btn"}," Load More ("+g(F.value.length-n.value)+" remaining) ",1)])):m("",!0)])):(u(),d("div",Le,a[4]||(a[4]=[v("div",{class:"placeholder-content"},[v("h4",null,"No Trial Selected"),v("p",null,"Click on a trial card to monitor its execution progress and view results.")],-1)])))]),r.value?(u(),w(_e,{key:1,"api-call":r.value,trial:t.value,onClose:a[2]||(a[2]=e=>r.value=null)},null,8,["api-call","trial"])):m("",!0)]))}}),[["__scopeId","data-v-648f182b"]]),ua={class:"trials-table-container full-width"},pa={key:0,class:"trial-name-cell"},va={class:"trial-header"},ma={class:"trial-name"},ga={class:"trial-design"},ya={class:"text-secondary"},fa={key:1,class:"progress-cell"},ba={class:"progress-text text-xs"},ka={key:0,class:"network-errors"},ha={key:4,class:"api-calls-cell"},Ca={class:"total-calls"},_a={class:"calls-calculation text-secondary"},wa={key:1,class:"text-secondary"},xa={class:"date-cell"},Ta={class:"date-value"},Sa={class:"time-value text-secondary"},Pa=e(n({__name:"TrialsTable",props:{trials:{},isLoading:{type:Boolean,default:!1}},emits:["trial-selected","trial-started","trial-paused","trial-resumed","trial-cancelled","trial-exported","trial-duplicated","trial-deleted","trial-viewed","status-filter-changed"],setup(e,{emit:a}){const r=e,n=a,h=k("all"),C=[{key:"all",label:"All"},{key:"draft",label:"Draft"},{key:"pending",label:"Pending"},{key:"running",label:"Running"},{key:"paused",label:"Paused"},{key:"completed",label:"Completed"},{key:"failed",label:"Failed"},{key:"cancelled",label:"Cancelled"}],_=[{title:"Trial Name",key:"name",width:280,fixed:"left",sorter:(e,a)=>e.name.localeCompare(a.name)},{title:"Progress",key:"progress",width:160,sorter:(e,a)=>A(e)-A(a)},{title:"Configs",key:"configurations",width:80,align:"center",sorter:(e,a)=>(e.configurationSnapshots?.length||0)-(a.configurationSnapshots?.length||0)},{title:"Variables",key:"variables",width:90,align:"center",sorter:(e,a)=>e.totalCombinations-a.totalCombinations},{title:"API Calls",key:"api_calls",width:100,align:"center",sorter:(e,a)=>e.progress.total-a.progress.total},{title:"Cost",key:"cost",width:80,align:"right",sorter:(e,a)=>Math.abs(e.estimatedCost)-Math.abs(a.estimatedCost)},{title:"Created",key:"created",width:120,sorter:(e,a)=>e.created.getTime()-a.created.getTime(),defaultSortOrder:"descend"},{title:"Actions",key:"actions",width:160,fixed:"right"}],x=c(()=>"all"===h.value?r.trials:r.trials.filter(e=>e.status===h.value));function S(e){h.value=e,n("status-filter-changed",e)}function P(e){return{onClick:a=>{const l=a.target;l.closest(".ant-btn")||l.closest(".ant-dropdown-trigger")||(console.log("Row clicked:",e.name,e.id),n("trial-selected",e))}}}function I(e){return"all"===e?r.trials.length:r.trials.filter(a=>a.status===e).length}function A(e){return 0===e.progress.total?0:Math.round(e.progress.completed/e.progress.total*100)}function $(e){const a=[];return"running"===e.status&&a.push("status-running"),"failed"===e.status&&a.push("status-failed"),"completed"===e.status&&a.push("status-completed"),a.join(" ")}function z(e){const a=(new Date).getTime()-e.getTime(),l=Math.floor(a/864e5);return 0===l?"Today":1===l?"Yesterday":l<7?`${l} days ago`:l<30?`${Math.floor(l/7)} weeks ago`:e.toLocaleDateString()}return(e,a)=>{const r=D("a-tab-pane"),c=D("a-tabs"),k=D("a-tag"),M=D("a-progress"),N=D("a-tooltip"),L=D("a-button"),O=D("a-menu-item"),R=D("a-menu-divider"),V=D("a-menu"),U=D("a-dropdown"),q=D("a-space"),J=D("a-table");return u(),d("div",ua,[E(c,{activeKey:h.value,"onUpdate:activeKey":a[0]||(a[0]=e=>h.value=e),size:"small",class:"status-tabs",onChange:S},{default:j(()=>[(u(),d(f,null,b(C,e=>E(r,{key:e.key,tab:`${e.label} (${I(e.key)})`},null,8,["tab"])),64))]),_:1},8,["activeKey"]),E(J,{columns:_,"data-source":x.value,pagination:!1,size:"small",scroll:{y:"calc(100vh - 200px)",x:1200},"row-key":"id","row-class-name":$,class:"scientific-table clickable-rows","custom-row":P},{bodyCell:j(({column:e,record:r})=>{return["name"===e.key?(u(),d("div",pa,[v("div",va,[v("strong",ma,g(r.name),1),E(k,{color:(b=r.status,{draft:"default",pending:"processing",running:"processing",paused:"warning",completed:"success",failed:"error",cancelled:"default"}[b]||"default"),size:"small",class:"trial-status-tag"},{default:j(()=>[T(g(r.status.toUpperCase()),1)]),_:2},1032,["color"])]),v("div",ga,[v("small",ya," Design: "+g(r.designSnapshot?.originalName||"Unknown Design"),1)]),a[1]||(a[1]=v("div",{class:"click-hint"},[v("small",{class:"text-secondary"},"Click to view live progress")],-1))])):m("",!0),"progress"===e.key?(u(),d("div",fa,[E(M,{percent:A(r),size:"small",status:(c=r,"failed"===c.status?"exception":"completed"===c.status?"success":c.progress.networkErrors>0?"exception":"normal"),"show-info":!1,class:"progress-bar"},null,8,["percent","status"]),v("div",ba,[T(g(r.progress.completed)+" / "+g(r.progress.total)+" ",1),r.progress.networkErrors>0?(u(),d("span",ka," ("+g(r.progress.networkErrors)+" errors) ",1)):m("",!0)])])):m("",!0),"configurations"===e.key?(u(),w(N,{key:2,title:`${r.configurationSnapshots?.length||0} model configurations`},{default:j(()=>[E(k,{size:"small",color:"blue"},{default:j(()=>[T(g(r.configurationSnapshots?.length||0)+" configs ",1)]),_:2},1024)]),_:2},1032,["title"])):m("",!0),"variables"===e.key?(u(),w(N,{key:3,title:`${r.totalCombinations} variable combinations`},{default:j(()=>[E(k,{size:"small",color:"green"},{default:j(()=>[T(g(r.totalCombinations)+" combos ",1)]),_:2},1024)]),_:2},1032,["title"])):m("",!0),"api_calls"===e.key?(u(),d("div",ha,[v("span",Ca,g(r.progress.total),1),v("small",_a,g(r.configurationSnapshots?.length||0)+" Ã— "+g(r.totalCombinations),1)])):m("",!0),"cost"===e.key?(u(),d("span",{key:5,class:y(["cost-cell",{negative:r.estimatedCost<0}])},[Math.abs(r.estimatedCost)>0?(u(),d(f,{key:0},[T(" $"+g(Math.abs(r.estimatedCost).toFixed(2)),1)],64)):(u(),d("span",wa,"-"))],2)):m("",!0),"created"===e.key?(u(),w(N,{key:6,title:r.created.toLocaleString()},{default:j(()=>{return[v("div",xa,[v("span",Ta,g(z(r.created)),1),v("small",Sa,g((e=r.created,e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))),1)])];var e}),_:2},1032,["title"])):m("",!0),"actions"===e.key?(u(),w(q,{key:7,size:"small"},{default:j(()=>["draft"===r.status||"pending"===r.status?(u(),w(L,{key:0,size:"small",type:"primary",onClick:p(e=>function(e){n("trial-started",e)}(r),["stop"])},{default:j(()=>a[2]||(a[2]=[T(" Start ")])),_:2,__:[2]},1032,["onClick"])):m("",!0),"running"===r.status?(u(),w(L,{key:1,size:"small",onClick:p(e=>function(e){n("trial-paused",e)}(r),["stop"])},{default:j(()=>a[3]||(a[3]=[T(" Pause ")])),_:2,__:[3]},1032,["onClick"])):m("",!0),"paused"===r.status?(u(),w(L,{key:2,size:"small",type:"primary",onClick:p(e=>function(e){n("trial-resumed",e)}(r),["stop"])},{default:j(()=>a[4]||(a[4]=[T(" Resume ")])),_:2,__:[4]},1032,["onClick"])):m("",!0),"running"===r.status?(u(),w(L,{key:3,size:"small",danger:"",onClick:p(e=>function(e){n("trial-cancelled",e)}(r),["stop"])},{default:j(()=>a[5]||(a[5]=[T(" Cancel ")])),_:2,__:[5]},1032,["onClick"])):m("",!0),E(U,{trigger:["click"]},{overlay:j(()=>[E(V,{onClick:e=>function(e,a){switch(e){case"view":n("trial-viewed",a);break;case"duplicate":n("trial-duplicated",a);break;case"export":n("trial-exported",a);break;case"delete":n("trial-deleted",a)}}(e.key,r)},{default:j(()=>[E(O,{key:"view"},{default:j(()=>[E(F(t)),a[7]||(a[7]=T(" View Details "))]),_:1,__:[7]}),E(O,{key:"duplicate"},{default:j(()=>[E(F(s)),a[8]||(a[8]=T(" Duplicate "))]),_:1,__:[8]}),"completed"===r.status?(u(),w(O,{key:"export"},{default:j(()=>[E(F(i)),a[9]||(a[9]=T(" Export "))]),_:1,__:[9]})):m("",!0),E(R),E(O,{key:"delete",danger:""},{default:j(()=>[E(F(o)),a[10]||(a[10]=T(" Delete "))]),_:1,__:[10]})]),_:2},1032,["onClick"])]),default:j(()=>[E(L,{size:"small"},{default:j(()=>[a[6]||(a[6]=T(" More ")),E(F(l))]),_:1,__:[6]})]),_:2},1024)]),_:2},1024)):m("",!0)];var c,b}),_:1},8,["data-source"])])}}}),[["__scopeId","data-v-36e4083e"]]),Ia={class:"trials-view full-width"},Aa={class:"page-header"},Ea={class:"header-actions"},Da={class:"main-content"},ja={key:0,class:"loading-state"},Fa={key:1,class:"empty-state"},$a={key:2,class:"trials-table-wrapper"},za={key:0,class:"monitoring-content"},Ma={key:1,class:"monitoring-placeholder"},Na=e(n({__name:"TrialsView",setup(e){const a=z(),l=M(),t=k(!1),s=k(null),i=k(null),o=k(!1),n=k(!1),p=k(null),g=k(null),y=c(()=>a.isLoading),f=c(()=>[...a.trials]),b=c(()=>l.hasAnyApiKeys);function h(e){console.log("Trial selected in TrialsView:",e.name,e.id),i.value=e,o.value=!0}function _(e){console.log("Status filter changed to:",e)}function x(e){s.value=e}async function S(e){try{await a.executeTrial(e.id),console.log("Trial started:",e.id)}catch(l){console.error("Failed to start trial:",l),alert("Failed to start trial: "+(l instanceof Error?l.message:"Unknown error"))}}async function P(e){try{await a.pauseTrial(e.id),console.log("Pausing trial:",e.id)}catch(l){console.error("Failed to pause trial:",l),alert("Failed to pause trial")}}async function I(e){try{await a.executeTrial(e.id),console.log("Resuming trial:",e.id)}catch(l){console.error("Failed to resume trial:",l),alert("Failed to resume trial")}}async function A(e){try{await a.cancelTrial(e.id),console.log("Cancelling trial:",e.id)}catch(l){console.error("Failed to cancel trial:",l),alert("Failed to cancel trial")}}async function R(e){try{const{PythonExportService:a}=await r(async()=>{const{PythonExportService:e}=await import("./PythonExportModal.vue_vue_type_style_index_0_lang-CLsxOcCp.js").then(e=>e.p);return{PythonExportService:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),l=a.validateTrialForExport(e);if(!l.valid)return void alert(`Cannot export trial:\n${l.errors.join("\n")}`);p.value=e,n.value=!0}catch(a){console.error("Python export failed:",a),alert(`Export failed: ${a instanceof Error?a.message:String(a)}`)}}function V(e){console.log("Python script exported:",e)}function U(e){g.value=e,t.value=!0}async function q(e){if(confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{await a.deleteTrial(e.id)}catch(l){console.error("Failed to delete trial:",l),alert("Failed to delete trial")}}function J(e){console.log("Trial created:",e)}function K(){}return C(async()=>{await a.initialize()}),(e,a)=>{const l=D("a-button"),r=D("a-alert"),c=D("a-spin"),k=D("a-empty"),C=D("a-modal");return u(),d("div",Ia,[v("div",Aa,[a[7]||(a[7]=v("div",{class:"header-content"},[v("h1",null,"Trials"),v("p",{class:"description"}," Systematic testing of AI models with complete reproducibility ")],-1)),v("div",Ea,[E(l,{type:"primary",onClick:a[0]||(a[0]=e=>t.value=!0),size:"default",disabled:!b.value},{default:j(()=>a[6]||(a[6]=[T(" Create Trial ")])),_:1,__:[6]},8,["disabled"])])]),b.value?m("",!0):(u(),w(r,{key:0,type:"warning",message:"No API keys configured",description:"Please visit Settings to add your API keys before creating trials.","show-icon":"",class:"warning-banner",action:""},{action:j(()=>[E(F($),{to:"/settings"},{default:j(()=>[E(l,{size:"small",type:"primary"},{default:j(()=>a[8]||(a[8]=[T(" Go to Settings ")])),_:1,__:[8]})]),_:1})]),_:1})),v("div",Da,[y.value?(u(),d("div",ja,[E(c,{size:"large"},{tip:j(()=>a[9]||(a[9]=[T("Loading trials...")])),_:1})])):0===f.value.length?(u(),d("div",Fa,[E(k,{description:b.value?"No trials yet":"Configure API keys to start creating trials"},{image:j(()=>a[10]||(a[10]=[v("div",{style:{color:"#bfbfbf","font-size":"48px"}},"ðŸ§ª",-1)])),default:j(()=>[b.value?(u(),w(l,{key:0,type:"primary",onClick:a[1]||(a[1]=e=>t.value=!0)},{default:j(()=>a[11]||(a[11]=[T(" Create Your First Trial ")])),_:1,__:[11]})):m("",!0)]),_:1},8,["description"])])):(u(),d("div",$a,[E(Pa,{trials:f.value,"is-loading":y.value,onTrialSelected:h,onTrialStarted:S,onTrialPaused:P,onTrialResumed:I,onTrialCancelled:A,onTrialExported:R,onTrialDuplicated:U,onTrialDeleted:q,onTrialViewed:x,onStatusFilterChanged:_},null,8,["trials","is-loading"])]))]),E(C,{open:o.value,"onUpdate:open":a[2]||(a[2]=e=>o.value=e),title:`Live Progress: ${i.value?.name||"Trial"}`,width:"95vw",footer:null,"body-style":{padding:0,height:"90vh",overflow:"auto"},"destroy-on-close":!0,centered:!0},{default:j(()=>[i.value?(u(),d("div",za,[E(da,{"trial-id":i.value.id},null,8,["trial-id"])])):(u(),d("div",Ma,[E(k,{description:"No trial selected for monitoring"})]))]),_:1},8,["open","title"]),t.value?(u(),w(N,{key:1,trialToDuplicate:g.value,onClose:a[3]||(a[3]=e=>{t.value=!1,g.value=null}),onCreated:J},null,8,["trialToDuplicate"])):m("",!0),s.value?(u(),w(L,{key:2,trial:s.value,onClose:a[4]||(a[4]=e=>s.value=null),onUpdated:K},null,8,["trial"])):m("",!0),n.value&&p.value?(u(),w(O,{key:3,trial:p.value,onClose:a[5]||(a[5]=e=>{n.value=!1,p.value=null}),onExported:V},null,8,["trial"])):m("",!0)])}}}),[["__scopeId","data-v-0265eb6d"]]);export{Na as default};
