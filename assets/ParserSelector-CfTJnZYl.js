import{d as U,c as z,f as B,w as I,$ as L,Y as o,Z as i,S as l,k as r,R as c,_ as V,F as N,W as j,a0 as R,V as _,G as p,B as $,o as W,X,a1 as Y,y as Z}from"./vue-vendor-DPw1dQYc.js";import{u as F}from"./parser.store-C-xrBLcz.js";import{x as A,_ as H,O as J,z as K,T as D,m as E}from"./ui-vendor-DDlYs5wr.js";import{j as G}from"./index-CLqmclCd.js";const ee={class:"parser-selector-modal"},te={class:"search-section"},se={class:"parser-list"},le={key:0,class:"loading-section"},ae={key:1,class:"empty-section"},oe={key:2,class:"parser-groups"},ne={key:0,class:"parser-group"},re={class:"parser-items"},ie=["onClick"],ue={class:"parser-info"},de={class:"parser-header"},ce={class:"parser-name"},pe={key:0,class:"parser-description"},fe={class:"parser-actions"},_e={key:1,class:"parser-group"},me={class:"parser-items"},ve=["onClick"],ye={class:"parser-info"},he={class:"parser-header"},ge={class:"parser-name"},Ce={key:0,class:"parser-description"},ke={class:"parser-actions"},Pe={class:"modal-footer"},Te=U({__name:"ParserSelectorModal",props:{modelValue:{type:Boolean},filterType:{default:null},filterOutputType:{default:null}},emits:["update:modelValue","select","cancel"],setup(M,{emit:O}){const n=M,m=O,g=F(),u=z({get:()=>n.modelValue,set:t=>m("update:modelValue",t)}),a=B(""),f=B(null),y=B(!1),S=z(()=>{let t=g.parsers;if(n.filterType&&(t=t.filter(e=>e.type===n.filterType)),n.filterOutputType&&(t=t.filter(e=>e.outputType===n.filterOutputType)),a.value){const e=a.value.toLowerCase();t=t.filter(d=>d.name.toLowerCase().includes(e)||d.description?.toLowerCase().includes(e)||d.tags.some(v=>v.toLowerCase().includes(e)))}return t}),C=z(()=>{const t=S.value;return{builtIn:t.filter(e=>e.isBuiltIn),user:t.filter(e=>!e.isBuiltIn)}});function b(t){switch(t){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}function k(t){f.value=t}function P(t){t&&(m("select",t),u.value=!1)}function w(){m("cancel"),u.value=!1}return I(u,async t=>{if(t&&g.parsers.length===0){y.value=!0;try{await g.loadParsers()}finally{y.value=!1}}}),I(u,t=>{t||(f.value=null,a.value="")}),(t,e)=>{const d=H,v=J,T=K,h=D,x=E,Q=A;return o(),L(Q,{open:u.value,"onUpdate:open":e[2]||(e[2]=s=>u.value=s),title:"Select Parser",width:"800px",footer:null,"destroy-on-close":!0,onCancel:w},{default:i(()=>[l("div",ee,[l("div",te,[r(d,{value:a.value,"onUpdate:value":e[0]||(e[0]=s=>a.value=s),placeholder:"Search parsers...","allow-clear":"",size:"large"},null,8,["value"])]),l("div",se,[y.value?(o(),c("div",le,[r(v,{size:"large",tip:"Loading parsers..."})])):S.value.length===0?(o(),c("div",ae,[r(T,{description:"No parsers found"})])):(o(),c("div",oe,[C.value.builtIn.length>0?(o(),c("div",ne,[e[4]||(e[4]=l("div",{class:"group-header"},"Built-in Parsers",-1)),l("div",re,[(o(!0),c(N,null,j(C.value.builtIn,s=>(o(),c("div",{key:s.id,class:R(["parser-item",{selected:f.value?.id===s.id}]),onClick:q=>k(s)},[l("div",ue,[l("div",de,[l("span",ce,_(s.name),1),r(h,{color:b(s.type),size:"small"},{default:i(()=>[p(_(s.type),1)]),_:2},1032,["color"]),r(h,{size:"small"},{default:i(()=>[p(_(s.outputType),1)]),_:2},1024)]),s.description?(o(),c("div",pe,_(s.description),1)):V("",!0)]),l("div",fe,[r(x,{type:"primary",size:"small",onClick:$(q=>P(s),["stop"])},{default:i(()=>e[3]||(e[3]=[p(" Select ")])),_:2,__:[3]},1032,["onClick"])])],10,ie))),128))])])):V("",!0),C.value.user.length>0?(o(),c("div",_e,[e[6]||(e[6]=l("div",{class:"group-header"},"Custom Parsers",-1)),l("div",me,[(o(!0),c(N,null,j(C.value.user,s=>(o(),c("div",{key:s.id,class:R(["parser-item",{selected:f.value?.id===s.id}]),onClick:q=>k(s)},[l("div",ye,[l("div",he,[l("span",ge,_(s.name),1),r(h,{color:b(s.type),size:"small"},{default:i(()=>[p(_(s.type),1)]),_:2},1032,["color"]),r(h,{size:"small"},{default:i(()=>[p(_(s.outputType),1)]),_:2},1024)]),s.description?(o(),c("div",Ce,_(s.description),1)):V("",!0)]),l("div",ke,[r(x,{type:"primary",size:"small",onClick:$(q=>P(s),["stop"])},{default:i(()=>e[5]||(e[5]=[p(" Select ")])),_:2,__:[5]},1032,["onClick"])])],10,ve))),128))])])):V("",!0)]))]),l("div",Pe,[r(x,{onClick:w},{default:i(()=>e[7]||(e[7]=[p(" Cancel ")])),_:1,__:[7]}),r(x,{type:"primary",disabled:!f.value,onClick:e[1]||(e[1]=s=>P(f.value))},{default:i(()=>e[8]||(e[8]=[p(" Select Parser ")])),_:1,__:[8]},8,["disabled"])])])]),_:1},8,["open"])}}}),Ve=G(Te,[["__scopeId","data-v-41d0911c"]]),Se={class:"parser-selector"},be={class:"parser-info"},we={class:"parser-name"},xe={class:"parser-actions"},ze=U({__name:"ParserSelector",props:{modelValue:{},placeholder:{default:"Select Parser"},allowClear:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},filterType:{default:null},filterOutputType:{default:null},context:{default:"default"}},emits:["update:modelValue","change"],setup(M,{emit:O}){const n=M,m=O,g=X(),u=Y(),a=F(),f=B(!1),y=z(()=>n.modelValue?a.parsers.length===0&&!a.loading?(a.loadParsers(),null):a.parsers.find(t=>t.id===n.modelValue)||null:null);function S(t){switch(t){case"regex":return"blue";case"javascript":return"orange";case"python":return"green";default:return"default"}}function C(){a.setSelectionContext({returnPath:u.fullPath,context:n.context,currentValue:n.modelValue,filterType:n.filterType,filterOutputType:n.filterOutputType}),g.push("/parsers/select")}function b(){m("update:modelValue",null),m("change",null,null)}function k(){f.value=!0}function P(t){m("update:modelValue",t.id),m("change",t.id,t),f.value=!1}function w(){f.value=!1}return W(async()=>{if(a.parsers.length===0&&await a.loadParsers(),n.modelValue&&!y.value){const t=I(()=>a.parsers,()=>{const e=a.parsers.find(d=>d.id===n.modelValue);e&&(m("change",e.id,e),t())},{immediate:!0})}}),I(()=>u.query,async t=>{if(t.selectedParserId&&t.context===n.context){const e=t.selectedParserId;a.parsers.length===0&&await a.loadParsers();const d=a.parsers.find(v=>v.id===e);if(d){m("update:modelValue",e),m("change",e,d),await Z();const{selectedParserId:v,context:T,...h}=u.query;g.replace({...u,query:h})}else{const{selectedParserId:v,context:T,...h}=u.query;g.replace({...u,query:h})}}},{immediate:!0}),(t,e)=>{const d=D,v=E;return o(),c("div",Se,[y.value?(o(),c("div",{key:0,class:"selected-parser",onClick:C},[l("div",be,[l("span",we,_(y.value.name),1),r(d,{color:S(y.value.type),size:"small"},{default:i(()=>[p(_(y.value.type),1)]),_:1},8,["color"]),r(d,{size:"small"},{default:i(()=>[p(_(y.value.outputType),1)]),_:1})]),l("div",xe,[t.allowClear?(o(),L(v,{key:0,size:"small",type:"text",danger:"",onClick:$(b,["stop"])},{default:i(()=>e[1]||(e[1]=[p(" Clear ")])),_:1,__:[1]})):V("",!0),r(v,{size:"small",type:"text",onClick:$(k,["stop"])},{default:i(()=>e[2]||(e[2]=[p(" Change ")])),_:1,__:[2]})])])):(o(),L(v,{key:1,block:"",onClick:k,disabled:t.disabled},{default:i(()=>[p(_(t.placeholder),1)]),_:1},8,["disabled"])),r(Ve,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=T=>f.value=T),"filter-type":t.filterType,"filter-output-type":t.filterOutputType,onSelect:P,onCancel:w},null,8,["modelValue","filter-type","filter-output-type"])])}}}),Oe=G(ze,[["__scopeId","data-v-7b99b32d"]]);export{Oe as P};
