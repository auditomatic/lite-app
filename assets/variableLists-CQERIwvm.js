const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./dataManagement-BiAJjF8H.js","./index-DWYxkL85.js","./vendor-DdqHZeTC.js","./db-ftwlfnxb.js","./index-zWy5gnVS.css"])))=>i.map(i=>d[i]);
import{d as t,b as a}from"./index-DWYxkL85.js";import{h as e,r as i}from"./vendor-DdqHZeTC.js";const s=e("variableLists",()=>{const e=i([]),s=i(!1),r=i(null);function l(t){return{...t,values:t.values||[]}}return{variableLists:e,loading:s,error:r,loadVariableLists:async function(){s.value=!0,r.value=null;try{const a=await t.variable_lists.toArray();return e.value=a.map(l),e.value}catch(a){throw r.value=a instanceof Error?a.message:"Failed to load variable lists",a}finally{s.value=!1}},getList:async function(a){const e=await t.variable_lists.get(a);if(e)return console.log(`Loaded variable list ${e.name} (id: ${a}) with ${e.values?.length||0} items`),l(e);console.warn(`Variable list with id ${a} not found`)},getListItems:async function(a){const e=await t.variable_lists.get(a);return e&&e.values&&0!==e.values.length?e.values.map((t,i)=>({id:i,list_id:a,value:t,attributes_json:{},created_at:e.created_at})):[]},createList:async function(a){const e=(new Date).toISOString(),i={...a,values:a.values||[],created_at:e,updated_at:e};if("attributed"===a.category&&a.attributedItems){const t=a.attributedItems;i.attributed_items=t,i.values=t.map(t=>t.value)}await t.variable_lists.add(i)},updateList:async function(a,e){const i={...e,values:e.values||[],updated_at:(new Date).toISOString()};if("attributed"===e.category&&e.attributedItems){const t=e.attributedItems;i.attributed_items=t,i.values=t.map(t=>t.value)}await t.variable_lists.update(a,i)},deleteList:async function(t){try{const{dataManager:i}=await a(async()=>{const{dataManager:t}=await import("./dataManagement-BiAJjF8H.js");return{dataManager:t}},__vite__mapDeps([0,1,2,3,4]),import.meta.url),s=await i.deleteVariableList(t);if(!s.success)throw new Error(s.error||"Failed to delete variable list");e.value=e.value.filter(a=>a.id!==t),console.log(`Deleted variable list ${t} and ${s.details?.variableListItems||0} items`)}catch(i){throw console.error("Failed to delete variable list:",i),i}}}});export{s as u};
