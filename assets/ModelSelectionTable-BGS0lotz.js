import{d as e,f as a,c as l,o as t,Z as s,W as o,Y as i,k as n,U as d,X as u,G as r,F as p,a6 as c,S as v,a5 as m,a9 as f,q as k,_ as C,u as b,A as g,B as y,n as h}from"./vendor-l9j4AUWK.js";import{a as T}from"./designs-db-IBBxoMxw.js";import{f as _,a as P}from"./cost-formatting-D-OPWEvg.js";import{c as x,e as w,_ as M}from"./index-CGLWf6d2.js";const I={class:"model-selection-panel full-width"},O={class:"model-filters spacing-bottom-sm"},S={key:0,class:"provider-tree"},A=["onClick"],N={class:"provider-name"},$={class:"model-count"},F={key:0,class:"provider-avg-cost"},L={class:"models-container"},j={class:"model-grid"},z=["onClick"],U={class:"model-name"},W={class:"model-costs"},D={key:0,class:"trial-cost"},E={class:"cost-breakdown"},B={key:0,class:"input-cost"},G={key:1,class:"output-cost"},R={key:1,class:"loading-state"},Y={key:0,class:"model-details"},q=M(e({__name:"ModelSelectionTable",props:{models:{},selectedModel:{default:null},isLoading:{type:Boolean,default:!1},totalCalls:{default:0},design:{default:null},modelParams:{default:()=>({})}},emits:["model-selected","model-configured"],setup(e,{emit:M}){const q=e,K=M,X=a(""),Z=a(""),H=a(!1),J=a(null),Q=a([]),V=l(()=>{const e=new Set(q.models.map(e=>e.provider));return Array.from(e).sort()});t(()=>{Q.value=[...V.value]});const ee=l(()=>{let e=q.models;if(X.value){const a=X.value.toLowerCase();e=e.filter(e=>e.displayName.toLowerCase().includes(a)||e.modelId.toLowerCase().includes(a)||e.provider.toLowerCase().includes(a))}return Z.value&&(e=e.filter(e=>e.provider===Z.value)),e}),ae=l(()=>{const e=new Map;return ee.value.forEach(a=>{e.has(a.provider)||e.set(a.provider,[]),e.get(a.provider).push(a)}),Array.from(e.entries()).map(([e,a])=>{const l=a.sort((e,a)=>e.displayName.localeCompare(a.displayName)),t=l.map(e=>e.capabilities?.inputCostPerToken).filter(e=>null!=e),s=l.map(e=>e.capabilities?.outputCostPerToken).filter(e=>null!=e),o=t.length>0?t.reduce((e,a)=>e+a,0)/t.length*1e6:null,i=s.length>0?s.reduce((e,a)=>e+a,0)/s.length*1e6:null;return{id:e,name:le(e),models:l,avgInputCost:o,avgOutputCost:i}})});function le(e){return{anthropic:"Anthropic","openai-chat":"OpenAI Chat","openai-responses":"OpenAI Responses","ollama-chat":"Ollama Chat","ollama-generate":"Ollama Generate",openrouter:"OpenRouter"}[e]||e}function te(e){return`${e.avgInputCost?.toFixed(2)||"0"}/${e.avgOutputCost?.toFixed(2)||"0"}/$1M`}function se(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":e.toString()}function oe(e){if(!e.capabilities?.inputCostPerToken||0===q.totalCalls)return e.displayName,e.capabilities,e.capabilities,q.totalCalls,0;if(!q.design?.tokenEstimate?.avgTokens)return e.displayName,0;const a=q.design.tokenEstimate.avgTokens,l=T.getOutputTokenLimit(e.provider,e.modelId,q.modelParams||{});e.displayName,q.totalCalls,e.capabilities.inputCostPerToken,e.capabilities.outputCostPerToken,q.design,q.design;const t=P(a,l,q.totalCalls,e.capabilities.inputCostPerToken||0,e.capabilities.outputCostPerToken||0);return t.toFixed(6),t}return(e,a)=>{const l=d("a-input-search"),t=d("a-select-option"),T=d("a-select"),P=d("a-spin"),M=d("a-descriptions-item"),q=d("a-tag"),ee=d("a-descriptions"),ie=d("a-modal");return o(),s("div",I,[i("div",O,[n(l,{value:X.value,"onUpdate:value":a[0]||(a[0]=e=>X.value=e),placeholder:"Search models (e.g., gpt-4, claude, llama)...",class:"search-input",allowClear:"",size:"small",style:{flex:1}},null,8,["value"]),n(T,{value:Z.value,"onUpdate:value":a[1]||(a[1]=e=>Z.value=e),placeholder:"All Providers",allowClear:"",size:"small",class:"model-search-input"},{default:u(()=>[n(t,{value:""},{default:u(()=>a[3]||(a[3]=[r("All Providers")])),_:1,__:[3]}),(o(!0),s(p,null,c(V.value,e=>(o(),v(t,{key:e,value:e},{default:u(()=>[r(m(le(e)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),e.isLoading?(o(),s("div",R,[n(P,{size:"large"})])):(o(),s("div",S,[(o(!0),s(p,null,c(ae.value,l=>(o(),s("div",{key:l.id,class:f(["provider-row",{expanded:Q.value.includes(l.id)}])},[i("div",{class:"provider-header",onClick:e=>function(e){const a=Q.value.indexOf(e);a>=0?Q.value.splice(a,1):Q.value.push(e)}(l.id)},[n(b(x),{class:f(["expand-icon",{expanded:Q.value.includes(l.id)}])},null,8,["class"]),i("span",N,m(l.name),1),i("span",$,m(l.models.length)+" models",1),l.avgInputCost?(o(),s("span",F," avg "+m(te(l)),1)):C("",!0)],8,A),k(i("div",L,[i("div",j,[(o(!0),s(p,null,c(l.models,l=>(o(),s("div",{key:l.id,class:f(["model-card",{selected:e.selectedModel?.id===l.id,disabled:!l.enabled}]),onClick:e=>l.enabled&&function(e){K("model-selected",e),h(()=>{K("model-configured",e,{})})}(l)},[i("div",U,m(l.displayName),1),i("div",W,[e.totalCalls>0&&l.capabilities?.inputCostPerToken?(o(),s("span",D," $"+m(oe(l).toFixed(4)),1)):C("",!0),i("span",E,[l.capabilities?.inputCostPerToken?(o(),s("span",B," in: $"+m(b(_)(l.capabilities.inputCostPerToken)),1)):C("",!0),l.capabilities?.outputCostPerToken?(o(),s("span",G," out: $"+m(b(_)(l.capabilities.outputCostPerToken)),1)):C("",!0),a[4]||(a[4]=i("span",{class:"cost-unit"},"/1M",-1))])]),n(b(w),{onClick:y(e=>function(e){J.value=e,H.value=!0}(l),["stop"]),class:"info-icon"},null,8,["onClick"])],10,z))),128))])],512),[[g,Q.value.includes(l.id)]])],2))),128))])),n(ie,{open:H.value,"onUpdate:open":a[2]||(a[2]=e=>H.value=e),title:`Model Details: ${J.value?.displayName}`,footer:null,width:"600px"},{default:u(()=>[J.value?(o(),s("div",Y,[n(ee,{column:2,size:"small",bordered:""},{default:u(()=>[n(M,{label:"Provider"},{default:u(()=>[r(m(le(J.value.provider)),1)]),_:1}),n(M,{label:"Model ID"},{default:u(()=>[i("code",null,m(J.value.modelId),1)]),_:1}),n(M,{label:"Status"},{default:u(()=>[n(q,{color:J.value.enabled?"green":"red"},{default:u(()=>[r(m(J.value.enabled?"Available":"Disabled"),1)]),_:1},8,["color"])]),_:1}),J.value.capabilities?.inputCostPerToken?(o(),v(M,{key:0,label:"Input Cost"},{default:u(()=>[r(" $"+m(b(_)(J.value.capabilities.inputCostPerToken))+"/1M tokens ",1)]),_:1})):C("",!0),J.value.capabilities?.outputCostPerToken?(o(),v(M,{key:1,label:"Output Cost"},{default:u(()=>[r(" $"+m(b(_)(J.value.capabilities.outputCostPerToken))+"/1M tokens ",1)]),_:1})):C("",!0),J.value.capabilities?.contextWindow?(o(),v(M,{key:2,label:"Context Window"},{default:u(()=>[r(m(se(J.value.capabilities.contextWindow))+" tokens ",1)]),_:1})):C("",!0),J.value.capabilities?.maxTokens?(o(),v(M,{key:3,label:"Max Output"},{default:u(()=>[r(m(se(J.value.capabilities.maxTokens))+" tokens ",1)]),_:1})):C("",!0),void 0!==J.value.capabilities?.supportsStreaming?(o(),v(M,{key:4,label:"Supports Streaming"},{default:u(()=>[r(m(J.value.capabilities.supportsStreaming?"Yes":"No"),1)]),_:1})):C("",!0)]),_:1})])):C("",!0)]),_:1},8,["open","title"])])}}}),[["__scopeId","data-v-c7a3d1a4"]]);export{q as M};
