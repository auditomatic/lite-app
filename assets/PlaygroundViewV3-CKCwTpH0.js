import{h as E,u as J,a as F,c as Q}from"./index-DRpbUgPt.js";import{u as le}from"./useV4Models-Dj3KEEJy.js";import{M as ae,G as re}from"./GenericModelSelectorModalV3-DuP-EtYw.js";import{H as ie,m as Y,an as de,af as ue,q as Z,ak as K,aR as pe,aJ as ce,al as ee,aj as me,ap as ve,a5 as ge,a6 as _e,a4 as fe,o as he,M as be}from"./ui-vendor-Cd_RpDPr.js";import{d as L,R as c,S as e,G as w,_ as V,k as h,Z as y,Y as o,u as j,V as p,c as D,F as N,W as B,f as T,w as G,a0 as te,n as q,q as ye,a2 as $e,y as se,a7 as ke,a3 as H,$ as S,A as Ce,r as Pe,o as Se}from"./vue-vendor-DPw1dQYc.js";import{c as W,i as X,g as Ve}from"./useHeatmapStylingV3-CCIdVOn4.js";import{u as Te}from"./useV4ProviderParameters-Cj7FRn0D.js";import"./utils-vendor-CmlljHD3.js";import"./data-vendor-BDABXsBx.js";import"./useV4LiveQuery-CU4Hu5jZ.js";import"./useCostEstimation-hLwBrRCc.js";const we={class:"page-header"},xe={class:"header-actions"},Ie={key:0,class:"cost-estimate"},Me={class:"cost-tooltip"},Re=L({__name:"PlaygroundHeaderV3",props:{selectedModel:{},estimatedTokens:{},outputTokenLimit:{},disabled:{type:Boolean},loading:{type:Boolean}},emits:["execute"],setup(x){return(r,l)=>{const i=ie,d=Y;return o(),c("div",we,[l[4]||(l[4]=e("div",{class:"header-content"},[e("h1",null,[w("LLM Playground "),e("span",{class:"description"},"Test one-off prompts and responses")])],-1)),e("div",xe,[r.selectedModel?(o(),c("div",Ie,[h(i,{placement:"bottom"},{title:y(()=>[e("div",Me,[l[1]||(l[1]=e("div",null,"Cost estimate based on:",-1)),e("div",null,"• Input: "+p(r.estimatedTokens)+" tokens",1),e("div",null,"• Output: 10 - "+p(r.outputTokenLimit)+" tokens",1),l[2]||(l[2]=e("div",null,"• Min assumes 10 token response",-1)),l[3]||(l[3]=e("div",null,"• Max assumes full response limit",-1))])]),default:y(()=>[h(j(de),{class:"info-icon"})]),_:1}),h(ae,{model:r.selectedModel,mode:"range","input-tokens":r.estimatedTokens,"min-output-tokens":10,"max-output-tokens":r.outputTokenLimit,layout:"inline",size:"medium"},null,8,["model","input-tokens","max-output-tokens"])])):V("",!0),h(d,{type:"primary",onClick:l[0]||(l[0]=a=>r.$emit("execute")),disabled:r.disabled,loading:r.loading},{default:y(()=>[w(p(r.loading?"Running...":"Run"),1)]),_:1},8,["disabled","loading"])])])}}}),Ee=E(Re,[["__scopeId","data-v-26164535"]]),Le={key:0,class:"model-info"},De={class:"info-header"},Oe={class:"model-name"},Ne={class:"provider-badge"},Be={key:0,class:"info-details"},ze={class:"detail-item"},Fe={class:"value"},Ae={class:"detail-item"},Je={class:"value"},Ue={class:"dollar-amount"},je={class:"detail-item"},qe={class:"value"},He={class:"dollar-amount"},We={class:"detail-item"},Ge={class:"value"},Ye={class:"detail-item"},Qe={class:"value"},Xe={class:"detail-item"},Ze={class:"value"},Ke=L({__name:"ModelInfoCardV3",props:{model:{}},setup(x){const r=x,l=J(),i=D(()=>l.settings.core.preferences.value);function d(s){return s<.01?s.toFixed(4):s<1?s.toFixed(3):s.toFixed(2)}function a(s){return s?s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"k":s.toString():"N/A"}function b(s){return!r.model||!i.value?.enableEnvironmentalCosts,"??"}return(s,m)=>s.model?(o(),c("div",Le,[e("div",De,[e("span",Oe,p(s.model.displayName),1),e("span",Ne,p(s.model.provider),1)]),s.model.capabilities?(o(),c("div",Be,[e("div",ze,[m[0]||(m[0]=e("span",{class:"label"},"Context:",-1)),e("span",Fe,p(a(s.model.capabilities.contextWindow))+" tokens",1)]),e("div",Ae,[m[2]||(m[2]=e("span",{class:"label"},"Input:",-1)),e("span",Je,[e("span",Ue,"$"+p(d((s.model.capabilities.inputCostPerToken||0)*1e3)),1),m[1]||(m[1]=w("/1k "))])]),e("div",je,[m[4]||(m[4]=e("span",{class:"label"},"Output:",-1)),e("span",qe,[e("span",He,"$"+p(d((s.model.capabilities.outputCostPerToken||0)*1e3)),1),m[3]||(m[3]=w("/1k "))])]),e("div",We,[m[5]||(m[5]=e("span",{class:"label"},"CO₂: 🏭",-1)),e("span",Ge,p(b()),1)]),e("div",Ye,[m[6]||(m[6]=e("span",{class:"label"},"Water: 💧",-1)),e("span",Qe,p(b()),1)]),e("div",Xe,[m[7]||(m[7]=e("span",{class:"label"},"Energy: ⚡",-1)),e("span",Ze,p(b()),1)])])):V("",!0)])):V("",!0)}}),et=E(Ke,[["__scopeId","data-v-ce84a924"]]),tt={class:"left-panel"},st={class:"panel-section"},ot={class:"panel-section"},nt={class:"action-buttons"},lt={key:0,class:"panel-section"},at={class:"template-buttons"},rt=L({__name:"PlaygroundLeftPanelV3",props:{selectedModel:{},promptText:{}},emits:["open-model-selector","load-from-design","clear-prompt","load-template"],setup(x){const r=J(),l=D(()=>{const d=r.templates.templates.value||[],a=r.spreadsheet.prompts.prompts.value||[];return d.length>0||a.length>0}),i=[{name:"Creative",prompt:"Write a creative short story about:"},{name:"Analysis",prompt:"Analyze the following text and provide insights:"},{name:"Explain",prompt:"Explain this concept in simple terms:"},{name:"Summarize",prompt:"Summarize the following content:"}];return(d,a)=>{const b=Y;return o(),c("div",tt,[e("div",st,[a[4]||(a[4]=e("h3",null,"Select Model",-1)),h(b,{type:"primary",size:"large",style:{width:"100%"},onClick:a[0]||(a[0]=s=>d.$emit("open-model-selector"))},{default:y(()=>a[3]||(a[3]=[w(" Select Model ")])),_:1,__:[3]}),h(et,{model:d.selectedModel},null,8,["model"])]),e("div",ot,[a[7]||(a[7]=e("h3",null,"Actions",-1)),e("div",nt,[h(b,{type:"default",onClick:a[1]||(a[1]=s=>d.$emit("load-from-design")),disabled:!l.value,block:""},{default:y(()=>a[5]||(a[5]=[w(" Load from Design ")])),_:1,__:[5]},8,["disabled"]),h(b,{type:"default",onClick:a[2]||(a[2]=s=>d.$emit("clear-prompt")),disabled:!d.promptText,block:""},{default:y(()=>a[6]||(a[6]=[w(" Clear Prompt ")])),_:1,__:[6]},8,["disabled"])])]),d.selectedModel?(o(),c("div",lt,[a[8]||(a[8]=e("h3",null,"Quick Templates",-1)),e("div",at,[(o(),c(N,null,B(i,s=>h(b,{key:s.name,size:"small",onClick:m=>d.$emit("load-template",s.prompt)},{default:y(()=>[w(p(s.name),1)]),_:2},1032,["onClick"])),64))])])):V("",!0)])}}}),it=E(rt,[["__scopeId","data-v-c9dee8ad"]]),dt={class:"template-editor"},ut=["placeholder","rows","data-testid","aria-label"],pt=L({__name:"TemplateEditorV3",props:{modelValue:{},label:{},placeholder:{default:"Enter your prompt template..."},required:{type:Boolean},rows:{default:4},variables:{default:()=>[]},variableColors:{default:()=>({})}},emits:["update:modelValue"],setup(x,{expose:r,emit:l}){const i=x,d=l,a=T(),b=T(),s=T(!1),m=D({get:()=>i.modelValue,set:n=>d("update:modelValue",n)}),C=D(()=>{let n=I(m.value);return n=n.replace(/\{\{(\w+)\}\}/g,(g,u)=>{const v=/^\w+$/.test(u),$=i.variableColors[u];return v&&$?`<span class="variable-highlight" style="background-color: ${$.bg}; box-shadow: 0 0 0 1px ${$.bg};">${I(g)}</span>`:v?`<span class="variable-highlight">${I(g)}</span>`:`<span class="variable-error">${I(g)}</span>`}),n=n.replace(/\n/g,"<br>"),n=n.replace(/  /g," &nbsp;"),n.endsWith("<br>")||(n+="<br>"),n});function I(n){const g=document.createElement("div");return g.textContent=n,g.innerHTML}function t(){!a.value||!b.value||(b.value.scrollTop=a.value.scrollTop,b.value.scrollLeft=a.value.scrollLeft)}return G(m,async()=>{await se(),t()}),r({focus:()=>a.value?.focus()}),(n,g)=>{const u=ye("dompurify-html");return o(),c("div",dt,[e("div",{class:te(["editor-container",{focused:s.value}])},[q(e("div",{ref_key:"highlightRef",ref:b,class:"editor-highlight","aria-hidden":"true"},null,512),[[u,C.value,"template"]]),q(e("textarea",{ref_key:"textareaRef",ref:a,"onUpdate:modelValue":g[0]||(g[0]=v=>m.value=v),class:"editor-textarea",placeholder:n.placeholder,rows:n.rows,"data-testid":n.$attrs["data-testid"]||"textarea-template-editor","aria-label":n.$attrs["aria-label"]||"Template editor textarea",onFocus:g[1]||(g[1]=v=>s.value=!0),onBlur:g[2]||(g[2]=v=>s.value=!1),onScroll:t},null,40,ut),[[$e,m.value]])],2)])}}}),ct=E(pt,[["__scopeId","data-v-1880e5bc"]]),mt={class:"prompt-section"},vt={class:"section-header"},gt={class:"character-count"},_t=L({__name:"PromptEditorSectionV3",props:{promptText:{}},emits:["update:prompt-text"],setup(x){return(r,l)=>(o(),c("div",mt,[e("div",vt,[l[1]||(l[1]=e("h3",null,"Prompt",-1)),e("span",gt,p(r.promptText.length)+" characters",1)]),h(ct,{"model-value":r.promptText,"onUpdate:modelValue":l[0]||(l[0]=i=>r.$emit("update:prompt-text",i)),rows:6,placeholder:"Enter your prompt here... No variables or placeholders in the playground, just one prompt at a time.","data-testid":"playground-prompt-editor"},null,8,["model-value"])]))}}),ft=E(_t,[["__scopeId","data-v-dffa2db6"]]),ht={key:0,class:"logprobs-container"},bt={class:"logprobs-header"},yt=["value"],$t={class:"logprobs-content"},kt=["onMouseenter"],Ct={class:"tooltip-header"},Pt={class:"tooltip-content"},St={class:"tooltip-row"},Vt={class:"tooltip-value"},Tt={class:"tooltip-row"},wt={class:"tooltip-value"},xt={key:0,class:"tooltip-alternatives"},It={class:"alt-token"},Mt={class:"alt-prob"},Rt={class:"logprobs-legend"},Et={class:"legend-bar"},Lt=L({__name:"LogprobsDisplay",props:{logprobs:{}},setup(x){const r=T("viridis"),l=T(!1),i=T(null),d=T({}),a=T(null);function b(g){const u=Math.exp(g);return Math.sqrt(u)}function s(g){const u=W[r.value];if(!u)return r.value,{};const v=b(g.logprob),$=X(v,u.colors),R=Ve($);return{backgroundColor:`${$} !important`,color:`${R} !important`}}function m(g){const u=W[r.value];return u?X(g,u.colors):"transparent"}function C(g){return g===`
`?"\\n":g==="	"?"\\t":g===" "?"·":g.trim()===""?`[${g.length} spaces]`:g}function I(g,u){i.value=g,l.value=!0,n(u)}function t(){l.value=!1,i.value=null}function n(g){if(!l.value)return;const u=10,v=g.clientX+u,$=a.value,R=$?$.offsetHeight:100,z=g.clientY-R+u;d.value={position:"fixed",left:`${v}px`,top:`${z}px`,zIndex:"1000"}}return(g,u)=>g.logprobs.hasLogprobs?(o(),c("div",ht,[e("div",bt,[u[2]||(u[2]=e("h4",null,"Token Probabilities",-1)),q(e("select",{"onUpdate:modelValue":u[0]||(u[0]=v=>r.value=v),class:"color-scale-selector"},[(o(!0),c(N,null,B(j(W),(v,$)=>(o(),c("option",{key:$,value:$},p(v.name),9,yt))),128))],512),[[ke,r.value]])]),e("div",$t,[(o(!0),c(N,null,B(g.logprobs.content,(v,$)=>(o(),c("span",{key:$,style:H(s(v)),class:"logprob-token",onMouseenter:R=>I(v,R),onMouseleave:t,onMousemove:u[1]||(u[1]=R=>n(R))},p(C(v.token)),45,kt))),128))]),l.value?(o(),c("div",{key:0,ref_key:"tooltipRef",ref:a,class:"logprob-tooltip",style:H(d.value)},[e("div",Ct,[e("strong",null,'"'+p(i.value?.token)+'"',1)]),e("div",Pt,[e("div",St,[u[3]||(u[3]=e("span",{class:"tooltip-label"},"Logprob:",-1)),e("span",Vt,p(i.value?.logprob?.toFixed(4)),1)]),e("div",Tt,[u[4]||(u[4]=e("span",{class:"tooltip-label"},"Probability:",-1)),e("span",wt,p((Math.exp(i.value?.logprob||0)*100).toFixed(2))+"%",1)]),i.value?.top_logprobs&&i.value.top_logprobs.length>0?(o(),c("div",xt,[u[5]||(u[5]=e("div",{class:"tooltip-section-header"},"Top alternatives:",-1)),(o(!0),c(N,null,B(i.value.top_logprobs,v=>(o(),c("div",{key:v.token,class:"tooltip-alt"},[e("span",It,'"'+p(C(v.token))+'"',1),e("span",Mt,p((Math.exp(v.logprob)*100).toFixed(2))+"%",1)]))),128))])):V("",!0)])],4)):V("",!0),e("div",Rt,[e("div",Et,[(o(),c(N,null,B(10,(v,$)=>e("div",{key:$,style:H({backgroundColor:m($/9)}),class:"legend-segment"},null,4)),64))]),u[6]||(u[6]=e("div",{class:"legend-labels"},[e("span",null,"Low probability"),e("span",null,"High probability")],-1))])])):V("",!0)}}),Dt=E(Lt,[["__scopeId","data-v-36cdf50b"]]),Ot={class:"response-display"},Nt={key:0,class:"loading-state"},Bt={key:1,class:"error-state"},zt={class:"error-details"},Ft={key:2,class:"response-content"},At={class:"response-text"},Jt={class:"text-content"},Ut={class:"expand-icon"},jt={class:"metadata-content"},qt={class:"metadata-grid"},Ht={class:"metadata-item"},Wt={class:"value"},Gt={key:0,class:"metadata-item"},Yt={class:"value"},Qt={key:1,class:"metadata-item"},Xt={class:"value"},Zt={class:"cost-amount"},Kt={class:"cost-amount"},es={class:"cost-amount"},ts={class:"metadata-item"},ss={class:"value env-costs"},os={class:"env-item"},ns={class:"env-item"},ls={class:"env-item"},as={class:"raw-response"},rs={class:"debug-sections"},is={class:"debug-section"},ds={class:"debug-response"},us={class:"debug-section"},ps={class:"debug-response"},cs={class:"debug-section"},ms={class:"debug-response"},vs={key:3,class:"empty-state"},gs=L({__name:"ResponseDisplayV3",props:{response:{},isLoading:{type:Boolean},error:{}},setup(x){const r=J(),l=D(()=>r.settings.core.preferences.value),i=T(!1);function d(t){return t<1e-4?t.toFixed(6):t<.01?t.toFixed(4):t.toFixed(3)}function a(t){if(!t)return"No raw response data";try{return JSON.stringify(t,null,2)}catch{return String(t)}}function b(t){if(!t)return"No error details available";try{if(t.debugInfo){const n=t.debugInfo;return`API Request Details:
URL: ${n.url}
Status: ${n.status}

Request Body:
${JSON.stringify(n.requestBody,null,2)}

Response Body:
${JSON.stringify(n.responseBody,null,2)}

Error Details:
${JSON.stringify(n.errorDetails,null,2)}

Full Error Object:
${JSON.stringify(t,null,2)}`}return t.stack?`Stack Trace:
${t.stack}

Full Error Object:
${JSON.stringify(t,null,2)}`:t.details?`Error Details:
${JSON.stringify(t.details,null,2)}

Full Error Object:
${JSON.stringify(t,null,2)}`:JSON.stringify(t,null,2)}catch{return String(t)}}function s(t){return l.value?.enableEnvironmentalCosts,"??"}function m(t){if(!t)return"No request data available";try{return JSON.stringify({url:t.url,method:t.method,headers:t.headers,body:t.body},null,2)}catch{return String(t)}}function C(t){if(!t)return"No response data available";try{return JSON.stringify({status:t.status,statusText:t.statusText,headers:t.headers,body:t.body},null,2)}catch{return String(t)}}function I(t){if(!t)return"No parsing data available";try{return JSON.stringify({providerId:t.providerId,modelId:t.modelId,parameters:t.parameters,parsedResponse:t.parsedResponse,contentExtracted:t.contentExtracted,contentLength:t.contentLength},null,2)}catch{return String(t)}}return(t,n)=>{const g=ue,u=Z,v=ee,$=K;return o(),c("div",Ot,[t.isLoading?(o(),c("div",Nt,[h(g,{size:"large"},{tip:y(()=>n[1]||(n[1]=[w("Generating response...")])),_:1})])):t.error?(o(),c("div",Bt,[h(u,{type:"error",message:t.error.message||"API Error",description:t.error.details,"show-icon":""},null,8,["message","description"]),t.error?(o(),S($,{key:0,ghost:"",style:{"margin-top":"16px"}},{default:y(()=>[h(v,{key:"details",header:"Full API Request/Response"},{default:y(()=>[e("pre",zt,p(b(t.error.response||t.error)),1)]),_:1})]),_:1})):V("",!0)])):t.response?(o(),c("div",Ft,[e("div",At,[e("pre",Jt,p(t.response.content),1)]),t.response.logprobs?(o(),S(Dt,{key:0,logprobs:t.response.logprobs},null,8,["logprobs"])):V("",!0),e("div",{class:te(["response-metadata",{expanded:i.value}])},[e("h3",{class:"metadata-header",onClick:n[0]||(n[0]=R=>i.value=!i.value)},[e("span",Ut,[i.value?(o(),S(j(ce),{key:1})):(o(),S(j(pe),{key:0}))]),n[2]||(n[2]=w(" Response Details "))]),q(e("div",jt,[e("div",qt,[e("div",Ht,[n[3]||(n[3]=e("span",{class:"label"},"Latency:",-1)),e("span",Wt,p(t.response.latency)+"ms",1)]),t.response.tokens?(o(),c("div",Gt,[n[4]||(n[4]=e("span",{class:"label"},"Token Usage:",-1)),e("span",Yt,p(t.response.tokens.prompt_tokens||"?")+" input + "+p(t.response.tokens.completion_tokens||"?")+" output = "+p(t.response.tokens.total_tokens||"?")+" total tokens ",1)])):V("",!0),t.response.cost?(o(),c("div",Qt,[n[8]||(n[8]=e("span",{class:"label"},"Cost Estimate:",-1)),e("span",Xt,[e("span",Zt,"$"+p(d(t.response.cost.input)),1),n[5]||(n[5]=w(" input + ")),e("span",Kt,"$"+p(d(t.response.cost.output)),1),n[6]||(n[6]=w(" output = ")),e("span",es,"$"+p(d(t.response.cost.total)),1),n[7]||(n[7]=w(" total "))])])):V("",!0),e("div",ts,[n[9]||(n[9]=e("span",{class:"label"},"Environmental:",-1)),e("span",ss,[e("span",os,"CO₂ 🏭: "+p(s())+"  ",1),e("span",ns,"Water 💧: "+p(s())+"  ",1),e("span",ls,"Energy ⚡: "+p(s()),1)])])]),h($,{ghost:"",style:{"margin-top":"16px"}},{default:y(()=>[h(v,{key:"raw",header:"Raw API Response"},{default:y(()=>[e("pre",as,p(a(t.response.raw)),1)]),_:1})]),_:1}),t.response.debug?(o(),S($,{key:0,ghost:"",style:{"margin-top":"8px"}},{default:y(()=>[h(v,{key:"debug",header:"🔍 Complete API Request/Response Debug"},{default:y(()=>[e("div",rs,[e("div",is,[n[10]||(n[10]=e("h4",null,"📤 API Request",-1)),e("pre",ds,p(m(t.response.debug.request)),1)]),e("div",us,[n[11]||(n[11]=e("h4",null,"📥 API Response",-1)),e("pre",ps,p(C(t.response.debug.response)),1)]),e("div",cs,[n[12]||(n[12]=e("h4",null,"⚙️ Response Parser Details",-1)),e("pre",ms,p(I(t.response.debug.parsing)),1)])])]),_:1})]),_:1})):V("",!0)],512),[[Ce,i.value]])],2)])):(o(),c("div",vs,n[13]||(n[13]=[e("div",{class:"empty-content"},[e("div",{class:"empty-icon"},"💬"),e("p",null,"Response will appear here after running a prompt")],-1)])))])}}}),_s=E(gs,[["__scopeId","data-v-70d773b1"]]),fs={key:0,class:"response-section"},hs={class:"section-header"},bs={key:0,class:"response-meta"},ys={class:"response-container"},$s=L({__name:"ResponseSectionV3",props:{hasExecuted:{type:Boolean},response:{},error:{},isLoading:{type:Boolean}},setup(x){return(r,l)=>r.hasExecuted?(o(),c("div",fs,[e("div",hs,[l[0]||(l[0]=e("h3",null,"Response",-1)),r.response&&!r.error?(o(),c("div",bs,[e("span",null,p(r.response.latency)+"ms",1),e("span",null,p(r.response.tokens?.total_tokens||"?")+" tokens",1)])):V("",!0)]),e("div",ys,[h(_s,{response:r.response,"is-loading":r.isLoading,error:r.error},null,8,["response","is-loading","error"])])])):V("",!0)}}),ks=E($s,[["__scopeId","data-v-cf6c2814"]]),Cs={class:"center-panel"},Ps=L({__name:"PlaygroundCenterPanelV3",props:{promptText:{},hasExecuted:{type:Boolean},response:{},error:{},isExecuting:{type:Boolean}},emits:["update:prompt-text"],setup(x){return(r,l)=>(o(),c("div",Cs,[h(ft,{"prompt-text":r.promptText,"onUpdate:promptText":l[0]||(l[0]=i=>r.$emit("update:prompt-text",i))},null,8,["prompt-text"]),h(ks,{"has-executed":r.hasExecuted,response:r.response,error:r.error,"is-loading":r.isExecuting},null,8,["has-executed","response","error","is-loading"])]))}}),Ss=E(Ps,[["__scopeId","data-v-e48f18da"]]),Vs={class:"parameter-panel"},Ts={key:0,class:"params-section"},ws={key:0,class:"reasoning-warning"},xs={key:5,class:"param-description"},Is={key:4,class:"param-description"},Ms={class:"panel-actions"},Rs=L({__name:"ModelParameterPanel",props:{model:{},modelValue:{}},emits:["update:modelValue","change"],setup(x,{emit:r}){const l=x,i=r,{getBasicParameters:d,getAdvancedParameters:a,getUIDefaults:b}=Te(),s=Pe({}),m=D(()=>l.model?d(l.model.provider,l.model.modelId):{}),C=D(()=>l.model?a(l.model.provider,l.model.modelId):{}),I=D(()=>l.model?(l.model.provider==="openai-chat"||l.model.provider==="openai-responses")&&(l.model.modelId.match(/^o[0-9]/)||l.model.modelId.match(/^gpt-5/)):!1);function t(u,v){s[u]=v,i("update:modelValue",{...s}),i("change",{...s})}function n(u){return u.replace(/\./g," › ").replace(/_/g," ").replace(/\b\w/g,v=>v.toUpperCase())}function g(){if(!l.model)return;Object.keys(s).forEach(v=>delete s[v]);const u=b(l.model.provider,l.model.modelId);Object.assign(s,u),i("update:modelValue",{...s}),i("change",{...s})}return G(()=>l.model,u=>{u&&g()},{immediate:!0}),G(()=>l.modelValue,u=>{Object.assign(s,u)},{immediate:!0,deep:!0}),(u,v)=>{const $=Z,R=me,z=ve,A=_e,U=ge,_=fe,M=he,O=ee,oe=K,ne=Y;return o(),c("div",Vs,[Object.keys(m.value).length>0?(o(),c("div",Ts,[v[1]||(v[1]=e("h4",null,"Basic Parameters",-1)),I.value?(o(),c("div",ws,[h($,{message:"Reasoning models (O* and GPT-5*) do not support temperature",type:"info",size:"small","show-icon":"",closable:!1})])):V("",!0),(o(!0),c(N,null,B(m.value,(f,P)=>(o(),S(M,{key:P,label:n(P)},{default:y(()=>[f.type==="number"?(o(),S(R,{key:0,value:s[P],onChange:k=>t(P,k),min:f.min,max:f.max,step:f.step||.1,placeholder:String(f.default),size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","step","placeholder"])):f.type==="integer"?(o(),S(R,{key:1,value:s[P],onChange:k=>t(P,k),min:f.min,max:f.max,placeholder:String(f.default),size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","placeholder"])):f.type==="boolean"?(o(),S(z,{key:2,checked:s[P],onChange:k=>t(P,k),"checked-children":"true","un-checked-children":"false"},null,8,["checked","onChange"])):f.type==="string"&&f.enum?(o(),S(U,{key:3,value:s[P],onChange:k=>t(P,k),placeholder:f.default?String(f.default):"<not set>",size:"large",style:{width:"100%"},allowClear:""},{default:y(()=>[h(A,{value:void 0},{default:y(()=>v[0]||(v[0]=[e("span",{style:{color:"#999"}},"<not set>",-1)])),_:1,__:[0]}),(o(!0),c(N,null,B(f.enum,k=>(o(),S(A,{key:k,value:k},{default:y(()=>[w(p(k),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onChange","placeholder"])):(o(),S(_,{key:4,value:s[P],onChange:k=>t(P,k.target.value),placeholder:String(f.default),size:"large"},null,8,["value","onChange","placeholder"])),f.description?(o(),c("div",xs,p(f.description),1)):V("",!0)]),_:2},1032,["label"]))),128))])):V("",!0),Object.keys(C.value).length>0?(o(),S(oe,{key:1,ghost:""},{default:y(()=>[h(O,{key:"advanced",header:"Advanced Parameters"},{default:y(()=>[(o(!0),c(N,null,B(C.value,(f,P)=>(o(),S(M,{key:P,label:n(P)},{default:y(()=>[f.type==="number"||f.type==="integer"?(o(),S(R,{key:0,value:s[P],onChange:k=>t(P,k),min:f.min,max:f.max,step:f.type==="number"?f.step||.1:1,placeholder:String(f.default),size:"large",style:{width:"100%"}},null,8,["value","onChange","min","max","step","placeholder"])):f.type==="boolean"?(o(),S(z,{key:1,checked:s[P],onChange:k=>t(P,k),"checked-children":"true","un-checked-children":"false"},null,8,["checked","onChange"])):f.type==="string"&&f.enum?(o(),S(U,{key:2,value:s[P],onChange:k=>t(P,k),placeholder:f.default?String(f.default):"<not set>",size:"large",style:{width:"100%"},allowClear:""},{default:y(()=>[h(A,{value:void 0},{default:y(()=>v[2]||(v[2]=[e("span",{style:{color:"#999"}},"<not set>",-1)])),_:1,__:[2]}),(o(!0),c(N,null,B(f.enum,k=>(o(),S(A,{key:k,value:k},{default:y(()=>[w(p(k),1)]),_:2},1032,["value"]))),128))]),_:2},1032,["value","onChange","placeholder"])):(o(),S(_,{key:3,value:s[P],onChange:k=>t(P,k.target.value),placeholder:String(f.default),size:"large"},null,8,["value","onChange","placeholder"])),f.description?(o(),c("div",Is,p(f.description),1)):V("",!0)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})):V("",!0),e("div",Ms,[h(ne,{onClick:g,size:"small"},{default:y(()=>v[3]||(v[3]=[w(" Reset to Defaults ")])),_:1,__:[3]})])])}}}),Es=E(Rs,[["__scopeId","data-v-723ec687"]]),Ls={class:"right-panel"},Ds={class:"panel-header"},Os={key:0},Ns={key:1},Bs={key:0,class:"panel-content"},zs={key:1,class:"no-model-message"},Fs=L({__name:"PlaygroundRightPanelV3",props:{model:{},parameters:{}},emits:["update:parameters","parameters-change"],setup(x,{emit:r}){const l=r;function i(d){l("update:parameters",d),l("parameters-change",d)}return(d,a)=>(o(),c("div",Ls,[e("div",Ds,[d.model?(o(),c("h3",Os,p(d.model.displayName),1)):(o(),c("h3",Ns,"Select a Model"))]),d.model?(o(),c("div",Bs,[h(Es,{model:d.model,modelValue:d.parameters,"onUpdate:modelValue":i,onChange:i},null,8,["model","modelValue"])])):(o(),c("div",zs,a[0]||(a[0]=[e("p",null,"Choose a model from the left panel to configure parameters.",-1)])))]))}}),As=E(Fs,[["__scopeId","data-v-a054623d"]]),Js={class:"design-list"},Us=["onClick"],js={class:"design-name"},qs={class:"design-description"},Hs={class:"design-preview"},Ws={class:"design-type"},Gs=L({__name:"DesignSelectorModalV3",props:{open:{type:Boolean}},emits:["close","select"],setup(x,{emit:r}){const l=r,i=J(),d=D(()=>{const b=i.templates.templates.value||[],s=i.spreadsheet.prompts.prompts.value||[];return[...b.map(m=>({id:m.id,name:m.name,description:m.description,text:m.template,type:"template"})),...s.map(m=>({id:m.id,name:m.name,description:m.description,text:m.promptPattern,type:"spreadsheet"}))]});function a(b){l("select",b),l("close")}return(b,s)=>{const m=be;return o(),S(m,{open:b.open,title:"Load from Design",width:"800px",footer:null,onCancel:s[0]||(s[0]=C=>b.$emit("close"))},{default:y(()=>[e("div",Js,[(o(!0),c(N,null,B(d.value,C=>(o(),c("div",{key:C.id,class:"design-item",onClick:I=>a(C)},[e("div",js,p(C.name),1),e("div",qs,p(C.description||"No description"),1),e("div",Hs,p(C.text.substring(0,100))+"...",1),e("div",Ws,p(C.type),1)],8,Us))),128))])]),_:1},8,["open"])}}}),Ys=E(Gs,[["__scopeId","data-v-5324ccd4"]]),Qs={class:"playground-view","data-testid":"page-playground"},Xs={class:"playground-content"},Zs=L({__name:"PlaygroundViewV3",setup(x){const{enabledModels:r}=le(),l=J(),i=T(null),d=T(""),a=T({}),b=T(!1),s=T(!1),m=T(!1),C=T(!1),I=T(null),t=T(null),n=D(()=>i.value&&d.value.trim().length>0&&!C.value),g=D(()=>d.value?Math.ceil(d.value.length/4):0),u=D(()=>i.value?a.value.max_tokens||a.value.maxTokens||1e3:256);function v(_){a.value={..._},a.value}function $(_){d.value=_.text}function R(_){d.value=_}function z(){d.value=""}function A(_){i.value=_,s.value=!1,a.value={},Q.supportsLogprobs(_.provider,_.modelId)&&(`${_.provider}${_.modelId}`,se(()=>{a.value.logprobs=!0,a.value.top_logprobs=5,a.value}))}async function U(){if(!(!n.value||!i.value)){m.value=!0,C.value=!0,I.value=null,t.value=null;try{const _=await l.executeSingleCall(d.value,0,{provider:i.value.provider,modelId:i.value.modelId,...a.value});_.ok?(I.value={content:_.value.content||"",latency:_.value.latency||0,tokens:_.value.usage,cost:_.value.cost,logprobs:_.value.logprobs,features:_.value.features,raw:_.value.raw,debug:_.value.debug,model:i.value},_.value.logprobs):t.value={message:_.error?.message||"Failed to execute prompt",details:_.error?.details||_.error?.stack||_.error,response:_.error,debugInfo:_.error?.debugInfo}}catch(_){t.value={message:_.message||"An unexpected error occurred",details:_.stack||_.toString(),response:_}}finally{C.value=!1}}}return Se(async()=>{setTimeout(()=>{!i.value&&r.value&&r.value.length>0&&(i.value=r.value[0],Q.supportsLogprobs(i.value.provider,i.value.modelId)&&(`${i.value.provider}${i.value.modelId}`,setTimeout(()=>{a.value.logprobs=!0,a.value.top_logprobs=5,a.value},200)))},100)}),(_,M)=>(o(),c("div",Qs,[h(Ee,{"selected-model":i.value,"estimated-tokens":g.value,"output-token-limit":u.value,disabled:!n.value,loading:C.value,onExecute:U},null,8,["selected-model","estimated-tokens","output-token-limit","disabled","loading"]),e("div",Xs,[h(it,{"selected-model":i.value,"prompt-text":d.value,onOpenModelSelector:M[0]||(M[0]=O=>s.value=!0),onLoadFromDesign:M[1]||(M[1]=O=>b.value=!0),onClearPrompt:z,onLoadTemplate:R},null,8,["selected-model","prompt-text"]),h(Ss,{"prompt-text":d.value,"has-executed":m.value,response:I.value,error:t.value,"is-executing":C.value,"onUpdate:promptText":M[2]||(M[2]=O=>d.value=O)},null,8,["prompt-text","has-executed","response","error","is-executing"]),h(As,{model:i.value,parameters:a.value,"onUpdate:parameters":M[3]||(M[3]=O=>a.value=O),onParametersChange:v},null,8,["model","parameters"])]),h(Ys,{open:b.value,onClose:M[4]||(M[4]=O=>b.value=!1),onSelect:$},null,8,["open"]),h(re,{visible:s.value,mode:"playground",title:"Select Model","onUpdate:visible":M[5]||(M[5]=O=>s.value=O),onSelectModel:A},null,8,["visible"])]))}}),po=E(Zs,[["__scopeId","data-v-e7ff4c3e"]]);export{po as default};
