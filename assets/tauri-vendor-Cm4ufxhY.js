function c(e,n,t,i){if(typeof n=="function"?e!==n||!0:!n.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?i:t==="a"?i.call(e):i?i.value:n.get(e)}function m(e,n,t,i,o){if(typeof n=="function"?e!==n||!0:!n.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n.set(e,t),t}var p,f,b,R,L;const I="__TAURI_TO_IPC_KEY__";function W(e,n=!1){return window.__TAURI_INTERNALS__.transformCallback(e,n)}class M{constructor(n){p.set(this,void 0),f.set(this,0),b.set(this,[]),R.set(this,void 0),m(this,p,n||(()=>{})),this.id=W(t=>{const i=t.index;if("end"in t){i==c(this,f,"f")?this.cleanupCallback():m(this,R,i);return}const o=t.message;if(i==c(this,f,"f")){for(c(this,p,"f").call(this,o),m(this,f,c(this,f,"f")+1);c(this,f,"f")in c(this,b,"f");){const a=c(this,b,"f")[c(this,f,"f")];c(this,p,"f").call(this,a),delete c(this,b,"f")[c(this,f,"f")],m(this,f,c(this,f,"f")+1)}c(this,f,"f")===c(this,R,"f")&&this.cleanupCallback()}else c(this,b,"f")[i]=o})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(n){m(this,p,n)}get onmessage(){return c(this,p,"f")}[(p=new WeakMap,f=new WeakMap,b=new WeakMap,R=new WeakMap,I)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[I]()}}async function r(e,n={},t){return window.__TAURI_INTERNALS__.invoke(e,n,t)}class v{get rid(){return c(this,L,"f")}constructor(n){L.set(this,void 0),m(this,L,n)}async close(){return r("plugin:resources|close",{rid:this.rid})}}L=new WeakMap;const h="Request cancelled";async function Y(e,n){const t=n?.signal;if(t?.aborted)throw new Error(h);const i=n?.maxRedirections,o=n?.connectTimeout,a=n?.proxy,l=n?.danger;n&&(delete n.maxRedirections,delete n.connectTimeout,delete n.proxy,delete n.danger);const s=n?.headers?n.headers instanceof Headers?n.headers:new Headers(n.headers):new Headers,g=new Request(e,n),_=await g.arrayBuffer(),$=_.byteLength!==0?Array.from(new Uint8Array(_)):null;for(const[d,w]of g.headers)s.get(d)||s.set(d,w);const G=(s instanceof Headers?Array.from(s.entries()):Array.isArray(s)?s:Object.entries(s)).map(([d,w])=>[d,typeof w=="string"?w:w.toString()]);if(t?.aborted)throw new Error(h);const N=await r("plugin:http|fetch",{clientConfig:{method:g.method,url:g.url,headers:G,data:$,maxRedirections:i,connectTimeout:o,proxy:a,danger:l}}),C=()=>r("plugin:http|fetch_cancel",{rid:N});if(t?.aborted)throw C(),new Error(h);t?.addEventListener("abort",()=>void C());const{status:x,statusText:V,url:q,headers:D,rid:P}=await r("plugin:http|fetch_send",{rid:N}),J=[101,103,204,205,304].includes(x)?null:new ReadableStream({start:d=>{const w=new M;w.onmessage=E=>{if(t?.aborted){d.error(h);return}const y=new Uint8Array(E),Z=y[y.byteLength-1],Q=y.slice(0,y.byteLength-1);if(Z==1){d.close();return}d.enqueue(Q)},r("plugin:http|fetch_read_body",{rid:P,streamChannel:w}).catch(E=>{d.error(E)})}}),U=new Response(J,{status:x,statusText:V});return Object.defineProperty(U,"url",{value:q}),Object.defineProperty(U,"headers",{value:new Headers(D)}),U}const Ne=Object.freeze(Object.defineProperty({__proto__:null,fetch:Y},Symbol.toStringTag,{value:"Module"}));async function K(e={}){return typeof e=="object"&&Object.freeze(e),await r("plugin:dialog|open",{options:e})}async function X(e={}){return typeof e=="object"&&Object.freeze(e),await r("plugin:dialog|save",{options:e})}async function B(e,n){const t=typeof n=="string"?{title:n}:n;await r("plugin:dialog|message",{message:e.toString(),title:t?.title?.toString(),kind:t?.kind,okButtonLabel:t?.okLabel?.toString()})}async function ee(e,n){const t=typeof n=="string"?{title:n}:n;return await r("plugin:dialog|ask",{message:e.toString(),title:t?.title?.toString(),kind:t?.kind,yesButtonLabel:t?.okLabel?.toString(),noButtonLabel:t?.cancelLabel?.toString()})}async function ne(e,n){const t=typeof n=="string"?{title:n}:n;return await r("plugin:dialog|confirm",{message:e.toString(),title:t?.title?.toString(),kind:t?.kind,okButtonLabel:t?.okLabel?.toString(),cancelButtonLabel:t?.cancelLabel?.toString()})}const Ce=Object.freeze(Object.defineProperty({__proto__:null,ask:ee,confirm:ne,message:B,open:K,save:X},Symbol.toStringTag,{value:"Module"}));var S;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(S||(S={}));var A;(function(e){e[e.Start=0]="Start",e[e.Current=1]="Current",e[e.End=2]="End"})(A||(A={}));function T(e){return{isFile:e.isFile,isDirectory:e.isDirectory,isSymlink:e.isSymlink,size:e.size,mtime:e.mtime!==null?new Date(e.mtime):null,atime:e.atime!==null?new Date(e.atime):null,birthtime:e.birthtime!==null?new Date(e.birthtime):null,readonly:e.readonly,fileAttributes:e.fileAttributes,dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,blksize:e.blksize,blocks:e.blocks}}function te(e){const n=new Uint8ClampedArray(e),t=n.byteLength;let i=0;for(let o=0;o<t;o++){const a=n[o];i*=256,i+=a}return i}class k extends v{async read(n){if(n.byteLength===0)return 0;const t=await r("plugin:fs|read",{rid:this.rid,len:n.byteLength}),i=te(t.slice(-8)),o=t instanceof ArrayBuffer?new Uint8Array(t):t;return n.set(o.slice(0,o.length-8)),i===0?null:i}async seek(n,t){return await r("plugin:fs|seek",{rid:this.rid,offset:n,whence:t})}async stat(){const n=await r("plugin:fs|fstat",{rid:this.rid});return T(n)}async truncate(n){await r("plugin:fs|ftruncate",{rid:this.rid,len:n})}async write(n){return await r("plugin:fs|write",{rid:this.rid,data:n})}}async function ie(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await r("plugin:fs|create",{path:e instanceof URL?e.toString():e,options:n});return new k(t)}async function F(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await r("plugin:fs|open",{path:e instanceof URL?e.toString():e,options:n});return new k(t)}async function re(e,n,t){if(e instanceof URL&&e.protocol!=="file:"||n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");await r("plugin:fs|copy_file",{fromPath:e instanceof URL?e.toString():e,toPath:n instanceof URL?n.toString():n,options:t})}async function oe(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await r("plugin:fs|mkdir",{path:e instanceof URL?e.toString():e,options:n})}async function ae(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await r("plugin:fs|read_dir",{path:e instanceof URL?e.toString():e,options:n})}async function se(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await r("plugin:fs|read_file",{path:e instanceof URL?e.toString():e,options:n});return t instanceof ArrayBuffer?new Uint8Array(t):Uint8Array.from(t)}async function ce(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=await r("plugin:fs|read_text_file",{path:e instanceof URL?e.toString():e,options:n}),i=t instanceof ArrayBuffer?t:Uint8Array.from(t);return new TextDecoder().decode(i)}async function le(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const t=e instanceof URL?e.toString():e;return await Promise.resolve({path:t,rid:null,async next(){this.rid===null&&(this.rid=await r("plugin:fs|read_text_file_lines",{path:t,options:n}));const i=await r("plugin:fs|read_text_file_lines_next",{rid:this.rid}),o=i instanceof ArrayBuffer?new Uint8Array(i):Uint8Array.from(i),a=o[o.byteLength-1]===1;return a?(this.rid=null,{value:null,done:a}):{value:new TextDecoder().decode(o.slice(0,o.byteLength)),done:a}},[Symbol.asyncIterator](){return this}})}async function fe(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await r("plugin:fs|remove",{path:e instanceof URL?e.toString():e,options:n})}async function ue(e,n,t){if(e instanceof URL&&e.protocol!=="file:"||n instanceof URL&&n.protocol!=="file:")throw new TypeError("Must be a file URL.");await r("plugin:fs|rename",{oldPath:e instanceof URL?e.toString():e,newPath:n instanceof URL?n.toString():n,options:t})}async function de(e,n){const t=await r("plugin:fs|stat",{path:e instanceof URL?e.toString():e,options:n});return T(t)}async function ge(e,n){const t=await r("plugin:fs|lstat",{path:e instanceof URL?e.toString():e,options:n});return T(t)}async function we(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");await r("plugin:fs|truncate",{path:e instanceof URL?e.toString():e,len:n,options:t})}async function pe(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");if(n instanceof ReadableStream){const i=await F(e,{create:!0,...t}),o=n.getReader();try{for(;;){const{done:a,value:l}=await o.read();if(a)break;await i.write(l)}}finally{o.releaseLock(),await i.close()}}else await r("plugin:fs|write_file",n,{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(t)}})}async function be(e,n,t){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");const i=new TextEncoder;await r("plugin:fs|write_text_file",i.encode(n),{headers:{path:encodeURIComponent(e instanceof URL?e.toString():e),options:JSON.stringify(t)}})}async function me(e,n){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await r("plugin:fs|exists",{path:e instanceof URL?e.toString():e,options:n})}class _e extends v{}async function j(e,n,t){const i=Array.isArray(e)?e:[e];for(const s of i)if(s instanceof URL&&s.protocol!=="file:")throw new TypeError("Must be a file URL.");const o=new M;o.onmessage=n;const a=await r("plugin:fs|watch",{paths:i.map(s=>s instanceof URL?s.toString():s),options:t,onEvent:o}),l=new _e(a);return()=>{l.close()}}async function ye(e,n,t){return await j(e,n,{delayMs:2e3,...t})}async function Re(e,n,t){return await j(e,n,{...t,delayMs:void 0})}async function he(e){if(e instanceof URL&&e.protocol!=="file:")throw new TypeError("Must be a file URL.");return await r("plugin:fs|size",{path:e instanceof URL?e.toString():e})}const xe=Object.freeze(Object.defineProperty({__proto__:null,get BaseDirectory(){return S},FileHandle:k,get SeekMode(){return A},copyFile:re,create:ie,exists:me,lstat:ge,mkdir:oe,open:F,readDir:ae,readFile:se,readTextFile:ce,readTextFileLines:le,remove:fe,rename:ue,size:he,stat:de,truncate:we,watch:ye,watchImmediate:Re,writeFile:pe,writeTextFile:be},Symbol.toStringTag,{value:"Module"}));var O;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(O||(O={}));async function Le(e,n){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,n),await r("plugin:event|unlisten",{event:e,eventId:n})}async function Ue(e,n,t){var i;const o=(i=void 0)!==null&&i!==void 0?i:{kind:"Any"};return r("plugin:event|listen",{event:e,target:o,handler:W(n)}).then(a=>async()=>Le(e,a))}var u;(function(e){e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warn=4]="Warn",e[e.Error=5]="Error"})(u||(u={}));function Ee(e){if(e)if(e.startsWith("Error")){const t=e.split(`
`)[3]?.trim();if(!t)return;const i=/at\s+(?<functionName>.*?)\s+\((?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)\)/,o=t.match(i);if(o){const{functionName:a,fileName:l,lineNumber:s,columnNumber:g}=o.groups;return`${a}@${l}:${s}:${g}`}else{const a=/at\s+(?<fileName>.*?):(?<lineNumber>\d+):(?<columnNumber>\d+)/,l=t.match(a);if(l){const{fileName:s,lineNumber:g,columnNumber:_}=l.groups;return`<anonymous>@${s}:${g}:${_}`}}}else return e.split(`
`).map(i=>i.split("@")).filter(([i,o])=>i.length>0&&o!=="[native code]")[2]?.filter(i=>i.length>0).join("@")}async function z(e,n,t){const i=Ee(new Error().stack),{file:o,line:a,keyValues:l}=t??{};await r("plugin:log|log",{level:e,message:n,location:i,file:o,line:a,keyValues:l})}async function Se(e,n){await z(u.Error,e,n)}async function Ae(e,n){await z(u.Info,e,n)}async function H(e){return await Ue("log://log",n=>{const{level:t}=n.payload;let{message:i}=n.payload;i=i.replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,""),e({message:i,level:t})})}async function Te(){return await H(({level:e,message:n})=>{switch(e){case u.Trace:break;case u.Debug:break;case u.Info:console.info(n);break;case u.Warn:console.warn(n);break;case u.Error:console.error(n);break;default:throw new Error(`unknown log level ${e}`)}})}const Ie=Object.freeze(Object.defineProperty({__proto__:null,get LogLevel(){return u},attachConsole:Te,attachLogger:H,error:Se,info:Ae},Symbol.toStringTag,{value:"Module"}));export{Ce as a,xe as b,Ie as c,Ne as i};
