import{p as o,a as D,b as g}from"./index-Bva3c6Vs.js";import{Q as O,f as u,c as i}from"./vue-vendor-Cg89ltm_.js";const J=O("parsers",()=>{const t=u([]),s=u(!1),n=u(null),c=u(""),v=u("all"),l=u(null),f=u(null),y=i(()=>t.value.filter(e=>e.isBuiltIn)),h=i(()=>t.value.filter(e=>!e.isBuiltIn)),P=i(()=>t.value.filter(e=>e.isPublic&&!e.isBuiltIn)),m=i(()=>{let e=t.value;if(v.value!=="all"&&(e=e.filter(r=>r.type===v.value)),c.value){const r=c.value.toLowerCase();e=e.filter(a=>a.name.toLowerCase().includes(r)||a.description?.toLowerCase().includes(r)||a.tags.some(p=>p.toLowerCase().includes(r)))}return e}),d=i(()=>({regex:t.value.filter(e=>e.type==="regex"),javascript:t.value.filter(e=>e.type==="javascript"),python:t.value.filter(e=>e.type==="python")})),x=i(()=>({total:t.value.length,builtIn:y.value.length,user:h.value.length,regex:d.value.regex.length,javascript:d.value.javascript.length,python:d.value.python.length}));async function w(){s.value=!0,l.value=null;try{await o.initializeDefaults(),t.value=await o.getAll()}catch(e){l.value=e instanceof Error?e.message:"Failed to load parsers",D.error("Failed to load parsers:",e)}finally{s.value=!1}}async function F(e){s.value=!0,l.value=null;try{const r=await o.create(e);if(r.ok&&r.data)return t.value.push(r.data),n.value=r.data,r.data;throw r.error||new Error("Failed to create parser")}catch(r){throw l.value=r instanceof Error?r.message:"Failed to create parser",r}finally{s.value=!1}}async function E(e,r){s.value=!0,l.value=null;try{const a=await o.update(e,r);if(a.ok&&a.data){const p=t.value.findIndex(A=>A.id===e);return p>=0&&(t.value[p]=a.data),n.value?.id===e&&(n.value=a.data),a.data}else throw a.error||new Error("Failed to update parser")}catch(a){throw l.value=a instanceof Error?a.message:"Failed to update parser",a}finally{s.value=!1}}async function C(e){s.value=!0,l.value=null;try{const r=await o.delete(e);if(r.ok)t.value=t.value.filter(a=>a.id!==e),n.value?.id===e&&(n.value=null);else throw r.error||new Error("Failed to delete parser")}catch(r){throw l.value=r instanceof Error?r.message:"Failed to delete parser",r}finally{s.value=!1}}async function S(e,r){s.value=!0,l.value=null;try{const a=await o.duplicate(e,r);if(a.ok&&a.data)return t.value.push(a.data),n.value=a.data,a.data;throw a.error||new Error("Failed to duplicate parser")}catch(a){throw l.value=a instanceof Error?a.message:"Failed to duplicate parser",a}finally{s.value=!1}}async function I(e,r){try{return await g.test(e,r)}catch(a){throw l.value=a instanceof Error?a.message:"Failed to test parser",a}}async function b(e,r){try{return await g.execute(e,r)}catch(a){throw l.value=a instanceof Error?a.message:"Failed to execute parser",a}}function j(e){n.value=e}function k(e){c.value=e}function B(e){v.value=e}function L(){l.value=null}function Q(e){f.value=e}function z(){return f.value}function T(){f.value=null}async function q(){t.value.length===0&&await w()}return{parsers:t,loading:s,selectedParser:n,searchQuery:c,typeFilter:v,error:l,selectionContext:f,builtInParsers:y,userParsers:h,publicParsers:P,filteredParsers:m,parsersByType:d,parserCount:x,loadParsers:w,createParser:F,updateParser:E,deleteParser:C,duplicateParser:S,testParser:I,executeParser:b,selectParser:j,setSearchQuery:k,setTypeFilter:B,clearError:L,setSelectionContext:Q,getSelectionContext:z,clearSelectionContext:T,initialize:q}});export{J as u};
