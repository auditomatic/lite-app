import{l as O,d as z,a as V}from"./index-B-vGjx5F.js";import{u as w}from"./useV4LiveQuery-Do0jdBW3.js";import{u as I}from"./useV4CrossTab-CqS3PCQZ.js";import{c as r}from"./vue-vendor-DPw1dQYc.js";function x(){const{data:a,loading:f,error:b}=w(()=>O(()=>z.variableLists.orderBy("updated").reverse().toArray()),e=>Object.freeze(e.map(t=>Object.freeze(t))),{initialValue:[]});I(e=>{e.table==="variableLists"&&e.operation});const m=r(()=>a.value),d=r(()=>Object.freeze(a.value.filter(e=>e.category==="simple"))),y=r(()=>Object.freeze(a.value.filter(e=>e.category==="attributed"))),g=r(()=>Object.freeze(a.value.filter(e=>e.category==="refusal"))),v=r(()=>Object.freeze(a.value.filter(e=>e.category==="tabular")));function L(e){return r(()=>{const t=a.value.find(s=>s.id===e);return t?Object.freeze(t):null})}function p(e){return r(()=>Object.freeze(a.value.filter(t=>t.category===e)))}function C(e){return r(()=>{if(!e.trim())return a.value;const t=e.toLowerCase(),s=a.value.filter(u=>u.name.toLowerCase().includes(t)||u.description?.toLowerCase().includes(t)||u.category.toLowerCase().includes(t));return Object.freeze(s)})}const j=r(()=>{const e=a.value,t=e.length;if(t===0)return Object.freeze({total:0,byCategory:{simple:0,attributed:0,refusal:0,tabular:0},totalItems:0,avgItemsPerList:0,mostPopularCategory:null});const s=e.reduce((o,i)=>(o[i.category]=(o[i.category]||0)+1,o),{}),u={simple:s.simple||0,attributed:s.attributed||0,refusal:s.refusal||0,tabular:s.tabular||0},l=e.reduce((o,i)=>o+(i.itemCount||0),0);let n=null,c=0;for(const[o,i]of Object.entries(u))i>c&&(c=i,n=o);return Object.freeze({total:t,byCategory:Object.freeze(u),totalItems:l,avgItemsPerList:t>0?Math.round(l/t):0,mostPopularCategory:n})});return{variableLists:m,simpleLists:d,attributedLists:y,refusalLists:g,tabularLists:v,loading:r(()=>f.value),error:r(()=>b.value),getListById:L,getListsByCategory:p,searchLists:C,stats:j}}export{x as u};
