import{a as s}from"./index-CizcaYwl.js";import{b as i}from"./vue-vendor-DPw1dQYc.js";const c="v4-data-updates";let o=null;function r(){return o||(o=new BroadcastChannel(c),s.info("V4 Cross-tab communication initialized")),o}function l(t,e){try{const a=r(),n={type:"data-changed",table:t,operation:e,timestamp:Date.now()};a.postMessage(n),s.info("V4 Cross-tab broadcast sent:",n)}catch(a){s.warn("V4 Cross-tab broadcast failed:",a)}}function u(t){const e=r(),a=n=>{s.info("V4 Cross-tab message received:",n.data),t(n.data)};return e.addEventListener("message",a),i(()=>{e.removeEventListener("message",a)}),{channel:e,cleanup:()=>e.removeEventListener("message",a)}}export{l as b,u};
