import{a as o}from"./index-DNH2rO2k.js";import{b as c}from"./vue-vendor-DPw1dQYc.js";const i="v4-data-updates";let n=null;function r(){return n||(n=new BroadcastChannel(i)),n}function l(t,e){try{const a=r(),s={type:"data-changed",table:t,operation:e,timestamp:Date.now()};a.postMessage(s)}catch(a){o.warn("V4 Cross-tab broadcast failed:",a)}}function g(t){const e=r(),a=s=>{s.data,t(s.data)};return e.addEventListener("message",a),c(()=>{e.removeEventListener("message",a)}),{channel:e,cleanup:()=>e.removeEventListener("message",a)}}export{l as b,g as u};
