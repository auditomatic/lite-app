var e=Object.defineProperty,t=(t,a,s)=>((t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s)(t,"symbol"!=typeof a?a+"":a,s);import{d as a,r as s,j as n,b as l,e as r,f as i,g as o,k as u,Q as c,T as d,l as p,F as m,A as v,t as g,S as f,U as b,w as y,i as h,y as _,V as x,o as k,m as w,p as $,n as V,u as S,E}from"./vendor-w2iEWTO6.js";import{D as j,_ as A,u as C,a as D}from"./index-Be1jm3CD.js";import{u as I}from"./variableLists-CtN2hIh3.js";import{t as N,V as O}from"./VariableResolutionService-zT5CarPI.js";import"./db-BfRGDvSu.js";import"./apiLogger-DxGnFuqw.js";const T=class e{constructor(){t(this,"schemas",new Map)}static getInstance(){return e.instance||(e.instance=new e,e.instance.initializeSchemas()),e.instance}initializeSchemas(){this.registerSchema("design",{required:["name","prompt_template"],rules:[{field:"name",type:"string",min:1,max:200,message:"Name must be 1-200 characters"},{field:"prompt_template",type:"string",min:1,message:"Prompt template is required"},{field:"description",type:"string",max:1e3,message:"Description must be under 1000 characters"},{field:"variable_list_refs",type:"array",message:"Variable list refs must be an array"},{field:"compound_variables",type:"array",message:"Compound variables must be an array"},{field:"tags",type:"array",message:"Tags must be an array"},{field:"prompt_template",type:"custom",customValidator:e=>this.validatePromptTemplate(e),message:"Prompt template contains invalid variable syntax"}]}),this.registerSchema("run",{required:["design_id","name","models"],rules:[{field:"design_id",type:"string",min:1,message:"Design ID is required"},{field:"name",type:"string",min:1,max:200,message:"Name must be 1-200 characters"},{field:"models",type:"array",min:1,message:"At least one model is required"},{field:"status",type:"string",message:"Status must be a string"},{field:"status",type:"custom",customValidator:e=>["pending","running","completed","failed","cancelled"].includes(e),message:"Status must be one of: pending, running, completed, failed, cancelled"},{field:"models",type:"custom",customValidator:this.validateModelArray.bind(this),message:"Models array contains invalid entries"}]}),this.registerSchema("task",{required:["run_id","model","prompt"],rules:[{field:"run_id",type:"string",min:1,message:"Run ID is required"},{field:"model",type:"string",min:1,message:"Model is required"},{field:"prompt",type:"string",min:1,message:"Prompt is required"},{field:"status",type:"string",message:"Status must be a string"},{field:"status",type:"custom",customValidator:e=>["pending","running","completed","failed"].includes(e),message:"Status must be one of: pending, running, completed, failed"},{field:"usage",type:"custom",customValidator:this.validateTokenUsage.bind(this),message:"Token usage object is invalid"}]}),this.registerSchema("variable_list",{required:["name","values"],rules:[{field:"name",type:"string",min:1,max:200,message:"Name must be 1-200 characters"},{field:"values",type:"array",min:1,message:"At least one value is required"},{field:"description",type:"string",max:1e3,message:"Description must be under 1000 characters"},{field:"attribution",type:"string",max:500,message:"Attribution must be under 500 characters"},{field:"values",type:"custom",customValidator:this.validateVariableValues.bind(this),message:"Variable values contain invalid entries"}]}),this.registerSchema("model",{required:["id","provider","name"],rules:[{field:"id",type:"string",min:1,message:"Model ID is required"},{field:"provider",type:"string",min:1,message:"Provider is required"},{field:"name",type:"string",min:1,message:"Model name is required"},{field:"enabled",type:"boolean",message:"Enabled must be a boolean"},{field:"context_length",type:"number",min:1,message:"Context length must be positive"},{field:"input_cost",type:"number",min:0,message:"Input cost must be non-negative"},{field:"output_cost",type:"number",min:0,message:"Output cost must be non-negative"}]}),this.registerSchema("provider",{required:["id","name","base_url"],rules:[{field:"id",type:"string",min:1,message:"Provider ID is required"},{field:"name",type:"string",min:1,message:"Provider name is required"},{field:"base_url",type:"url",message:"Base URL must be a valid URL"},{field:"timeout",type:"number",min:1e3,max:3e5,message:"Timeout must be 1-300 seconds"},{field:"rate_limit",type:"number",min:1,message:"Rate limit must be positive"}]})}registerSchema(e,t){this.schemas.set(e,t)}async validateEntity(e,t,a={}){const s=this.schemas.get(e);if(!s)return{valid:!1,errors:[{field:"_schema",value:e,message:`No schema found for entity type: ${e}`,type:"error"}],warnings:[]};const n=[],l=[],r={...t};if(s.required)for(const i of s.required)i in t&&void 0!==t[i]&&null!==t[i]&&""!==t[i]||n.push({field:i,value:t[i],message:`${i} is required`,type:"error"});for(const i of s.rules){const e=t[i.field],s=this.validateField(i,e);s.error&&n.push({field:i.field,value:e,message:s.error,type:"error"}),s.warning&&l.push({field:i.field,value:e,message:s.warning,type:"warning"}),a.coerceTypes&&void 0!==s.coercedValue&&(r[i.field]=s.coercedValue)}if(!a.allowExtraFields){const e=new Set([...s.required||[],...s.optional||[],...s.rules.map(e=>e.field)]);for(const s in t)e.has(s)||(a.stripExtraFields?(delete r[s],l.push({field:s,value:t[s],message:`Extra field '${s}' was stripped`,type:"warning"})):l.push({field:s,value:t[s],message:`Extra field '${s}' is not allowed`,type:"warning"}))}return{valid:0===n.length,errors:n,warnings:l,data:r}}validateField(e,t){if(null==t)return{};switch(e.type){case"required":if(""===t||null==t)return{error:e.message||`${e.field} is required`};break;case"string":if("string"!=typeof t)return{error:e.message||`${e.field} must be a string`};if(void 0!==e.min&&t.length<e.min)return{error:e.message||`${e.field} must be at least ${e.min} characters`};if(void 0!==e.max&&t.length>e.max)return{error:e.message||`${e.field} must be at most ${e.max} characters`};if(e.pattern&&!e.pattern.test(t))return{error:e.message||`${e.field} does not match required pattern`};break;case"number":const a="string"==typeof t?parseFloat(t):t;return isNaN(a)||"number"!=typeof a?{error:e.message||`${e.field} must be a number`}:void 0!==e.min&&a<e.min?{error:e.message||`${e.field} must be at least ${e.min}`}:void 0!==e.max&&a>e.max?{error:e.message||`${e.field} must be at most ${e.max}`}:{coercedValue:a};case"boolean":if("boolean"!=typeof t)return"true"===t||"false"===t?{coercedValue:"true"===t}:{error:e.message||`${e.field} must be a boolean`};break;case"array":if(!Array.isArray(t))return{error:e.message||`${e.field} must be an array`};if(void 0!==e.min&&t.length<e.min)return{error:e.message||`${e.field} must have at least ${e.min} items`};if(void 0!==e.max&&t.length>e.max)return{error:e.message||`${e.field} must have at most ${e.max} items`};break;case"object":if("object"!=typeof t||Array.isArray(t))return{error:e.message||`${e.field} must be an object`};break;case"email":if("string"!=typeof t||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return{error:e.message||`${e.field} must be a valid email address`};break;case"url":try{new URL(t)}catch{return{error:e.message||`${e.field} must be a valid URL`}}break;case"custom":if(e.customValidator){const a=e.customValidator(t);if(!1===a)return{error:e.message||`${e.field} failed custom validation`};if("string"==typeof a)return{error:a}}}return{}}validatePromptTemplate(e){if("string"!=typeof e)return"Prompt template must be a string";if((e.match(/\{\{/g)||[]).length!==(e.match(/\}\}/g)||[]).length)return"Unmatched template braces in prompt template";const t=/\{\{([^}]+)\}\}/g,a=[];let s;for(;null!==(s=t.exec(e));){const e=s[1].trim();/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)||a.push(e)}return!(a.length>0)||`Invalid variable names: ${a.join(", ")}`}validateModelArray(e){if(!Array.isArray(e))return"Models must be an array";if(0===e.length)return"At least one model is required";for(const t of e)if("string"!=typeof t||""===t.trim())return"All models must be non-empty strings";return!0}validateTokenUsage(e){if(!e)return!0;if("object"!=typeof e)return"Token usage must be an object";const t=["prompt_tokens","completion_tokens","total_tokens"];for(const a of t)if(!(a in e)||"number"!=typeof e[a]||e[a]<0)return`Token usage.${a} must be a non-negative number`;return e.total_tokens===e.prompt_tokens+e.completion_tokens||"Token usage total_tokens must equal prompt_tokens + completion_tokens"}validateVariableValues(e){if(!Array.isArray(e))return"Variable values must be an array";if(0===e.length)return"At least one variable value is required";for(let t=0;t<e.length;t++){const a=e[t];if("string"!=typeof a||""===a.trim())return`Variable value at index ${t} must be a non-empty string`}return new Set(e).size===e.length||"Variable values must be unique"}async validateMultiple(e,t={}){return await Promise.all(e.map(e=>this.validateEntity(e.type,e.data,t)))}getSchema(e){return this.schemas.get(e)}listSchemas(){return Array.from(this.schemas.keys())}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}sanitizeString(e,t=1e3){return e.trim().substring(0,t)}};t(T,"instance");let U=T;U.getInstance();const L=class e{constructor(){t(this,"dbService"),t(this,"validationService"),this.dbService=j.getInstance(),this.validationService=U.getInstance()}static getInstance(){return e.instance||(e.instance=new e),e.instance}async importDesigns(e,t={}){const a={success:!1,designs:[],errors:[],warnings:[],converted:0};try{let n=[];if(Array.isArray(e))n=e;else{if(!e||"object"!=typeof e)return a.errors.push("Invalid import data format"),a;n=[e]}for(let e=0;e<n.length;e++){const l=n[e];try{if(t.convertTemplateFormat&&l.prompt_template){const t=l.prompt_template;l.prompt_template=this.convertTemplateFormat(t),l.prompt_template!==t&&(a.converted++,a.warnings.push(`Converted template format for design "${l.name||`#${e+1}`}"`))}if(l.variables&&"object"==typeof l.variables&&(l.variables=this.normalizeVariableFormat(l.variables)),!t.allowDuplicateNames){const e=await this.dbService.findAll("designs");if(e.success&&e.data){const t=new Set(e.data.map(e=>e.name));t.has(l.name)&&(l.name=await this.generateUniqueName(l.name,t),a.warnings.push(`Renamed design to avoid duplicate: ${l.name}`))}}if(!t.skipValidation){const t=await this.validationService.validateEntity("design",l);if(!t.valid){a.errors.push(`Design #${e+1}: ${t.errors.map(e=>e.message).join(", ")}`);continue}}const s=await this.dbService.create("designs",l);s.success&&s.data?a.designs.push(s.data):a.errors.push(`Failed to create design #${e+1}: ${s.error}`)}catch(s){a.errors.push(`Error processing design #${e+1}: ${s instanceof Error?s.message:"Unknown error"}`)}}return a.success=a.designs.length>0,a}catch(s){return a.errors.push(`Import failed: ${s instanceof Error?s.message:"Unknown error"}`),a}}async exportDesigns(e,t={}){try{const a=[];for(const t of e){const e=await this.dbService.read("designs",t);e.success&&e.data&&a.push(e.data)}if(0===a.length)return{success:!1,error:"No designs found to export"};const s=t.format||"json",n=(new Date).toISOString().slice(0,19).replace(/[:-]/g,"");if("json"===s){const e={exported_at:(new Date).toISOString(),version:"1.0",designs:a.map(e=>this.sanitizeDesignForExport(e,t))};return{success:!0,data:JSON.stringify(e,null,2),filename:`designs_export_${n}.json`}}if("csv"===s){return{success:!0,data:this.convertToCSV(a,t),filename:`designs_export_${n}.csv`}}return{success:!1,error:`Unsupported export format: ${s}`}}catch(a){return{success:!1,error:`Export failed: ${a instanceof Error?a.message:"Unknown error"}`}}}convertTemplateFormat(e){return e.replace(/\{([^{}\s]+)\}/g,"{{$1}}")}normalizeVariableFormat(e){const t={};for(const[a,s]of Object.entries(e))Array.isArray(s)?t[a]=s.map(e=>String(e)):t[a]="string"==typeof s?s.split(",").map(e=>e.trim()).filter(e=>e.length>0):[String(s)];return t}async generateUniqueName(e,t){let a=1,s=`${e} (${a})`;for(;t.has(s);)a++,s=`${e} (${a})`;return s}sanitizeDesignForExport(e,t){const{includeRuns:a=!1}=t;return{name:e.name,description:e.description,prompt_template:e.prompt_template,variables:e.variables,variable_list_refs:e.variable_list_refs,created_at:e.created_at,updated_at:e.updated_at}}convertToCSV(e,t){const a=[["name","description","prompt_template","variables","created_at"].join(",")];for(const s of e){const e=[this.escapeCsvValue(s.name||""),this.escapeCsvValue(s.description||""),this.escapeCsvValue(s.prompt_template||""),this.escapeCsvValue(JSON.stringify(s.variables||{})),this.escapeCsvValue(s.created_at||"")];a.push(e.join(","))}return a.join("\n")}escapeCsvValue(e){return e.includes(",")||e.includes('"')||e.includes("\n")?`"${e.replace(/"/g,'""')}"`:e}};t(L,"instance");let R=L;const q={class:"tag-input"},P={class:"tag-container"},F={class:"tag-text"},J=["aria-label","onClick"],M=["placeholder","onKeydown"],z={key:0,class:"helper-text"},B=A(a({__name:"TagInput",props:{modelValue:{},placeholder:{},helperText:{},allowDuplicates:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,h=t,_=s(),x=s(""),k=s(null);function w(){const e=x.value.trim();if(e){if(!a.allowDuplicates&&a.modelValue.includes(e)){const t=a.modelValue.indexOf(e),s=document.querySelectorAll(".tag");return s[t]?.classList.add("tag-flash"),k.value&&clearTimeout(k.value),k.value=window.setTimeout(()=>{s[t]?.classList.remove("tag-flash")},300),void(x.value="")}h("update:modelValue",[...a.modelValue,e]),x.value=""}}function $(e){const t=[...a.modelValue];t.splice(e,1),h("update:modelValue",t)}function V(){""===x.value&&a.modelValue.length>0&&$(a.modelValue.length-1)}function S(e){e.preventDefault();const t=e.clipboardData?.getData("text");if(!t)return;const s=t.split(/[\n,\t]+/).map(e=>e.trim()).filter(e=>e),n=a.allowDuplicates?[...a.modelValue,...s]:[...a.modelValue,...s.filter(e=>!a.modelValue.includes(e))];h("update:modelValue",n)}return n(()=>{k.value&&clearTimeout(k.value)}),(e,t)=>(r(),l("div",q,[i("div",P,[u(d,{name:"tag-list",tag:"div",class:"tags"},{default:p(()=>[(r(!0),l(m,null,v(e.modelValue,(e,t)=>(r(),l("div",{key:`${e}-${t}`,class:"tag"},[i("span",F,g(e),1),i("button",{type:"button",class:"tag-remove","aria-label":`Remove ${e}`,onClick:e=>$(t)}," × ",8,J)]))),128))]),_:1}),c(i("input",{ref_key:"inputRef",ref:_,"onUpdate:modelValue":t[0]||(t[0]=e=>x.value=e),placeholder:e.placeholder,class:"tag-input-field",onKeydown:[b(y(w,["prevent"]),["enter"]),b(V,["backspace"])],onPaste:S},null,40,M),[[f,x.value]])]),e.helperText?(r(),l("div",z,g(e.helperText),1)):o("",!0)]))}}),[["__scopeId","data-v-f7f8d7d3"]]),G={class:"regex-builder"},Z={class:"regex-header"},W={class:"header-controls"},Y={key:0,class:"regex-presets"},K={class:"preset-grid"},Q=["onClick"],H={class:"preset-name"},X={class:"preset-pattern"},ee={class:"regex-input-group"},te={key:0,class:"simple-mode"},ae={key:1,class:"advanced-mode"},se={class:"advanced-field"},ne={class:"advanced-field"},le=["disabled"],re={key:1,class:"regex-error"},ie={class:"regex-test-section"},oe={key:2,class:"test-results"},ue={class:"match-list"},ce={class:"match-label"},de={class:"match-value"},pe={key:3,class:"api-test-section"},me={class:"api-test-controls"},ve=["value"],ge=["disabled"],fe={key:0,class:"api-result"},be={class:"api-response"},ye={class:"api-extracted"},he=A(a({__name:"RegexBuilder",props:{modelValue:{},promptTemplate:{},showApiTest:{type:Boolean},variables:{},variableListRefs:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e,n=t,u=C(),d=s("object"==typeof a.modelValue),p=s("object"==typeof a.modelValue?a.modelValue.match:a.modelValue||""),b=s("object"==typeof a.modelValue&&a.modelValue.replace||""),y=s(""),k=s([]),w=s(""),$=s(!1),V=s(""),S=s(!1),E=s(null),j=h(()=>(d.value,p.value)),A=h(()=>u.models.filter(e=>e.enabled)),D=[{name:"Simple Answer",pattern:"(?:Answer|Response|Result)\\s*[:\\s]\\s*(.+?)(?:\\n|$)",description:'Extracts text after "Answer:", "Response:", or "Result:"'},{name:"Score/Rating Answer",pattern:"(?:Score|Rating)\\s*[:\\s]\\s*(\\d+(?:\\.\\d+)?)",description:"Extracts numeric scores or ratings"},{name:"First Number",pattern:"\\b(\\d+(?:\\.\\d+)?)\\b",description:"Extracts the first number (integer or decimal)"},{name:"Last Number",pattern:".*\\b(\\d+(?:\\.\\d+)?)\\b(?!.*\\b\\d+(?:\\.\\d+)?\\b)",description:"Extracts the last number in the text"},{name:"Dollar Amount",pattern:"\\$?([0-9]{1,3}(?:,[0-9]{3})*(?:\\.[0-9]{2})?)",description:"Extracts dollar amounts (e.g., $150,000.00) - includes commas"},{name:"Dollar Amount (Clean)",pattern:"\\$([0-9,]+)",replace:"$1",description:"Extracts dollar amounts, strips $ symbol (keeps commas for readability)"},{name:"Number (No Commas)",pattern:"([0-9,]+)",replace:"$1",description:"Extracts numbers and removes commas (e.g., 150,000 → 150000)"},{name:"Phone Number (Digits)",pattern:"(?:\\(?([0-9]{3})\\)?[-. ]?)?([0-9]{3})[-. ]?([0-9]{4})",replace:"$1$2$3",description:"Extracts phone numbers as digits only (e.g., (555) 123-4567 → 5551234567)"},{name:"Yes/No",pattern:"\\b((?:yes|no|YES|NO|Yes|No))\\b",description:"Extracts yes or no responses (case insensitive)"},{name:"JSON Value",pattern:'"result"\\s*:\\s*"([^"]+)"',description:"Extracts value from JSON result field"},{name:"Rating (1-5)",pattern:"\\b([1-5])(?:/5)?\\b",description:"Extracts ratings from 1 to 5"},{name:"Percentage",pattern:"\\b(\\d+(?:\\.\\d+)?)%",description:"Extracts percentage values"},{name:"First Word",pattern:"^\\s*(\\S+)",description:"Extracts the first word (non-whitespace sequence)"},{name:"Last Word",pattern:"(\\S+)\\s*$",description:"Extracts the last word in the text"},{name:"Text Until Punctuation",pattern:"^([^.!?;:,]+)",description:"Extracts text from start until first punctuation mark"},{name:"Text After Last Punctuation",pattern:"[.!?;:,]\\s*([^.!?;:,]+)\\s*$",description:"Extracts text after the last punctuation mark"},{name:"First Line",pattern:"^(.+?)(?:\\n|$)",description:"Extracts the first line of text"},{name:"Last Line",pattern:"(?:^|\\n)([^\\n]+)\\s*$",description:"Extracts the last line of text"},{name:"Between Quotes",pattern:'"([^"]+)"',description:"Extracts text between double quotes"},{name:"Category/Label",pattern:"(?:category|label|class|type)\\s*[:\\s]\\s*([^\\n\\r,.!?]+)",description:"Extracts category or label values (stops at punctuation)"},{name:"Everything",pattern:"^\\s*(.+?)\\s*$",description:"Extracts all text (removes leading/trailing whitespace)"},{name:"Main Content",pattern:"(?:^|\\n)\\s*([^\\n]+?)\\s*(?:\\n|$)",description:"Extracts the main line of content (ignores empty lines)"}];function I(){d.value&&b.value?n("update:modelValue",{match:p.value,replace:b.value}):n("update:modelValue",p.value),y.value&&T()}function O(){d.value=!d.value,I()}function T(){if(!p.value||!y.value)return k.value=[],void(w.value="");try{const e=d.value&&b.value?{match:p.value,replace:b.value}:p.value,t=L(y.value,e);t.length>=100?w.value="Showing first 100 matches (pattern matched more)":w.value="",k.value=t}catch(e){k.value=[],w.value=`Invalid regex: ${e instanceof Error?e.message:"Unknown error"}`}}async function U(){if(V.value&&a.promptTemplate&&!S.value){S.value=!0,E.value=null;try{const e=function(e){if(!a.variables)return e.replace(/\{\{\s*([^}]+)\s*\}\}/g,"test");return e.replace(/\{\{\s*([^}]+)\s*\}\}/g,(e,t)=>{const s=t.trim(),n=a.variables?.[s];return n&&n.length>0?n[0]:`test_${s}`})}(a.promptTemplate),t=await N(V.value,e,{temperature:.7,max_tokens:150,output_format:"text"}),s=L(t,j.value);E.value={response:t,extracted:s.length>0?s.join(", "):null}}catch(e){console.error("API test failed:",e),E.value={response:`Error: ${e instanceof Error?e.message:"Unknown error"}`,extracted:null}}finally{S.value=!1}}}function L(e,t){if(!t||!e)return[];try{const a="string"==typeof t?{match:t,replace:void 0}:t,s=new RegExp(a.match,"gm"),n=[];let l,r=0;const i=1e3,o=10;for(;null!==(l=s.exec(e))&&r<i&&n.length<o;)if(r++,l.index===s.lastIndex&&s.lastIndex++,l.groups){const e=Object.values(l.groups).filter(e=>void 0!==e);e.length>0&&n.push(e.join(" | "))}else if(l.length>1){const e=l.slice(1).filter(e=>void 0!==e);1===e.length?n.push(e[0]):e.length>1&&n.push(e.join(" | "))}else n.push(l[0]);return a.replace?n.map(e=>{try{const t=new RegExp(a.match,"g");return e.replace(t,a.replace)}catch(t){return console.warn("Error applying replace pattern:",t),e}}):n}catch(a){return console.error("Extraction failed:",a),[]}}return _(()=>a.modelValue,e=>{"object"==typeof e?(d.value=!0,p.value=e.match,b.value=e.replace||""):(p.value=e||"",b.value="")}),(e,t)=>(r(),l("div",G,[i("div",Z,[t[6]||(t[6]=i("h4",null,"Extract Pattern",-1)),i("div",W,[i("button",{type:"button",class:"btn btn-sm btn-outline-primary",onClick:O},g(d.value?"Simple":"Advanced"),1),i("button",{type:"button",class:"btn btn-sm btn-secondary",onClick:t[0]||(t[0]=e=>$.value=!$.value)},g($.value?"Hide":"Show")+" Presets ",1)])]),$.value?(r(),l("div",Y,[t[7]||(t[7]=i("h5",null,"Common Patterns",-1)),i("div",K,[(r(),l(m,null,v(D,e=>i("button",{key:e.name,type:"button",class:"preset-button",onClick:t=>function(e){p.value=e.pattern,"replace"in e?(b.value=e.replace||"",d.value=!0):b.value="",I()}(e)},[i("span",H,g(e.name),1),i("code",X,g(e.pattern),1)],8,Q)),64))])])):o("",!0),i("div",ee,[d.value?(r(),l("div",ae,[i("div",se,[t[8]||(t[8]=i("label",null,"Match Pattern:",-1)),c(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e),type:"text",class:"regex-input",placeholder:"e.g., \\$?([0-9,]+)",spellcheck:"false",onInput:I},null,544),[[f,p.value]])]),i("div",ne,[t[9]||(t[9]=i("label",null,"Replace Pattern (optional):",-1)),c(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>b.value=e),type:"text",class:"regex-input",placeholder:"e.g., $1 (strips $ and commas)",spellcheck:"false",onInput:I},null,544),[[f,b.value]])])])):(r(),l("div",te,[c(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),type:"text",class:"regex-input",placeholder:"e.g., Answer: (.+)",spellcheck:"false",onInput:I},null,544),[[f,p.value]])])),i("button",{type:"button",class:"btn btn-sm btn-primary",disabled:!p.value||!y.value,onClick:T}," Test ",8,le)]),w.value?(r(),l("div",re,g(w.value),1)):o("",!0),i("div",ie,[t[10]||(t[10]=i("label",null,"Test Text",-1)),c(i("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>y.value=e),rows:"3",placeholder:"Paste sample output to test your regex pattern",class:"test-textarea",onInput:T},null,544),[[f,y.value]])]),k.value.length>0?(r(),l("div",oe,[t[11]||(t[11]=i("h5",null,"Matches Found",-1)),i("div",ue,[(r(!0),l(m,null,v(k.value,(e,t)=>(r(),l("div",{key:t,class:"match-item"},[i("span",ce,"Match "+g(t+1)+":",1),i("code",de,g(e),1)]))),128))])])):o("",!0),e.showApiTest?(r(),l("div",pe,[t[15]||(t[15]=i("h5",null,"Test with API",-1)),i("div",me,[c(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),class:"model-select"},[t[12]||(t[12]=i("option",{value:""}," Select a model ",-1)),(r(!0),l(m,null,v(A.value,e=>(r(),l("option",{key:e.id,value:e.id},g(e.name),9,ve))),128))],512),[[x,V.value]]),i("button",{type:"button",class:"btn btn-sm btn-primary",disabled:!V.value||!e.promptTemplate||S.value,onClick:U},g(S.value?"Testing...":"Test with Model"),9,ge)]),E.value?(r(),l("div",fe,[t[13]||(t[13]=i("h6",null,"Model Response:",-1)),i("pre",be,g(E.value.response),1),t[14]||(t[14]=i("h6",null,"Extracted Value:",-1)),i("code",ye,g(E.value.extracted||"(no match)"),1)])):o("",!0)])):o("",!0)]))}}),[["__scopeId","data-v-a320e708"]]);const _e={class:"modal-content"},xe={class:"form-group"},ke={class:"form-group"},we={class:"form-group"},$e={key:0,class:"extraction-errors"},Ve={class:"error-list"},Se={key:1,class:"extraction-warnings"},Ee={class:"warning-list"},je={key:2,class:"variables-section"},Ae={class:"detected-variables"},Ce={class:"variable-header"},De={class:"variable-name"},Ie={class:"variable-actions"},Ne=["onClick"],Oe=["onClick"],Te={key:0,class:"list-reference"},Ue={class:"list-info"},Le={class:"list-count"},Re={key:1,class:"variable-values"},qe={class:"form-group"},Pe={key:3,class:"form-group"},Fe={class:"json-test-section"},Je={class:"json-test-controls"},Me=["value"],ze=["disabled"],Be={key:0,class:"json-api-result"},Ge={class:"json-api-response"},Ze={key:4,class:"form-group"},We={class:"modal-actions"},Ye={type:"submit",class:"btn btn-primary"},Ke={class:"modal-content list-selection-modal"},Qe={class:"list-options"},He={key:0,class:"no-lists"},Xe=["onClick"],et={key:0},tt={class:"list-meta"},at={class:"list-category"},st={class:"list-count"},nt={key:0,class:"attribute-keys"},lt={class:"modal-actions"},rt=A(a({__name:"DesignEditorModal",props:{design:{}},emits:["save","close"],setup(e,{emit:t}){const a=e,n=t,d=h(()=>!!a.design),p=s({name:"",description:"",prompt_template:"",output_format:"text",output_type:"string",extract_pattern:""}),b=I(),S=C(),E=s({}),j=s({}),A=s([]),D=s({}),T=s(null),U=s(""),L=s(!1),R=s(null),q=h(()=>S.models.filter(e=>e.enabled)),P=h(()=>p.value.prompt_template),{detectedVariables:F,extractionErrors:J,extractionWarnings:M}=function(e){const t=s([]),a=s([]),n=s([]),l=()=>{const s=[],l=[],u=new Set,c=e.value||"",d=(c.match(/\{\{/g)||[]).length,p=(c.match(/\}\}/g)||[]).length;d!==p&&s.push(`Unmatched braces: ${d} opening {{ but ${p} closing }}`);const m=O.getInstance().extractTemplateVariables(c);for(const e of m)r(e)?e.includes("{{")||e.includes("}}")?s.push(`Nested variables not supported: "${e}"`):(i(e)&&l.push(`"${e}" is a reserved name and may cause issues`),u.add(e)):s.push(`Invalid variable name: "${e}"`);const v=o(c);l.push(...v);const g={variables:Array.from(u).sort(),errors:s,warnings:l};return t.value=g.variables,a.value=g.errors,n.value=g.warnings,g},r=e=>/^[a-zA-Z_][a-zA-Z0-9_]*(?:\.[a-zA-Z_][a-zA-Z0-9_]*)*$/.test(e)&&e.length<=50,i=e=>["id","index","length","toString","valueOf","constructor","prototype"].includes(e.toLowerCase()),o=e=>{const t=[];return e.includes("{")&&!e.includes("{{")&&t.push("Found single braces { } - use double braces {{ }} for variables"),(/\{\s+\{/.test(e)||/\}\s+\}/.test(e))&&t.push("Found spaces between braces - use {{variable}} not { {variable} }"),(/\{\{\{/.test(e)||/\}\}\}/.test(e))&&t.push("Found triple braces - use double braces {{ }} for variables"),/\{\{\s*\}\}/.test(e)&&t.push("Found empty variable placeholder {{ }}"),t};return _(e,l,{immediate:!0}),{detectedVariables:h(()=>t.value),extractionErrors:h(()=>a.value),extractionWarnings:h(()=>n.value),extractVariables:l,isValidVariableName:r}}(P),z=h(()=>F.value.filter(e=>e in E.value||e in j.value)),G=()=>{console.log("=== SYNC VARIABLE ARRAYS ==="),console.log("Detected variables:",F.value),console.log("Current variableArrays:",Object.keys(E.value)),console.log("Current variableListRefs:",Object.keys(j.value));for(const e of F.value)e in E.value||e in j.value||(E.value[e]=[],console.log(`Added new variable array: ${e}`));for(const e of Object.keys(E.value))F.value.includes(e)||(delete E.value[e],console.log(`Removed unused variable array: ${e}`));for(const e of Object.keys(j.value))F.value.includes(e)||(delete j.value[e],console.log(`Removed unused variable list ref: ${e}`));console.log("Final variableArrays:",Object.keys(E.value)),console.log("Final variableListRefs:",Object.keys(j.value))};function Z(e){const t="string"==typeof e?parseInt(e):e,a=A.value.find(e=>e.id===t);return a?.name||"Unknown List"}function W(e){const t="string"==typeof e?parseInt(e):e;return D.value[t]||0}async function Y(){if(U.value&&p.value.prompt_template&&!L.value){L.value=!0,R.value=null;try{const t=p.value.prompt_template.replace(/\{\{\s*([^}]+)\s*\}\}/g,(e,t)=>{const a=t.trim();if(j.value[a]){const e=j.value[a],t=A.value.find(t=>t.id===e);if(t&&t.values&&t.values.length>0)return t.values[0]}const s=E.value[a];return s&&s.length>0?s[0]:`test_${a}`}),a=await N(U.value,t,{temperature:.7,max_tokens:150,output_format:"json",output_type:p.value.output_type});let s,n=null;try{const e=JSON.parse(a);n=e&&"object"==typeof e&&"answer"in e?JSON.stringify(e.answer,null,2):JSON.stringify(e,null,2)}catch(e){s=`JSON Parse Error: ${e instanceof Error?e.message:"Invalid JSON"}`}R.value={response:a,parsed:n,parseError:s}}catch(e){console.error("JSON API test failed:",e),R.value={response:`Error: ${e instanceof Error?e.message:"Unknown error"}`,parsed:null,parseError:"API call failed"}}finally{L.value=!1}}}function K(){G();const e={};for(const[s,n]of Object.entries(E.value))F.value.includes(s)&&n.length>0&&!j.value[s]&&(e[s]=n);const t={};for(const[s,n]of Object.entries(j.value))F.value.includes(s)&&(t[s]=n);const a={name:p.value.name,description:p.value.description,prompt_template:p.value.prompt_template,variables:JSON.parse(JSON.stringify(e)),variable_list_refs:JSON.parse(JSON.stringify(t)),output_format:p.value.output_format,output_type:p.value.output_type,extract_pattern:p.value.extract_pattern};console.log("=== SAVING DESIGN ==="),console.log("Design data being saved:",a),console.log("Variables:",a.variables),console.log("Variable list refs:",a.variable_list_refs),console.log("Variable list refs keys:",Object.keys(a.variable_list_refs||{})),n("save",a)}return _(F,G,{immediate:!0}),k(async()=>{A.value=await b.loadVariableLists(),await S.loadModels(),console.log("=== DESIGN EDITOR MOUNTED ==="),console.log("Available lists loaded:",A.value);for(const e of A.value)if(e.id){const t=await b.getListItems(e.id);D.value[e.id]=t.length}if(a.design&&(console.log("=== LOADING EXISTING DESIGN ==="),console.log("Props design:",a.design),console.log("variable_list_refs from props:",a.design.variable_list_refs),p.value={name:a.design.name,description:a.design.description||"",prompt_template:a.design.prompt_template,output_format:a.design.output_format||"text",output_type:a.design.output_type||"string",extract_pattern:a.design.extract_pattern||""},a.design.variable_list_refs&&(j.value={...a.design.variable_list_refs},console.log("Loaded variableListRefs:",j.value)),a.design.variables))for(const[e,t]of Object.entries(a.design.variables))j.value[e]||(E.value[e]=Array.isArray(t)?t:[t])}),(e,t)=>(r(),l("div",{class:"modal-overlay",onClick:t[10]||(t[10]=y(t=>e.$emit("close"),["self"]))},[i("div",_e,[i("h2",null,g(d.value?"Edit":"Create")+" Design",1),i("form",{onSubmit:y(K,["prevent"])},[i("div",xe,[t[11]||(t[11]=i("label",{for:"design-name"},"Name",-1)),c(i("input",{id:"design-name","onUpdate:modelValue":t[0]||(t[0]=e=>p.value.name=e),type:"text",required:"",placeholder:"My Design"},null,512),[[f,p.value.name]])]),i("div",ke,[t[12]||(t[12]=i("label",{for:"design-description"},"Description (optional)",-1)),c(i("input",{id:"design-description","onUpdate:modelValue":t[1]||(t[1]=e=>p.value.description=e),type:"text",placeholder:"Brief description of this design"},null,512),[[f,p.value.description]])]),i("div",we,[t[13]||(t[13]=i("label",{for:"design-template"},[w(" Prompt Template "),i("span",{class:"label-hint"},"Use {{variable}} for placeholders")],-1)),c(i("textarea",{id:"design-template","onUpdate:modelValue":t[2]||(t[2]=e=>p.value.prompt_template=e),required:"",rows:"6",placeholder:"You are a helpful assistant. Please {{action}} the following {{topic}}...",onInput:G},null,544),[[f,p.value.prompt_template]])]),$(J).length>0?(r(),l("div",$e,[t[14]||(t[14]=i("h4",null,"Template Errors",-1)),i("div",Ve,[(r(!0),l(m,null,v($(J),e=>(r(),l("div",{key:e,class:"error-item"},g(e),1))),128))])])):o("",!0),$(M).length>0?(r(),l("div",Se,[t[15]||(t[15]=i("h4",null,"Template Warnings",-1)),i("div",Ee,[(r(!0),l(m,null,v($(M),e=>(r(),l("div",{key:e,class:"warning-item"},g(e),1))),128))])])):o("",!0),z.value.length>0?(r(),l("div",je,[t[18]||(t[18]=i("h3",null,"Detected Variables",-1)),i("div",Ae,[(r(!0),l(m,null,v(z.value,e=>(r(),l("div",{key:e,class:"variable-item"},[i("div",Ce,[i("span",De,g(e),1),i("div",Ie,[j.value[e]?(r(),l("button",{key:1,type:"button",class:"btn btn-sm btn-danger",onClick:t=>function(e){delete j.value[e],E.value[e]=[]}(e)}," Remove List ",8,Oe)):(r(),l("button",{key:0,type:"button",class:"btn btn-sm btn-secondary",onClick:t=>function(e){T.value=e}(e)}," Use List ",8,Ne))])]),j.value[e]?(r(),l("div",Te,[i("div",Ue,[t[16]||(t[16]=i("strong",null,"Using list:",-1)),w(" "+g(Z(j.value[e]))+" ",1),i("small",Le,"("+g(W(j.value[e]))+" items)",1)])])):(r(),l("div",Re,[t[17]||(t[17]=i("label",null,"Values:",-1)),u(B,{modelValue:E.value[e],"onUpdate:modelValue":t=>E.value[e]=t,placeholder:`Add values for ${e}`,"helper-text":"Press Enter to add each value"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]))]))),128))])])):o("",!0),i("div",qe,[t[20]||(t[20]=i("label",{for:"output-format"},"Output Format",-1)),c(i("select",{id:"output-format","onUpdate:modelValue":t[3]||(t[3]=e=>p.value.output_format=e)},t[19]||(t[19]=[i("option",{value:"text"}," Text ",-1),i("option",{value:"json"}," JSON function calling parser ",-1)]),512),[[x,p.value.output_format]])]),"json"===p.value.output_format?(r(),l("div",Pe,[t[26]||(t[26]=i("label",{for:"output-type"},"JSON Output Type",-1)),c(i("select",{id:"output-type","onUpdate:modelValue":t[4]||(t[4]=e=>p.value.output_type=e)},t[21]||(t[21]=[i("option",{value:"string"}," String ",-1),i("option",{value:"number"}," Number ",-1),i("option",{value:"boolean"}," Boolean ",-1)]),512),[[x,p.value.output_type]]),t[27]||(t[27]=i("p",{class:"form-hint"},' The response will be structured as JSON with an "answer" field containing this type of value. ',-1)),i("div",Fe,[t[25]||(t[25]=i("h5",null,"Test with Live Model",-1)),i("div",Je,[c(i("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>U.value=e),class:"model-select"},[t[22]||(t[22]=i("option",{value:""}," Select a model ",-1)),(r(!0),l(m,null,v(q.value,e=>(r(),l("option",{key:e.id,value:e.id},g(e.name),9,Me))),128))],512),[[x,U.value]]),i("button",{type:"button",class:"btn btn-sm btn-primary",disabled:!U.value||!p.value.prompt_template||L.value,onClick:Y},g(L.value?"Testing...":"Test JSON Parser"),9,ze)]),R.value?(r(),l("div",Be,[t[23]||(t[23]=i("h6",null,"Model Response:",-1)),i("pre",Ge,g(R.value.response),1),t[24]||(t[24]=i("h6",null,"Parsed JSON:",-1)),i("code",{class:V(["json-api-parsed",{error:R.value.parseError}])},g(R.value.parseError||R.value.parsed||"(no valid JSON)"),3)])):o("",!0)])])):o("",!0),"text"===p.value.output_format?(r(),l("div",Ze,[u(he,{modelValue:p.value.extract_pattern,"onUpdate:modelValue":t[6]||(t[6]=e=>p.value.extract_pattern=e),"prompt-template":p.value.prompt_template,"show-api-test":!0,variables:E.value},null,8,["modelValue","prompt-template","variables"])])):o("",!0),i("div",We,[i("button",{type:"button",class:"btn btn-secondary",onClick:t[7]||(t[7]=t=>e.$emit("close"))}," Cancel "),i("button",Ye,g(d.value?"Update":"Create")+" Design ",1)])],32)]),T.value?(r(),l("div",{key:0,class:"modal-overlay",onClick:t[9]||(t[9]=y(e=>T.value=null,["self"]))},[i("div",Ke,[i("h3",null,"Select Variable List for "+g(T.value),1),i("div",Qe,[0===A.value.length?(r(),l("div",He," No variable lists available. Create one in the Variables tab. ")):o("",!0),(r(!0),l(m,null,v(A.value,e=>(r(),l("div",{key:e.id,class:"list-option",onClick:t=>async function(e){if(console.log("=== ASSIGNING VARIABLE LIST ==="),console.log("Variable:",T.value),console.log("List:",e),console.log("List ID:",e.id),T.value&&e.id&&(j.value[T.value]=e.id,delete E.value[T.value],console.log("Updated variableListRefs:",j.value),!(e.id in D.value))){const t=await b.getListItems(e.id);D.value[e.id]=t.length}T.value=null}(e)},[i("h4",null,g(e.name),1),e.description?(r(),l("p",et,g(e.description),1)):o("",!0),i("div",tt,[i("span",at,g(e.category||"general"),1),i("span",st,g(e.values?.length||0)+" values",1),e.attribute_keys?.length?(r(),l("span",nt," Attributes: "+g(e.attribute_keys.join(", ")),1)):o("",!0)])],8,Xe))),128))]),i("div",lt,[i("button",{type:"button",class:"btn btn-secondary",onClick:t[8]||(t[8]=e=>T.value=null)}," Cancel ")])])])):o("",!0)]))}}),[["__scopeId","data-v-ca359e42"]]),it={class:"designs-view"},ot={class:"page-header"},ut={class:"header-actions"},ct=["disabled"],dt={key:0,class:"empty-state"},pt={key:1,class:"designs-container"},mt={class:"sort-controls"},vt={class:"designs-table"},gt={class:"design-main"},ft={class:"design-info"},bt={class:"design-header"},yt={class:"design-name"},ht={class:"design-output"},_t={key:0,class:"design-description"},xt={class:"design-meta"},kt={key:0},wt={class:"design-actions"},$t=["onClick"],Vt=["onClick"],St=["onClick"],Et=["onClick"],jt=["onClick"],At=A(a({__name:"DesignsView",setup(e){const t=S(),a=D(),n=I(),u=s([]),d=s([]),p=s(!1),f=s(null),b=s("updated_at"),y=s("desc"),_=h(()=>[...u.value].sort((e,t)=>{let a,s;switch(b.value){case"name":a=e.name.toLowerCase(),s=t.name.toLowerCase();break;case"created_at":a=new Date(e.created_at||0).getTime(),s=new Date(t.created_at||0).getTime();break;case"updated_at":a=new Date(e.updated_at||e.created_at||0).getTime(),s=new Date(t.updated_at||t.created_at||0).getTime();break;default:return 0}return a<s?"asc"===y.value?-1:1:a>s?"asc"===y.value?1:-1:0}));async function $(){u.value=await a.loadDesigns()}async function V(e){f.value?.id?await a.updateDesign(f.value.id,e):await a.createDesign(e),await $(),j()}function j(){p.value=!1,f.value=null}function A(){const e={version:"1.0",exportDate:(new Date).toISOString(),designs:u.value},t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download=`auditomatic_designs_${(new Date).getTime()}.json`,n.click(),URL.revokeObjectURL(s)}async function C(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{const t=e.target.files?.[0];if(t)try{const e=await t.text(),a=JSON.parse(e),s=R.getInstance(),n=await s.importDesigns(a,{convertTemplateFormat:!0,allowDuplicateNames:!1,skipValidation:!1});if(!n.success&&n.errors.length>0)return void alert(`Import failed: ${n.errors.join(", ")}`);const l=n.designs.length;if(0===l)return void alert("No valid designs found to import");const r=`Import ${l} design${l>1?"s":""}? This will not affect existing designs.`;if(!confirm(r))return;await $();let i=[`Successfully imported ${n.designs.length} design${n.designs.length>1?"s":""}`];n.converted>0&&i.push(`${n.converted} template format${n.converted>1?"s":""} converted`),n.warnings.length>0&&i.push(`Warnings: ${n.warnings.join(", ")}`),alert(i.join(". "))}catch(a){console.error("Import error:",a);let e="Failed to import designs. ";a instanceof SyntaxError?e+="Invalid JSON format.":a instanceof Error&&a.message?e+=a.message:e+="Please check the file format.",alert(e)}},e.click()}function N(){}function O(){y.value="asc"===y.value?"desc":"asc"}function T(e){return e?new Date(e).toLocaleDateString():"N/A"}function U(e){const t=e.variables||{},a=e.variable_list_refs||{};if(0===Object.keys(t).length&&0===Object.keys(a).length)return"0 variables";const s=[];let n=1;for(const[l,r]of Object.entries(t))Array.isArray(r)&&r.length>0&&(s.push(`${l} (${r.length})`),n*=r.length);for(const[l,r]of Object.entries(a)){const e=d.value.find(e=>e.id===r);e&&e.values?.length>0&&(s.push(`${l} (${e.values.length})`),n*=e.values.length)}return 0===s.length?"0 variables":1===s.length?`${s[0]} = ${n} conditions`:`${s.join(" × ")} = ${n} conditions`}return k(async()=>{await $(),await async function(){d.value=await n.loadVariableLists()}()}),(e,s)=>(r(),l("div",it,[i("div",ot,[s[2]||(s[2]=i("h2",null,"Prompt Designs",-1)),i("div",ut,[i("button",{class:"btn btn-secondary",onClick:C}," Import "),i("button",{class:"btn btn-secondary",disabled:0===u.value.length,onClick:A}," Export All ",8,ct),i("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=e=>p.value=!0)}," New Design ")])]),0===u.value.length?(r(),l("div",dt,s[3]||(s[3]=[i("p",null,"No designs yet. Create your first design!",-1)]))):(r(),l("div",pt,[i("div",mt,[s[5]||(s[5]=i("label",null,"Sort by:",-1)),c(i("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>b.value=e),onChange:N},s[4]||(s[4]=[i("option",{value:"updated_at"}," Last Edited ",-1),i("option",{value:"name"}," Name ",-1),i("option",{value:"created_at"}," Created Date ",-1)]),544),[[x,b.value]]),i("button",{class:"sort-toggle",onClick:O},g("desc"===y.value?"↓":"↑"),1)]),i("div",vt,[(r(!0),l(m,null,v(_.value,e=>(r(),l("div",{key:e.id,class:"design-row"},[i("div",gt,[i("div",ft,[i("div",bt,[i("h3",yt,g(e.name),1),i("span",ht,g(e.output_format||"text"),1),e.description?(r(),l("span",_t,g(e.description),1)):o("",!0)]),i("p",xt,[w(g(U(e))+" • Created "+g(T(e.created_at))+" ",1),e.updated_at&&e.updated_at!==e.created_at?(r(),l("span",kt," • Updated "+g(T(e.updated_at)),1)):o("",!0)])]),i("div",wt,[i("button",{class:"btn btn-secondary btn-small",onClick:t=>async function(e){if(e.id){const t=await a.getDesignById(e.id);f.value=t||e}else f.value=e}(e)}," Edit ",8,$t),i("button",{class:"btn btn-secondary btn-small",onClick:t=>function(e){const t={...e,id:void 0,name:`${e.name} (Copy)`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};f.value=t}(e)}," Copy ",8,Vt),i("button",{class:"btn btn-primary btn-small",onClick:a=>{return s=e.id,void t.push({name:"runs",query:{create:s.toString(),from:"designs"}});var s}}," Run ",8,St),i("button",{class:"btn btn-secondary btn-small",onClick:t=>function(e){const t={version:"1.0",exportDate:(new Date).toISOString(),design:e},a=JSON.stringify(t,null,2),s=new Blob([a],{type:"application/json"}),n=URL.createObjectURL(s),l=document.createElement("a");l.href=n,l.download=`design_${e.name.replace(/[^a-zA-Z0-9]/g,"_")}_${(new Date).toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(n)}(e)}," Export ",8,Et),i("button",{class:"btn btn-danger btn-small",onClick:t=>async function(e){confirm("Are you sure you want to delete this design?")&&(await a.deleteDesign(e),await $())}(e.id)}," Delete ",8,jt)])])]))),128))])])),p.value||f.value?(r(),E(rt,{key:2,design:f.value,onSave:V,onClose:j},null,8,["design"])):o("",!0)]))}}),[["__scopeId","data-v-b0e613ae"]]);export{At as default};
